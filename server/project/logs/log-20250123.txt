2025-01-23 16:28:33.887 +02:00 [INF] Starting up the application
2025-01-23 16:36:10.809 +02:00 [INF] Starting up the application
2025-01-23 16:36:15.005 +02:00 [INF] User profile is available. Using 'C:\Users\HP\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-23 16:36:18.539 +02:00 [INF] Executed DbCommand (453ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-23 16:36:18.699 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-23 16:36:19.206 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-23 16:36:19.212 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-23 16:36:19.215 +02:00 [INF] Hosting environment: Development
2025-01-23 16:36:19.218 +02:00 [INF] Content root path: D:\פרויקט סופי\server\project
2025-01-23 16:36:20.162 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-23 16:36:20.460 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 305.5314ms
2025-01-23 16:36:20.495 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-23 16:36:20.507 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 11.8793ms
2025-01-23 16:36:20.690 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-23 16:36:20.929 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 239.0555ms
2025-01-23 16:36:30.527 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:36:30.539 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-23 16:36:31.728 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:36:31.763 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:36:31.914 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:36:31.9144911Z"
2025-01-23 16:36:32.086 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:36:32.128 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:36:32.1285972Z"
2025-01-23 16:36:32.131 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:36:32.1313712Z"
2025-01-23 16:36:32.134 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:36:32.1349146Z"
2025-01-23 16:36:32.145 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:36:32.206 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 434.9455ms
2025-01-23 16:36:32.211 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:36:32.219 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 1691.805ms
2025-01-23 16:38:17.347 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:38:17.353 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:38:17.358 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:38:17.361 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:38:17.371 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:38:17.3710373Z"
2025-01-23 16:38:17.463 +02:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:38:17.468 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:38:17.4682025Z"
2025-01-23 16:38:17.469 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:38:17.4694063Z"
2025-01-23 16:38:17.471 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:38:17.4710673Z"
2025-01-23 16:38:17.476 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:38:17.482 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 114.6688ms
2025-01-23 16:38:17.487 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:38:17.490 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 143.2161ms
2025-01-23 16:38:18.165 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - null null
2025-01-23 16:38:18.176 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:38:18.181 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-23 16:38:18.183 +02:00 [WRN] Missing Authorization Header
2025-01-23 16:38:18.187 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 401 null null 21.4425ms
2025-01-23 16:38:20.694 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:38:20.700 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:38:20.704 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:38:20.706 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:38:20.713 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:38:20.7133743Z"
2025-01-23 16:38:20.718 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:38:20.726 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:38:20.7265626Z"
2025-01-23 16:38:20.728 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:38:20.7281537Z"
2025-01-23 16:38:20.729 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:38:20.7292990Z"
2025-01-23 16:38:20.732 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:38:20.738 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 28.5408ms
2025-01-23 16:38:20.742 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:38:20.744 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 49.0598ms
2025-01-23 16:39:10.598 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-23 16:39:10.603 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:10.606 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 7.7526ms
2025-01-23 16:39:10.614 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 91
2025-01-23 16:39:10.621 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:10.624 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-23 16:39:10.639 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-23 16:39:10.800 +02:00 [INF] Executed DbCommand (102ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-23 16:39:10.818 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-23 16:39:10.940 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-23 16:39:11.212 +02:00 [INF] Executed DbCommand (148ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-23 16:39:11.239 +02:00 [INF] User registered successfully: Reut
2025-01-23 16:39:11.241 +02:00 [INF] User registered successfully.
2025-01-23 16:39:11.244 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:11.258 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 615.7318ms
2025-01-23 16:39:11.260 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-23 16:39:11.263 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null application/json; charset=utf-8 648.5064ms
2025-01-23 16:39:26.448 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-23 16:39:26.452 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:26.453 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 5.8166ms
2025-01-23 16:39:26.457 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 46
2025-01-23 16:39:26.460 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:26.462 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:39:26.468 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-23 16:39:26.485 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-23 16:39:26.673 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-23 16:39:27.070 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-23 16:39:27.107 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-23 16:39:27.112 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:27.116 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 642.1383ms
2025-01-23 16:39:27.119 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:39:27.121 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 664.0848ms
2025-01-23 16:39:27.138 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:39:27.146 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:27.152 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:39:27.156 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:39:27.174 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:39:27.1741001Z"
2025-01-23 16:39:27.182 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:39:27.195 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:27.1950119Z"
2025-01-23 16:39:27.203 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:27.2033456Z"
2025-01-23 16:39:27.205 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:27.2051812Z"
2025-01-23 16:39:27.220 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:39:27.231 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 57.26ms
2025-01-23 16:39:27.238 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:39:27.240 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 101.7881ms
2025-01-23 16:39:35.431 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - null null
2025-01-23 16:39:35.436 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:35.437 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - 204 null null 6.2756ms
2025-01-23 16:39:35.442 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - application/json null
2025-01-23 16:39:35.445 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:35.526 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsBySortAsync (project)'
2025-01-23 16:39:35.533 +02:00 [INF] Route matched with {action = "GetGiftsBySort", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGiftsBySortAsync(System.String, System.String) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:35.543 +02:00 [INF] Received request for GetGiftsBySortAsync with parameters sortBy: Price, order: desc
2025-01-23 16:39:35.551 +02:00 [INF] Starting GetGiftsAsync with sortBy: Price, order: desc at "2025-01-23T14:39:35.5510257Z"
2025-01-23 16:39:35.797 +02:00 [INF] Executed DbCommand (200ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases], [c].[name] AS [Category]
FROM [Gifts] AS [g]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
ORDER BY [g].[Price] DESC
2025-01-23 16:39:35.802 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:35.8027617Z"
2025-01-23 16:39:35.803 +02:00 [INF] Successfully retrieved 1 gifts.
2025-01-23 16:39:35.804 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:39:35.810 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsBySortAsync (project) in 273.903ms
2025-01-23 16:39:35.814 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsBySortAsync (project)'
2025-01-23 16:39:35.815 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - 200 null application/json; charset=utf-8 373.3341ms
2025-01-23 16:39:39.879 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - null null
2025-01-23 16:39:39.884 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:39.885 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - 204 null null 5.3608ms
2025-01-23 16:39:39.890 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:39.894 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:39.899 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:39.903 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:39.911 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:39.9109857Z"
2025-01-23 16:39:39.914 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:39.9142302Z"
2025-01-23 16:39:39.918 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:39.9181350Z"
2025-01-23 16:39:39.927 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:39.935 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:39.9355319Z"
2025-01-23 16:39:39.937 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:39.9375653Z"
2025-01-23 16:39:39.941 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:39.942 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 33.3066ms
2025-01-23 16:39:39.947 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:39.948 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 57.9638ms
2025-01-23 16:39:39.951 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1 - null null
2025-01-23 16:39:39.957 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:39.959 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1 - 204 null null 7.7762ms
2025-01-23 16:39:39.962 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:39.965 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:39.966 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:39.983 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:39.989 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:39.997 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:39.999 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:40.002 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:40.003 +02:00 [INF] Parsing token...
2025-01-23 16:39:40.007 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:40.036 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:40.041 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:40.042 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:40.043 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.0437533Z"
2025-01-23 16:39:40.045 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.055 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:40.061 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:40.067 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:40.076 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:40.119 +02:00 [INF] Created new UserGift entry for Gift 1 (Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:40.159 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-23 16:39:40.164 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:40.166 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:40.167 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:40.169 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:40.171 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 177.4955ms
2025-01-23 16:39:40.176 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.178 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:40.181 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 218.3011ms
2025-01-23 16:39:40.284 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:40.287 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:40.289 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:40.290 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:40.293 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:40.2931788Z"
2025-01-23 16:39:40.294 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.2941865Z"
2025-01-23 16:39:40.297 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.2972358Z"
2025-01-23 16:39:40.301 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.304 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:40.3047559Z"
2025-01-23 16:39:40.306 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:40.3060994Z"
2025-01-23 16:39:40.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:40.308 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 15.9408ms
2025-01-23 16:39:40.313 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:40.316 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 32.0831ms
2025-01-23 16:39:40.321 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:40.323 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:40.324 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:40.328 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.329 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:40.336 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:40.346 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:40.347 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:40.351 +02:00 [INF] Parsing token...
2025-01-23 16:39:40.352 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:40.359 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:40.367 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:40.369 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:40.371 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.3710286Z"
2025-01-23 16:39:40.380 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.385 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:40.386 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:40.387 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:40.400 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:40.406 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:40.409 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:40.414 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:40.416 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:40.418 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:40.420 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 84.7634ms
2025-01-23 16:39:40.427 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.428 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:40.429 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 108.5724ms
2025-01-23 16:39:40.589 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:40.592 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:40.594 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:40.595 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:40.599 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:40.5995098Z"
2025-01-23 16:39:40.601 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.6012440Z"
2025-01-23 16:39:40.603 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.6030207Z"
2025-01-23 16:39:40.608 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.616 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:40.6168625Z"
2025-01-23 16:39:40.618 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:40.6180159Z"
2025-01-23 16:39:40.619 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:40.621 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 22.0577ms
2025-01-23 16:39:40.627 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:40.628 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 39.4258ms
2025-01-23 16:39:40.636 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:40.644 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:40.645 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:40.647 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.648 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:40.653 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:40.657 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:40.659 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:40.660 +02:00 [INF] Parsing token...
2025-01-23 16:39:40.662 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:40.667 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:40.676 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:40.678 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:40.679 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.6796732Z"
2025-01-23 16:39:40.683 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.691 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:40.692 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:40.694 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:40.697 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:40.707 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:40.710 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:40.712 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:40.713 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:40.718 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:40.723 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 72.5507ms
2025-01-23 16:39:40.725 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.726 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:40.728 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 91.8156ms
2025-01-23 16:39:40.804 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:40.808 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:40.810 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:40.811 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:40.814 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:40.8142952Z"
2025-01-23 16:39:40.815 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.8153528Z"
2025-01-23 16:39:40.816 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.8166111Z"
2025-01-23 16:39:40.820 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.827 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:40.8279098Z"
2025-01-23 16:39:40.829 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:40.8298987Z"
2025-01-23 16:39:40.832 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:40.833 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 19.4719ms
2025-01-23 16:39:40.835 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:40.837 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 32.3932ms
2025-01-23 16:39:40.844 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:40.850 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:40.851 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:40.853 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.854 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:40.864 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:40.865 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:40.866 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:40.867 +02:00 [INF] Parsing token...
2025-01-23 16:39:40.868 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:40.876 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:40.882 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:40.884 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:40.885 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:40.8853661Z"
2025-01-23 16:39:40.894 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:40.898 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:40.899 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:40.900 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:40.908 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:40.912 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:40.914 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:40.916 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:40.921 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:40.926 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:40.928 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 65.202ms
2025-01-23 16:39:40.930 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:40.932 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:40.935 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 91.0523ms
2025-01-23 16:39:40.997 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:41.000 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:41.002 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:41.003 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:41.007 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:41.0070351Z"
2025-01-23 16:39:41.008 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:41.0080950Z"
2025-01-23 16:39:41.009 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:41.0093557Z"
2025-01-23 16:39:41.016 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:41.021 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:41.0209931Z"
2025-01-23 16:39:41.022 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:41.0222243Z"
2025-01-23 16:39:41.023 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:41.025 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 18.4783ms
2025-01-23 16:39:41.030 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:41.032 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 34.8217ms
2025-01-23 16:39:41.038 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:41.041 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:41.046 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:41.049 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:41.052 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:41.056 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:41.057 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:41.060 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:41.062 +02:00 [INF] Parsing token...
2025-01-23 16:39:41.066 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:41.072 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:41.084 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:41.086 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:41.087 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:41.0872495Z"
2025-01-23 16:39:41.090 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:41.100 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:41.101 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:41.103 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:41.108 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:41.116 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:41.118 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:41.120 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:41.126 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:41.128 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:41.133 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 77.4757ms
2025-01-23 16:39:41.134 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:41.135 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:41.140 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 101.9766ms
2025-01-23 16:39:42.182 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:42.187 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.189 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.190 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:42.193 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:42.1933380Z"
2025-01-23 16:39:42.194 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.1942814Z"
2025-01-23 16:39:42.195 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.1954667Z"
2025-01-23 16:39:42.199 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.209 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:42.2096014Z"
2025-01-23 16:39:42.211 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:42.2119482Z"
2025-01-23 16:39:42.213 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:42.214 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 21.614ms
2025-01-23 16:39:42.218 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.221 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 38.6241ms
2025-01-23 16:39:42.228 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:42.230 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.233 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:42.235 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.239 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:42.242 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:42.243 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:42.244 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:42.245 +02:00 [INF] Parsing token...
2025-01-23 16:39:42.246 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:42.256 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:42.261 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:42.262 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:42.266 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.2668043Z"
2025-01-23 16:39:42.271 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.274 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:42.275 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:42.277 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:42.284 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:42.288 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:42.290 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:42.292 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:42.296 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:42.298 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:42.302 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 60.5673ms
2025-01-23 16:39:42.305 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.306 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:42.307 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 79.576ms
2025-01-23 16:39:42.397 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:42.400 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.402 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.404 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:42.407 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:42.4072998Z"
2025-01-23 16:39:42.408 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.4083144Z"
2025-01-23 16:39:42.409 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.4095808Z"
2025-01-23 16:39:42.413 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.416 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:42.4168854Z"
2025-01-23 16:39:42.422 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:42.4229227Z"
2025-01-23 16:39:42.424 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:42.426 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 19.4399ms
2025-01-23 16:39:42.428 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.429 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 32.5721ms
2025-01-23 16:39:42.435 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:42.442 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.443 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:42.444 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.446 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:42.453 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:42.455 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:42.458 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:42.459 +02:00 [INF] Parsing token...
2025-01-23 16:39:42.461 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:42.472 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:42.477 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:42.478 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:42.484 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.4847471Z"
2025-01-23 16:39:42.489 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.493 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:42.498 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:42.499 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:42.506 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:42.513 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:42.519 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:42.522 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:42.524 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:42.528 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:42.533 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 80.4773ms
2025-01-23 16:39:42.535 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.536 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:42.538 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 102.656ms
2025-01-23 16:39:42.596 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:42.599 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.601 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.602 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:42.607 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:42.6074322Z"
2025-01-23 16:39:42.609 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.6091953Z"
2025-01-23 16:39:42.611 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.6115584Z"
2025-01-23 16:39:42.615 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.625 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:42.6258848Z"
2025-01-23 16:39:42.627 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:42.6278566Z"
2025-01-23 16:39:42.629 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:42.631 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 24.1701ms
2025-01-23 16:39:42.633 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.639 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 42.9927ms
2025-01-23 16:39:42.647 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:42.652 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.654 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:42.659 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.660 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:42.663 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:42.667 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:42.668 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:42.673 +02:00 [INF] Parsing token...
2025-01-23 16:39:42.674 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:42.679 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:42.689 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:42.692 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:42.693 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.6932666Z"
2025-01-23 16:39:42.697 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.706 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:42.708 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:42.710 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:42.717 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:42.721 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:42.723 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:42.726 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:42.731 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:42.733 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:42.736 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 73.2741ms
2025-01-23 16:39:42.739 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.740 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:42.741 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 93.8129ms
2025-01-23 16:39:42.797 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:42.799 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.801 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.803 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:42.807 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:42.8076057Z"
2025-01-23 16:39:42.809 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.8091334Z"
2025-01-23 16:39:42.810 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.8105844Z"
2025-01-23 16:39:42.814 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.818 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:42.8182618Z"
2025-01-23 16:39:42.819 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:42.8198828Z"
2025-01-23 16:39:42.826 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:42.828 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 21.4248ms
2025-01-23 16:39:42.830 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.832 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 34.9619ms
2025-01-23 16:39:42.843 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:42.846 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.848 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:42.849 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.854 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:42.862 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:42.863 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:42.865 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:42.870 +02:00 [INF] Parsing token...
2025-01-23 16:39:42.875 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:42.882 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:42.893 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:42.895 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:42.897 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.8970196Z"
2025-01-23 16:39:42.906 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:42.913 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:42.917 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:42.919 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:42.925 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:42.931 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:42.937 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:42.939 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:42.941 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:42.942 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:42.946 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 84.9064ms
2025-01-23 16:39:42.951 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:42.953 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:42.954 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 110.91ms
2025-01-23 16:39:42.989 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:42.993 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:42.994 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:42.996 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:42.998 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:42.9986621Z"
2025-01-23 16:39:42.999 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:42.9996053Z"
2025-01-23 16:39:43.000 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.0009174Z"
2025-01-23 16:39:43.005 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.016 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:43.0162399Z"
2025-01-23 16:39:43.017 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:43.0173307Z"
2025-01-23 16:39:43.018 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:43.020 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 22.437ms
2025-01-23 16:39:43.025 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.027 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 37.3102ms
2025-01-23 16:39:43.033 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:43.035 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.039 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:43.043 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.044 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:43.047 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:43.048 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:43.050 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:43.051 +02:00 [INF] Parsing token...
2025-01-23 16:39:43.058 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:43.063 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:43.073 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:43.075 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:43.076 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.0764284Z"
2025-01-23 16:39:43.079 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.086 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:43.089 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:43.093 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:43.096 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:43.106 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:43.110 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:43.112 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:43.117 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:43.119 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:43.123 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 76.2417ms
2025-01-23 16:39:43.125 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.126 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:43.128 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 94.8758ms
2025-01-23 16:39:43.180 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:43.183 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.184 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.185 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:43.189 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:43.1892888Z"
2025-01-23 16:39:43.192 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.1923493Z"
2025-01-23 16:39:43.193 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.1937521Z"
2025-01-23 16:39:43.200 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.204 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:43.2046384Z"
2025-01-23 16:39:43.208 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:43.2086689Z"
2025-01-23 16:39:43.211 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:43.215 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 26.0691ms
2025-01-23 16:39:43.216 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.218 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 38.1149ms
2025-01-23 16:39:43.225 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:43.232 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.233 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:43.235 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.236 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:43.246 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:43.248 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:43.250 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:43.251 +02:00 [INF] Parsing token...
2025-01-23 16:39:43.252 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:43.263 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:43.273 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:43.276 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:43.277 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.2775782Z"
2025-01-23 16:39:43.281 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.292 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:43.294 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:43.296 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:43.300 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:43.310 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:43.313 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:43.315 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:43.319 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:43.321 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:43.326 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 79.6324ms
2025-01-23 16:39:43.327 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.329 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:43.330 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 104.4175ms
2025-01-23 16:39:43.372 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:43.376 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.378 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.380 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:43.383 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:43.3838071Z"
2025-01-23 16:39:43.384 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.3848831Z"
2025-01-23 16:39:43.386 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.3862404Z"
2025-01-23 16:39:43.390 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.397 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:43.3971527Z"
2025-01-23 16:39:43.398 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:43.3984677Z"
2025-01-23 16:39:43.401 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:43.403 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 20.7657ms
2025-01-23 16:39:43.405 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.407 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 34.4533ms
2025-01-23 16:39:43.415 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:43.421 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.422 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:43.423 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.426 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:43.433 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:43.434 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:43.435 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:43.436 +02:00 [INF] Parsing token...
2025-01-23 16:39:43.437 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:43.447 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:43.457 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:43.462 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:43.464 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.4640018Z"
2025-01-23 16:39:43.467 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.470 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:43.474 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:43.478 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:43.482 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:43.486 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:43.492 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:43.495 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:43.496 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:43.498 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:43.500 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 67.6683ms
2025-01-23 16:39:43.506 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.509 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:43.510 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 95.6406ms
2025-01-23 16:39:43.573 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:43.575 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.576 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.578 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:43.581 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:43.5815189Z"
2025-01-23 16:39:43.582 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.5825723Z"
2025-01-23 16:39:43.583 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.5839416Z"
2025-01-23 16:39:43.588 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.592 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:43.5922593Z"
2025-01-23 16:39:43.598 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:43.5985206Z"
2025-01-23 16:39:43.601 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:43.603 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 22.1198ms
2025-01-23 16:39:43.605 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:43.607 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 34.6832ms
2025-01-23 16:39:43.615 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:43.622 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:43.623 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:43.627 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.628 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:43.635 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:43.636 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:43.637 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:43.638 +02:00 [INF] Parsing token...
2025-01-23 16:39:43.642 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:43.651 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:43.662 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:43.664 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:43.666 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:43.6661282Z"
2025-01-23 16:39:43.669 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:43.677 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:43.679 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:43.680 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:43.684 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:43.691 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:43.694 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:43.696 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:43.697 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:43.699 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:43.704 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 69.6518ms
2025-01-23 16:39:43.710 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:43.711 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:43.712 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 96.7827ms
2025-01-23 16:39:48.518 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - null null
2025-01-23 16:39:48.523 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:48.525 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - 204 null null 6.9927ms
2025-01-23 16:39:48.531 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - application/json null
2025-01-23 16:39:48.542 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:48.545 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-23 16:39:48.546 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-23 16:39:48.550 +02:00 [INF] Route matched with {action = "GetUserGifts", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDTO.UserGiftDTO]] GetUserGifts() on controller project.Controllers.UserController (project).
2025-01-23 16:39:48.562 +02:00 [INF] Received request to get basket for user: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:48.564 +02:00 [INF] Start fetching user gifts for userId: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:48.594 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-23 16:39:48.607 +02:00 [INF] Successfully fetched gifts for userId: deba58d9-4383-4966-8d32-cdff3b035478, result count: 1
2025-01-23 16:39:48.609 +02:00 [INF] Successfully retrieved 1 gifts for user: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:48.611 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDTO.UserGiftDTO, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:39:48.620 +02:00 [INF] Executed action project.Controllers.UserController.GetUserGifts (project) in 59.789ms
2025-01-23 16:39:48.622 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-23 16:39:48.623 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:48.624 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 200 null application/json; charset=utf-8 93.5014ms
2025-01-23 16:39:50.476 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:39:50.480 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:50.482 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:39:50.485 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:39:50.493 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:39:50.4931772Z"
2025-01-23 16:39:50.500 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:39:50.505 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:50.5057966Z"
2025-01-23 16:39:50.506 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:50.5068631Z"
2025-01-23 16:39:50.508 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:39:50.5081371Z"
2025-01-23 16:39:50.512 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:39:50.517 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 24.2384ms
2025-01-23 16:39:50.519 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:39:50.521 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 44.2663ms
2025-01-23 16:39:51.718 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - null null
2025-01-23 16:39:51.723 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:51.725 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - 204 null null 7.1346ms
2025-01-23 16:39:51.728 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:51.730 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:51.731 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:51.732 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:51.735 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:51.7355023Z"
2025-01-23 16:39:51.736 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:51.7364889Z"
2025-01-23 16:39:51.737 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:51.7377423Z"
2025-01-23 16:39:51.746 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:51.750 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:51.7507408Z"
2025-01-23 16:39:51.751 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:51.7519329Z"
2025-01-23 16:39:51.753 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:51.756 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 21.6916ms
2025-01-23 16:39:51.759 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:51.762 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 33.8705ms
2025-01-23 16:39:51.767 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1 - null null
2025-01-23 16:39:51.769 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:51.772 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1 - 204 null null 5.4252ms
2025-01-23 16:39:51.776 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:51.778 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:51.779 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:51.781 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:51.782 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:51.788 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:51.793 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:51.794 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:51.795 +02:00 [INF] Parsing token...
2025-01-23 16:39:51.796 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:51.802 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:51.808 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:51.810 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:51.811 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:51.8113952Z"
2025-01-23 16:39:51.813 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:51.823 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:51.825 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:51.827 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:51.831 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:51.839 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:51.842 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:51.844 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:51.846 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:51.849 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:51.853 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 65.1788ms
2025-01-23 16:39:51.855 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:51.856 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:51.857 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 81.1094ms
2025-01-23 16:39:52.108 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:52.111 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:52.114 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:52.115 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:52.119 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:52.1199494Z"
2025-01-23 16:39:52.121 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:52.1219210Z"
2025-01-23 16:39:52.124 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:52.1240822Z"
2025-01-23 16:39:52.128 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:52.136 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:52.1364785Z"
2025-01-23 16:39:52.137 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:52.1378222Z"
2025-01-23 16:39:52.139 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:52.140 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 21.265ms
2025-01-23 16:39:52.145 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:52.146 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 37.7421ms
2025-01-23 16:39:52.154 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:52.156 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:52.159 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:52.161 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:52.165 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:52.169 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:52.171 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:52.174 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:52.175 +02:00 [INF] Parsing token...
2025-01-23 16:39:52.180 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:52.184 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:52.196 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:52.202 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:52.209 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:52.2090787Z"
2025-01-23 16:39:52.212 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:52.216 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:52.217 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:52.221 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:52.224 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:52.228 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:52.230 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:52.232 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:52.233 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:52.239 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:52.244 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 74.8359ms
2025-01-23 16:39:52.246 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:52.248 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:52.249 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 95.1995ms
2025-01-23 16:39:52.348 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:52.351 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:52.352 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:52.353 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:52.356 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:52.3567892Z"
2025-01-23 16:39:52.357 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:52.3578188Z"
2025-01-23 16:39:52.361 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:52.3612391Z"
2025-01-23 16:39:52.366 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:52.369 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:52.3699799Z"
2025-01-23 16:39:52.371 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:52.3715497Z"
2025-01-23 16:39:52.373 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:52.377 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 21.2801ms
2025-01-23 16:39:52.379 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:52.382 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 34.0041ms
2025-01-23 16:39:52.387 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:52.391 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:52.392 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:52.397 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:52.398 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:52.401 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:52.402 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:52.403 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:52.408 +02:00 [INF] Parsing token...
2025-01-23 16:39:52.409 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:52.417 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:52.426 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:52.428 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:52.429 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:52.4294589Z"
2025-01-23 16:39:52.432 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:52.438 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:52.440 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:52.441 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:52.445 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:52.448 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:52.449 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:52.455 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:52.467 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:52.474 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:52.479 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 78.649ms
2025-01-23 16:39:52.481 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:52.482 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:52.488 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 101.6554ms
2025-01-23 16:39:53.774 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:53.777 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:53.778 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:53.779 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:53.783 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:53.7832016Z"
2025-01-23 16:39:53.784 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:53.7845504Z"
2025-01-23 16:39:53.785 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:53.7858771Z"
2025-01-23 16:39:53.797 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:53.803 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:53.8036998Z"
2025-01-23 16:39:53.805 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:53.8055266Z"
2025-01-23 16:39:53.808 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:53.810 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 27.5357ms
2025-01-23 16:39:53.812 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:53.813 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 39.0189ms
2025-01-23 16:39:53.820 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:53.825 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:53.827 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:53.828 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:53.830 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:53.838 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:53.842 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:53.843 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:53.844 +02:00 [INF] Parsing token...
2025-01-23 16:39:53.845 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:53.851 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:53.857 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:53.858 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:53.859 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:53.8593949Z"
2025-01-23 16:39:53.861 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:53.868 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:53.871 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:53.873 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:53.876 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:53.881 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:53.883 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:53.887 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:53.889 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:53.891 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:53.893 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 55.7902ms
2025-01-23 16:39:53.898 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:53.899 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:53.903 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 83.2623ms
2025-01-23 16:39:53.997 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:54.000 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:54.001 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:54.002 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:54.006 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:54.0064915Z"
2025-01-23 16:39:54.007 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.0076791Z"
2025-01-23 16:39:54.009 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.0091728Z"
2025-01-23 16:39:54.012 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:54.016 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:54.0164261Z"
2025-01-23 16:39:54.018 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:54.0184507Z"
2025-01-23 16:39:54.025 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:54.027 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 21.2993ms
2025-01-23 16:39:54.029 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:54.031 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 33.9847ms
2025-01-23 16:39:54.038 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:54.041 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:54.043 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:54.044 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:54.045 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:54.048 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:54.052 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:54.053 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:54.057 +02:00 [INF] Parsing token...
2025-01-23 16:39:54.059 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:54.062 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:54.069 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:54.074 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:54.075 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.0759090Z"
2025-01-23 16:39:54.078 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:54.083 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:54.088 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:54.089 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:54.092 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:54.095 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:54.103 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:54.106 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:54.108 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:54.109 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:54.111 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 62.6469ms
2025-01-23 16:39:54.115 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:54.117 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:54.121 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 83.0764ms
2025-01-23 16:39:54.212 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:54.215 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:54.216 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:54.217 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:54.220 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:54.2209371Z"
2025-01-23 16:39:54.222 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.2220388Z"
2025-01-23 16:39:54.223 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.2233726Z"
2025-01-23 16:39:54.226 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:54.230 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:54.2300924Z"
2025-01-23 16:39:54.231 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:54.2313285Z"
2025-01-23 16:39:54.232 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:54.234 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 13.7444ms
2025-01-23 16:39:54.242 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:54.244 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 31.8222ms
2025-01-23 16:39:54.249 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:54.254 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:54.255 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:54.260 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:54.261 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:54.264 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:54.271 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:54.273 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:54.275 +02:00 [INF] Parsing token...
2025-01-23 16:39:54.276 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:54.286 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:54.292 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:54.293 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:54.295 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.2953767Z"
2025-01-23 16:39:54.303 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:54.307 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:54.308 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:54.310 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:54.315 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:54.323 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:54.325 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:54.330 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:54.332 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:54.337 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:54.340 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 75.7546ms
2025-01-23 16:39:54.342 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:54.346 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:54.348 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 99.5365ms
2025-01-23 16:39:54.436 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:54.439 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:54.441 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:54.442 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:54.445 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:54.4451700Z"
2025-01-23 16:39:54.446 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.4462468Z"
2025-01-23 16:39:54.447 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.4475897Z"
2025-01-23 16:39:54.452 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:54.460 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:54.4602472Z"
2025-01-23 16:39:54.461 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:54.4615494Z"
2025-01-23 16:39:54.462 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:54.464 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 19.591ms
2025-01-23 16:39:54.469 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:54.471 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 34.6859ms
2025-01-23 16:39:54.477 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:54.480 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:54.481 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:54.486 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:54.488 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:54.491 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:54.493 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:54.494 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:54.495 +02:00 [INF] Parsing token...
2025-01-23 16:39:54.496 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:54.507 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:54.519 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:54.521 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:54.523 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:54.5231381Z"
2025-01-23 16:39:54.526 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:54.531 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:54.542 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:54.557 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:54.576 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:54.602 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:54.609 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:54.617 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:54.619 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:54.621 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:54.623 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 131.6872ms
2025-01-23 16:39:54.628 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:54.631 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:54.633 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 155.5241ms
2025-01-23 16:39:59.277 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - null null
2025-01-23 16:39:59.281 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.282 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - 204 null null 4.8209ms
2025-01-23 16:39:59.285 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:59.289 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.291 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.295 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:59.298 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:59.2983649Z"
2025-01-23 16:39:59.299 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.2995150Z"
2025-01-23 16:39:59.300 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.3009501Z"
2025-01-23 16:39:59.305 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.314 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:59.3140433Z"
2025-01-23 16:39:59.316 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:59.3160689Z"
2025-01-23 16:39:59.317 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:59.322 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 24.1596ms
2025-01-23 16:39:59.324 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.328 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 42.5962ms
2025-01-23 16:39:59.333 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1 - null null
2025-01-23 16:39:59.337 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.338 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1 - 204 null null 5.7306ms
2025-01-23 16:39:59.344 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:59.348 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.351 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:59.352 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.357 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:59.360 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:59.362 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:59.368 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:59.370 +02:00 [INF] Parsing token...
2025-01-23 16:39:59.371 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:59.376 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:59.386 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:59.387 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:59.389 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.3891436Z"
2025-01-23 16:39:59.391 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.401 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:59.403 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:59.404 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:59.407 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:59.413 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:59.419 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:59.421 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:59.422 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:59.424 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:59.428 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 67.9433ms
2025-01-23 16:39:59.434 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.435 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:59.436 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 91.6204ms
2025-01-23 16:39:59.492 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:59.495 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.497 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.498 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:59.501 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:59.5019339Z"
2025-01-23 16:39:59.503 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.5030365Z"
2025-01-23 16:39:59.507 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.5071224Z"
2025-01-23 16:39:59.510 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.516 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:59.5161896Z"
2025-01-23 16:39:59.517 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:59.5173462Z"
2025-01-23 16:39:59.518 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:59.524 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 22.4576ms
2025-01-23 16:39:59.526 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.530 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 37.6036ms
2025-01-23 16:39:59.537 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:59.544 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.545 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:59.546 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.548 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:59.558 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:59.559 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:59.560 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:59.561 +02:00 [INF] Parsing token...
2025-01-23 16:39:59.563 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:59.566 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:59.575 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:59.576 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:59.578 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.5781805Z"
2025-01-23 16:39:59.580 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.588 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:59.589 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:59.591 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:59.593 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:59.602 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:59.604 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:59.606 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:59.607 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:59.609 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:59.615 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 57.7785ms
2025-01-23 16:39:59.619 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.621 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:59.622 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 84.7221ms
2025-01-23 16:39:59.700 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:59.703 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.705 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.706 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:59.709 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:59.7091552Z"
2025-01-23 16:39:59.710 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.7103030Z"
2025-01-23 16:39:59.711 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.7117133Z"
2025-01-23 16:39:59.715 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.724 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:59.7239958Z"
2025-01-23 16:39:59.729 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:59.7291592Z"
2025-01-23 16:39:59.730 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:59.733 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 24.2147ms
2025-01-23 16:39:59.737 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.739 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 38.8905ms
2025-01-23 16:39:59.747 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:59.752 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.753 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:59.758 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.759 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:59.762 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:59.764 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:59.768 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:59.770 +02:00 [INF] Parsing token...
2025-01-23 16:39:59.774 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:59.779 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:59.789 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:59.790 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:59.792 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.7920483Z"
2025-01-23 16:39:59.794 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.802 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:39:59.803 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:39:59.805 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:39:59.808 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:39:59.817 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:39:59.820 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:39:59.822 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:39:59.824 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:39:59.825 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:39:59.830 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 68.579ms
2025-01-23 16:39:59.835 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.836 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:39:59.837 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 90.4471ms
2025-01-23 16:39:59.884 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:39:59.888 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.890 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.892 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:39:59.896 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:39:59.8960501Z"
2025-01-23 16:39:59.897 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.8972896Z"
2025-01-23 16:39:59.900 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.9000940Z"
2025-01-23 16:39:59.904 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.914 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:39:59.9148317Z"
2025-01-23 16:39:59.916 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:39:59.9160789Z"
2025-01-23 16:39:59.917 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:39:59.922 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 26.7594ms
2025-01-23 16:39:59.927 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:39:59.929 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 44.7888ms
2025-01-23 16:39:59.937 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - application/json 2
2025-01-23 16:39:59.943 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:39:59.944 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:39:59.946 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:39:59.948 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:39:59.959 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-23 16:39:59.960 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:39:59.961 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:39:59.963 +02:00 [INF] Parsing token...
2025-01-23 16:39:59.964 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:39:59.975 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:39:59.980 +02:00 [INF] User successfully found: Reut
2025-01-23 16:39:59.985 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:39:59.987 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:39:59.9871975Z"
2025-01-23 16:39:59.992 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:39:59.995 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:00.001 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 1
2025-01-23 16:40:00.004 +02:00 [INF] Starting to add Gift 1 (Quantity: 1) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:00.007 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:00.011 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 1) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:00.020 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 1)
2025-01-23 16:40:00.024 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:00.027 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 1
2025-01-23 16:40:00.034 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:00.036 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 78.0994ms
2025-01-23 16:40:00.038 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:00.040 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:00.041 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1 - 200 null application/json; charset=utf-8 103.7712ms
2025-01-23 16:40:00.851 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - null null
2025-01-23 16:40:00.856 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:00.858 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - 204 null null 6.5368ms
2025-01-23 16:40:00.868 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - application/json null
2025-01-23 16:40:00.877 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:00.879 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-23 16:40:00.888 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-23 16:40:00.889 +02:00 [INF] Route matched with {action = "GetUserGifts", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDTO.UserGiftDTO]] GetUserGifts() on controller project.Controllers.UserController (project).
2025-01-23 16:40:00.895 +02:00 [INF] Received request to get basket for user: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:00.897 +02:00 [INF] Start fetching user gifts for userId: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:00.908 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-23 16:40:00.913 +02:00 [INF] Successfully fetched gifts for userId: deba58d9-4383-4966-8d32-cdff3b035478, result count: 1
2025-01-23 16:40:00.914 +02:00 [INF] Successfully retrieved 1 gifts for user: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:00.919 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDTO.UserGiftDTO, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:40:00.924 +02:00 [INF] Executed action project.Controllers.UserController.GetUserGifts (project) in 28.8692ms
2025-01-23 16:40:00.926 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-23 16:40:00.927 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:00.928 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 200 null application/json; charset=utf-8 59.8887ms
2025-01-23 16:40:02.566 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=2 - null null
2025-01-23 16:40:02.569 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:02.571 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=2 - 204 null null 4.4097ms
2025-01-23 16:40:02.574 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=2 - application/json 14
2025-01-23 16:40:02.577 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:02.578 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:02.580 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:02.582 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:02.591 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 2
2025-01-23 16:40:02.592 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:02.595 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:02.596 +02:00 [INF] Parsing token...
2025-01-23 16:40:02.598 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:02.604 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:02.611 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:02.613 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:02.615 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:02.6150573Z"
2025-01-23 16:40:02.618 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:02.626 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:02.628 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 2
2025-01-23 16:40:02.630 +02:00 [INF] Starting to add Gift 1 (Quantity: 2) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:02.634 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:02.644 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 2) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:02.668 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:02.675 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 2)
2025-01-23 16:40:02.678 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:02.687 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 2
2025-01-23 16:40:02.689 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:02.691 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 100.2173ms
2025-01-23 16:40:02.693 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:02.696 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:02.702 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=2 - 200 null application/json; charset=utf-8 127.5929ms
2025-01-23 16:40:02.756 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=3 - null null
2025-01-23 16:40:02.760 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:02.761 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=3 - 204 null null 4.3615ms
2025-01-23 16:40:02.765 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=3 - application/json 14
2025-01-23 16:40:02.768 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:02.769 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:02.770 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:02.773 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:02.779 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 3
2025-01-23 16:40:02.782 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:02.783 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:02.784 +02:00 [INF] Parsing token...
2025-01-23 16:40:02.785 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:02.792 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:02.797 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:02.798 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:02.799 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:02.7999454Z"
2025-01-23 16:40:02.802 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:02.811 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:02.814 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 3
2025-01-23 16:40:02.816 +02:00 [INF] Starting to add Gift 1 (Quantity: 3) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:02.821 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:02.826 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 3) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:02.832 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:02.842 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 3)
2025-01-23 16:40:02.845 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:02.847 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 3
2025-01-23 16:40:02.854 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:02.856 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 77.2301ms
2025-01-23 16:40:02.858 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:02.860 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:02.860 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=3 - 200 null application/json; charset=utf-8 95.3675ms
2025-01-23 16:40:02.924 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=4 - null null
2025-01-23 16:40:02.927 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:02.928 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=4 - 204 null null 4.4904ms
2025-01-23 16:40:02.933 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=4 - application/json 14
2025-01-23 16:40:02.935 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:02.936 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:02.938 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:02.939 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:02.951 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 4
2025-01-23 16:40:02.952 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:02.953 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:02.954 +02:00 [INF] Parsing token...
2025-01-23 16:40:02.955 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:02.963 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:02.970 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:02.975 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:02.976 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:02.9768161Z"
2025-01-23 16:40:02.983 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:02.989 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:02.991 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 4
2025-01-23 16:40:02.994 +02:00 [INF] Starting to add Gift 1 (Quantity: 4) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:02.998 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:03.001 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 4) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:03.012 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:03.019 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 4)
2025-01-23 16:40:03.026 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:03.027 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 4
2025-01-23 16:40:03.028 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:03.032 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 81.3603ms
2025-01-23 16:40:03.038 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.039 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:03.043 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=4 - 200 null application/json; charset=utf-8 109.3936ms
2025-01-23 16:40:03.140 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=5 - null null
2025-01-23 16:40:03.144 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.147 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=5 - 204 null null 6.2644ms
2025-01-23 16:40:03.153 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=5 - application/json 14
2025-01-23 16:40:03.160 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.161 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:03.168 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.169 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:03.178 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 5
2025-01-23 16:40:03.181 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:03.182 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:03.184 +02:00 [INF] Parsing token...
2025-01-23 16:40:03.189 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:03.200 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:03.214 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:03.220 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:03.223 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:03.2239494Z"
2025-01-23 16:40:03.230 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:03.241 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:03.242 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 5
2025-01-23 16:40:03.244 +02:00 [INF] Starting to add Gift 1 (Quantity: 5) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:03.249 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:03.257 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 5) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:03.267 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:03.274 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 5)
2025-01-23 16:40:03.277 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:03.284 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 5
2025-01-23 16:40:03.285 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:03.288 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 109.7239ms
2025-01-23 16:40:03.290 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.292 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:03.293 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=6 - null null
2025-01-23 16:40:03.298 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=5 - 200 null application/json; charset=utf-8 144.5722ms
2025-01-23 16:40:03.304 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.312 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=6 - 204 null null 18.2411ms
2025-01-23 16:40:03.320 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=6 - application/json 14
2025-01-23 16:40:03.322 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.326 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:03.330 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.334 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:03.337 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 6
2025-01-23 16:40:03.342 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:03.345 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:03.349 +02:00 [INF] Parsing token...
2025-01-23 16:40:03.351 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:03.359 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:03.377 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:03.379 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:03.382 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:03.3821075Z"
2025-01-23 16:40:03.388 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:03.397 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:03.400 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 6
2025-01-23 16:40:03.405 +02:00 [INF] Starting to add Gift 1 (Quantity: 6) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:03.411 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:03.420 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 6) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:03.432 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:03.442 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 6)
2025-01-23 16:40:03.445 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:03.452 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 6
2025-01-23 16:40:03.455 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:03.459 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 121.5672ms
2025-01-23 16:40:03.461 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.469 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:03.470 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=6 - 200 null application/json; charset=utf-8 150.3446ms
2025-01-23 16:40:03.486 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=7 - null null
2025-01-23 16:40:03.489 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.491 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=7 - 204 null null 4.8967ms
2025-01-23 16:40:03.504 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=7 - application/json 14
2025-01-23 16:40:03.509 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.510 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:03.511 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.513 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:03.516 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 7
2025-01-23 16:40:03.520 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:03.522 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:03.525 +02:00 [INF] Parsing token...
2025-01-23 16:40:03.526 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:03.534 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:03.542 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:03.544 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:03.546 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:03.5464224Z"
2025-01-23 16:40:03.550 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:03.559 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:03.560 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 7
2025-01-23 16:40:03.567 +02:00 [INF] Starting to add Gift 1 (Quantity: 7) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:03.573 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:03.577 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 7) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:03.590 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:03.594 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 7)
2025-01-23 16:40:03.601 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:03.603 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 7
2025-01-23 16:40:03.605 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:03.608 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 92.1032ms
2025-01-23 16:40:03.613 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.619 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:03.620 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=7 - 200 null application/json; charset=utf-8 115.8418ms
2025-01-23 16:40:03.660 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=8 - null null
2025-01-23 16:40:03.665 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.667 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=8 - 204 null null 6.5602ms
2025-01-23 16:40:03.675 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=8 - application/json 14
2025-01-23 16:40:03.682 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.683 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:03.685 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.686 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:03.699 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 8
2025-01-23 16:40:03.700 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:03.702 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:03.707 +02:00 [INF] Parsing token...
2025-01-23 16:40:03.711 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:03.722 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:03.733 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:03.738 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:03.741 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:03.7415484Z"
2025-01-23 16:40:03.749 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:03.759 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:03.760 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 8
2025-01-23 16:40:03.762 +02:00 [INF] Starting to add Gift 1 (Quantity: 8) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:03.771 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:03.776 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 8) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:03.786 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:03.793 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 8)
2025-01-23 16:40:03.800 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:03.802 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 8
2025-01-23 16:40:03.805 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:03.808 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 109.3504ms
2025-01-23 16:40:03.810 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.816 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:03.818 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=8 - 200 null application/json; charset=utf-8 143.585ms
2025-01-23 16:40:03.825 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=9 - null null
2025-01-23 16:40:03.831 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.835 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=9 - 204 null null 10.2102ms
2025-01-23 16:40:03.839 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=9 - application/json 14
2025-01-23 16:40:03.847 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:03.851 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:03.853 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:03.855 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:03.863 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 9
2025-01-23 16:40:03.869 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:03.870 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:03.872 +02:00 [INF] Parsing token...
2025-01-23 16:40:03.875 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:03.885 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:03.897 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:03.899 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:03.902 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:03.9019903Z"
2025-01-23 16:40:03.909 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:03.915 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:03.918 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 9
2025-01-23 16:40:03.924 +02:00 [INF] Starting to add Gift 1 (Quantity: 9) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:03.930 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:03.943 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 9) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:03.957 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:03.965 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 9)
2025-01-23 16:40:03.971 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:03.976 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 9
2025-01-23 16:40:03.979 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:03.982 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=10 - null null
2025-01-23 16:40:03.986 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 123.9402ms
2025-01-23 16:40:03.994 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:04.000 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:04.003 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=1&quantity=10 - 204 null null 20.3317ms
2025-01-23 16:40:04.008 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:04.019 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=10 - application/json 15
2025-01-23 16:40:04.021 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=9 - 200 null application/json; charset=utf-8 181.1044ms
2025-01-23 16:40:04.025 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:04.038 +02:00 [INF] Incoming Request: POST /api/User
2025-01-23 16:40:04.040 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:04.041 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:40:04.053 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 10
2025-01-23 16:40:04.055 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-23 16:40:04.059 +02:00 [INF] Received request to fetch user by token.
2025-01-23 16:40:04.061 +02:00 [INF] Parsing token...
2025-01-23 16:40:04.066 +02:00 [INF] Attempting to retrieve user with username: Reut and email: reut@gmail.com
2025-01-23 16:40:04.076 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-23 16:40:04.086 +02:00 [INF] User successfully found: Reut
2025-01-23 16:40:04.091 +02:00 [INF] User with Id: deba58d9-4383-4966-8d32-cdff3b035478 successfully retrieved.
2025-01-23 16:40:04.093 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:40:04.0939313Z"
2025-01-23 16:40:04.100 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:40:04.108 +02:00 [INF] Gift with Id: 1 successfully retrieved.
2025-01-23 16:40:04.114 +02:00 [INF] Adding Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket with Quantity: 10
2025-01-23 16:40:04.119 +02:00 [INF] Starting to add Gift 1 (Quantity: 10) to User deba58d9-4383-4966-8d32-cdff3b035478's basket
2025-01-23 16:40:04.130 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-23 16:40:04.142 +02:00 [INF] Updated existing UserGift entry for Gift 1 (New Quantity: 10) and User deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:04.153 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-23 16:40:04.162 +02:00 [INF] Successfully saved changes to database for Gift 1 and User deba58d9-4383-4966-8d32-cdff3b035478 (Quantity: 10)
2025-01-23 16:40:04.170 +02:00 [INF] Added Gift 1 to User deba58d9-4383-4966-8d32-cdff3b035478's basket successfully
2025-01-23 16:40:04.176 +02:00 [INF] Completed AddToBasketAsync for User: deba58d9-4383-4966-8d32-cdff3b035478 and GiftId: 1 with Quantity: 10
2025-01-23 16:40:04.180 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:40:04.187 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 134.5317ms
2025-01-23 16:40:04.194 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-23 16:40:04.202 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:04.204 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=10 - 200 null application/json; charset=utf-8 185.4947ms
2025-01-23 16:40:48.792 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - null null
2025-01-23 16:40:48.803 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:48.805 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - 204 null null 12.9629ms
2025-01-23 16:40:48.816 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - application/json null
2025-01-23 16:40:48.819 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:48.820 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-23 16:40:48.826 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-23 16:40:48.827 +02:00 [INF] Route matched with {action = "GetUserGifts", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDTO.UserGiftDTO]] GetUserGifts() on controller project.Controllers.UserController (project).
2025-01-23 16:40:48.832 +02:00 [INF] Received request to get basket for user: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:48.836 +02:00 [INF] Start fetching user gifts for userId: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:48.842 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-23 16:40:48.850 +02:00 [INF] Successfully fetched gifts for userId: deba58d9-4383-4966-8d32-cdff3b035478, result count: 1
2025-01-23 16:40:48.854 +02:00 [INF] Successfully retrieved 1 gifts for user: deba58d9-4383-4966-8d32-cdff3b035478
2025-01-23 16:40:48.856 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDTO.UserGiftDTO, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:40:48.859 +02:00 [INF] Executed action project.Controllers.UserController.GetUserGifts (project) in 27.4049ms
2025-01-23 16:40:48.861 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-23 16:40:48.867 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:40:48.868 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 200 null application/json; charset=utf-8 52.2683ms
2025-01-23 16:40:51.571 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:40:51.575 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:51.576 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:40:51.579 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:40:51.586 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:40:51.5865411Z"
2025-01-23 16:40:51.592 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:40:51.597 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:40:51.5971004Z"
2025-01-23 16:40:51.598 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:40:51.5981204Z"
2025-01-23 16:40:51.601 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:40:51.6017626Z"
2025-01-23 16:40:51.603 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:40:51.608 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 22.0099ms
2025-01-23 16:40:51.609 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:40:51.612 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 41.8229ms
2025-01-23 16:40:59.859 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:40:59.863 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:40:59.865 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:40:59.867 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:40:59.879 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:40:59.8790062Z"
2025-01-23 16:40:59.884 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:40:59.887 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:40:59.8879623Z"
2025-01-23 16:40:59.892 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:40:59.8925792Z"
2025-01-23 16:40:59.900 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:40:59.9002384Z"
2025-01-23 16:40:59.901 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:40:59.903 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 24.5784ms
2025-01-23 16:40:59.906 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:40:59.913 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 54.5386ms
2025-01-23 16:41:02.543 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-23 16:41:02.547 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:02.549 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 5.9331ms
2025-01-23 16:41:02.552 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 54
2025-01-23 16:41:02.560 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:02.562 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:02.564 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-23 16:41:02.589 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-23 16:41:02.714 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-23 16:41:02.720 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-23 16:41:02.735 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-23 16:41:02.742 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:41:02.749 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 177.5469ms
2025-01-23 16:41:02.752 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:02.753 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 200.6047ms
2025-01-23 16:41:02.770 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:41:02.777 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:02.781 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:41:02.784 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:41:02.798 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:41:02.7988769Z"
2025-01-23 16:41:02.809 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:41:02.823 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:41:02.8235643Z"
2025-01-23 16:41:02.826 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:41:02.8268350Z"
2025-01-23 16:41:02.829 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:41:02.8297910Z"
2025-01-23 16:41:02.833 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:41:02.839 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 41.2693ms
2025-01-23 16:41:02.843 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:41:02.845 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 75.2695ms
2025-01-23 16:41:26.369 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-23 16:41:26.375 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:26.376 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 7.1909ms
2025-01-23 16:41:26.379 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 55
2025-01-23 16:41:26.383 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:26.384 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:26.387 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-23 16:41:26.397 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-23 16:41:26.409 +02:00 [WRN] Invalid login attempt: manager@gmail.com
2025-01-23 16:41:26.416 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-23 16:41:26.424 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 29.8594ms
2025-01-23 16:41:26.426 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:26.429 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 49.3732ms
2025-01-23 16:41:37.949 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-23 16:41:37.952 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:37.953 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 3.966ms
2025-01-23 16:41:37.956 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 56
2025-01-23 16:41:37.959 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:37.960 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:37.962 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-23 16:41:37.976 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-23 16:41:37.984 +02:00 [WRN] Invalid login attempt: manager1@gmail.com
2025-01-23 16:41:37.988 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-23 16:41:37.990 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 20.3514ms
2025-01-23 16:41:37.992 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:37.994 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 37.8223ms
2025-01-23 16:41:53.173 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-23 16:41:53.177 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:53.179 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 5.6501ms
2025-01-23 16:41:53.182 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-23 16:41:53.184 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:53.185 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:53.190 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-23 16:41:53.203 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-23 16:41:53.294 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-23 16:41:53.301 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-23 16:41:53.308 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-23 16:41:53.318 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:41:53.322 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 124.5565ms
2025-01-23 16:41:53.324 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-23 16:41:53.327 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 145.5611ms
2025-01-23 16:41:53.345 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:41:53.348 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:41:53.350 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:41:53.356 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:41:53.378 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:41:53.3782829Z"
2025-01-23 16:41:53.386 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:41:53.400 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:41:53.4005498Z"
2025-01-23 16:41:53.403 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:41:53.4032434Z"
2025-01-23 16:41:53.411 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:41:53.4119405Z"
2025-01-23 16:41:53.413 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:41:53.425 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 47.6777ms
2025-01-23 16:41:53.431 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:41:53.432 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 87.4541ms
2025-01-23 16:42:00.719 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:42:00.722 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:00.725 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 5.9725ms
2025-01-23 16:42:00.732 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:42:00.759 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:00.763 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:42:00.770 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:42:00.780 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:42:00.7799771Z"
2025-01-23 16:42:00.781 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:42:00.7818131Z"
2025-01-23 16:42:00.788 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:42:00.7883160Z"
2025-01-23 16:42:00.844 +02:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:42:00.851 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:42:00.8519206Z"
2025-01-23 16:42:00.853 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:42:00.8539378Z"
2025-01-23 16:42:00.855 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:42:00.8559168Z"
2025-01-23 16:42:00.858 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:00.862 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 83.2488ms
2025-01-23 16:42:00.863 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:42:00.872 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 139.7032ms
2025-01-23 16:42:05.779 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:42:05.785 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:42:05.789 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:05.781 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - null null
2025-01-23 16:42:05.794 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:05.796 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 16.8533ms
2025-01-23 16:42:05.809 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:05.811 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:42:05.819 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:42:05.821 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/1 - 204 null null 39.4184ms
2025-01-23 16:42:05.831 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:42:05.835 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:05.838 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/1 - application/json null
2025-01-23 16:42:05.846 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:42:05.853 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:05.858 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:42:05.859 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:42:05.861 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:42:05.869 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:42:05.871 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:42:05.894 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:42:05.911 +02:00 [INF] Fetching all donators.
2025-01-23 16:42:05.918 +02:00 [INF] Starting GetByIdAsync with ID 1 at "2025-01-23T14:42:05.9180772Z"
2025-01-23 16:42:05.921 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:05.926 +02:00 [INF] Fetching all donators.
2025-01-23 16:42:05.928 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:42:05.9281258Z"
2025-01-23 16:42:05.936 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 94.1906ms
2025-01-23 16:42:05.946 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-23T14:42:05.9464056Z"
2025-01-23 16:42:05.962 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:42:05.969 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:42:05.992 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 207.1668ms
2025-01-23 16:42:06.024 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:42:06.041 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:42:06.058 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 1 at "2025-01-23T14:42:06.0581741Z"
2025-01-23 16:42:06.064 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:06.067 +02:00 [INF] GetByIdAsync completed successfully with ID 1 at "2025-01-23T14:42:06.0679739Z"
2025-01-23 16:42:06.079 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 169.7136ms
2025-01-23 16:42:06.083 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:42:06.091 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:42:06.093 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 175.9143ms
2025-01-23 16:42:06.098 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:42:06.107 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:42:06.108 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 289.1345ms
2025-01-23 16:42:06.114 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/1 - 200 null application/json; charset=utf-8 275.61ms
2025-01-23 16:42:08.720 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:42:08.720 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:42:08.724 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:08.728 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:08.729 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:42:08.731 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:42:08.733 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:42:08.738 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:42:08.740 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:42:08.750 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:42:08.756 +02:00 [INF] Fetching all donators.
2025-01-23 16:42:08.775 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:42:08.785 +02:00 [INF] Fetching all donators.
2025-01-23 16:42:08.790 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:08.805 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:42:08.807 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 61.1373ms
2025-01-23 16:42:08.815 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:42:08.824 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:42:08.825 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:08.827 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 106.9607ms
2025-01-23 16:42:08.839 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 84.6525ms
2025-01-23 16:42:08.857 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:42:08.858 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:42:08.861 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 141.1638ms
2025-01-23 16:42:29.895 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-23 16:42:29.900 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:29.901 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 5.7806ms
2025-01-23 16:42:29.905 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 172
2025-01-23 16:42:29.908 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:29.909 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:42:29.913 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-23 16:42:29.926 +02:00 [INF] Starting CreateGiftAsync at "2025-01-23T14:42:29.9268080Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-23 16:42:29.930 +02:00 [INF] Starting CreateGiftAsync for GiftDto: Nicely:) at "2025-01-23T14:42:29.9304223Z"
2025-01-23 16:42:29.932 +02:00 [INF] Fetching donator by name: david
2025-01-23 16:42:29.942 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-23 16:42:29.953 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-23 16:42:29.960 +02:00 [INF] Successfully retrieved category with name: aa
2025-01-23 16:42:30.055 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Name] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-23 16:42:30.072 +02:00 [INF] Starting CreateGiftAsync for Gift: Nicely:) at "2025-01-23T14:42:30.0724218Z"
2025-01-23 16:42:30.168 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-23 16:42:30.191 +02:00 [INF] CreateGiftAsync completed successfully for Gift: Nicely:) at "2025-01-23T14:42:30.1911302Z"
2025-01-23 16:42:30.194 +02:00 [INF] CreateGiftAsync completed successfully for Gift: Nicely:) at "2025-01-23T14:42:30.1945148Z"
2025-01-23 16:42:30.195 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-23T14:42:30.1958907Z"
2025-01-23 16:42:30.198 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:42:30.203 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 286.4003ms
2025-01-23 16:42:30.206 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:42:30.207 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 302.1745ms
2025-01-23 16:42:30.294 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:42:30.297 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:30.298 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 4.7106ms
2025-01-23 16:42:30.307 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:42:30.311 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:30.313 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:42:30.314 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:42:30.316 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:42:30.3166689Z"
2025-01-23 16:42:30.317 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:42:30.3176152Z"
2025-01-23 16:42:30.318 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:42:30.3186983Z"
2025-01-23 16:42:30.334 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:42:30.342 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:42:30.3423271Z"
2025-01-23 16:42:30.344 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:42:30.3440342Z"
2025-01-23 16:42:30.345 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:42:30.3450404Z"
2025-01-23 16:42:30.346 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:30.347 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 31.3484ms
2025-01-23 16:42:30.349 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:42:30.353 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 46.6145ms
2025-01-23 16:42:36.603 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:42:36.605 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:42:36.606 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:36.610 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:36.612 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 8.5369ms
2025-01-23 16:42:36.613 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:42:36.617 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:42:36.620 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:42:36.627 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:42:36.642 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:42:36.644 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:42:36.650 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:42:36.652 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:42:36.659 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:36.663 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:42:36.666 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 31.2828ms
2025-01-23 16:42:36.681 +02:00 [INF] Fetching all donators.
2025-01-23 16:42:36.685 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:42:36.692 +02:00 [INF] Fetching all donators.
2025-01-23 16:42:36.696 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 91.1919ms
2025-01-23 16:42:36.701 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:42:36.725 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:42:36.731 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:42:36.740 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 61.0155ms
2025-01-23 16:42:36.748 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:42:36.749 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:42:36.759 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 142.0344ms
2025-01-23 16:43:01.182 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-23 16:43:01.192 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:01.193 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 11.756ms
2025-01-23 16:43:01.198 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 169
2025-01-23 16:43:01.201 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:01.203 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:43:01.204 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-23 16:43:01.207 +02:00 [INF] Starting CreateGiftAsync at "2025-01-23T14:43:01.2079388Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-23 16:43:01.210 +02:00 [INF] Starting CreateGiftAsync for GiftDto: Addi at "2025-01-23T14:43:01.2102480Z"
2025-01-23 16:43:01.217 +02:00 [INF] Fetching donator by name: david
2025-01-23 16:43:01.221 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-23 16:43:01.231 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-23 16:43:01.237 +02:00 [INF] Successfully retrieved category with name: aa
2025-01-23 16:43:01.239 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Name] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-23 16:43:01.249 +02:00 [INF] Starting CreateGiftAsync for Gift: Addi at "2025-01-23T14:43:01.2498316Z"
2025-01-23 16:43:01.261 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-23 16:43:01.268 +02:00 [INF] CreateGiftAsync completed successfully for Gift: Addi at "2025-01-23T14:43:01.2688957Z"
2025-01-23 16:43:01.270 +02:00 [INF] CreateGiftAsync completed successfully for Gift: Addi at "2025-01-23T14:43:01.2709106Z"
2025-01-23 16:43:01.272 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-23T14:43:01.2720928Z"
2025-01-23 16:43:01.276 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:43:01.279 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 72.1044ms
2025-01-23 16:43:01.281 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:43:01.282 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 83.9535ms
2025-01-23 16:43:01.367 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:43:01.371 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:01.372 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 4.7166ms
2025-01-23 16:43:01.377 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:43:01.381 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:01.389 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:43:01.390 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:43:01.400 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:01.4006935Z"
2025-01-23 16:43:01.401 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:01.4016291Z"
2025-01-23 16:43:01.406 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:01.4066191Z"
2025-01-23 16:43:01.416 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:43:01.431 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:01.4319059Z"
2025-01-23 16:43:01.437 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:01.4378658Z"
2025-01-23 16:43:01.439 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:01.4390048Z"
2025-01-23 16:43:01.440 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:01.442 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 42.5395ms
2025-01-23 16:43:01.449 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:43:01.451 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 73.6972ms
2025-01-23 16:43:08.310 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-23 16:43:08.314 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:08.316 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 5.6764ms
2025-01-23 16:43:08.318 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-23 16:43:08.321 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:08.322 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-23 16:43:08.329 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:43:08.341 +02:00 [INF] Starting LotteryAsync for Gift ID 4 at "2025-01-23T14:43:08.3413861Z"
2025-01-23 16:43:08.348 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 4 at "2025-01-23T14:43:08.3479828Z"
2025-01-23 16:43:08.351 +02:00 [INF] Fetching Gift with participants for Gift ID 4 at "2025-01-23T14:43:08.3517432Z"
2025-01-23 16:43:08.415 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-23 16:43:08.430 +02:00 [WRN] No participants found for Gift ID 4 at "2025-01-23T14:43:08.4307735Z"
2025-01-23 16:43:08.534 +02:00 [ERR] Error occurred in LotteryAsync Service for Gift ID 4 at "2025-01-23T14:43:08.5343184Z"
System.ApplicationException: No participants found for this gift.
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 239
2025-01-23 16:43:08.676 +02:00 [ERR] Error occurred in LotteryAsync for Gift ID 4 at "2025-01-23T14:43:08.6760690Z"
System.Net.Http.HttpRequestException: An error occurred during the lottery process.
 ---> System.ApplicationException: No participants found for this gift.
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 239
   --- End of inner exception stack trace ---
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 272
   at project.Controllers.GiftController.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Controllers\GiftController.cs:line 229
2025-01-23 16:43:08.685 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:43:08.688 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 351.4311ms
2025-01-23 16:43:08.690 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-23 16:43:08.693 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 500 null application/json; charset=utf-8 374.6882ms
2025-01-23 16:43:10.788 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-23 16:43:10.793 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:10.794 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-23 16:43:10.795 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:43:10.798 +02:00 [INF] Starting LotteryAsync for Gift ID 1 at "2025-01-23T14:43:10.7983041Z"
2025-01-23 16:43:10.799 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 1 at "2025-01-23T14:43:10.7993967Z"
2025-01-23 16:43:10.802 +02:00 [INF] Fetching Gift with participants for Gift ID 1 at "2025-01-23T14:43:10.8024404Z"
2025-01-23 16:43:10.817 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-23 16:43:10.840 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gift_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__gift_Id_0
2025-01-23 16:43:10.847 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [IsLotteryCompleted] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-01-23 16:43:10.855 +02:00 [WRN] User list is empty for Gift ID 1 at "2025-01-23T14:43:10.8553095Z"
2025-01-23 16:43:10.914 +02:00 [ERR] Error occurred in LotteryAsync Service for Gift ID 1 at "2025-01-23T14:43:10.9143029Z"
System.ApplicationException: No participants found for this gift.
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 258
2025-01-23 16:43:10.990 +02:00 [ERR] Error occurred in LotteryAsync for Gift ID 1 at "2025-01-23T14:43:10.9900401Z"
System.Net.Http.HttpRequestException: An error occurred during the lottery process.
 ---> System.ApplicationException: No participants found for this gift.
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 258
   --- End of inner exception stack trace ---
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 272
   at project.Controllers.GiftController.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Controllers\GiftController.cs:line 229
2025-01-23 16:43:10.996 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:43:10.998 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 200.2193ms
2025-01-23 16:43:10.999 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-23 16:43:11.001 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 500 null application/json; charset=utf-8 212.6964ms
2025-01-23 16:43:13.157 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:43:13.163 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:43:13.167 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:13.171 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:13.173 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 16.2214ms
2025-01-23 16:43:13.175 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:43:13.182 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:43:13.184 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:43:13.202 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:13.217 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:43:13.217 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:43:13.222 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:43:13.223 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:43:13.230 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:13.231 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:43:13.236 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 22.4222ms
2025-01-23 16:43:13.250 +02:00 [INF] Fetching all donators.
2025-01-23 16:43:13.252 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:43:13.257 +02:00 [INF] Fetching all donators.
2025-01-23 16:43:13.261 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 98.3576ms
2025-01-23 16:43:13.269 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:43:13.285 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:43:13.291 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:13.296 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 46.2021ms
2025-01-23 16:43:13.298 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:43:13.299 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:43:13.300 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 117.7642ms
2025-01-23 16:43:23.125 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-23 16:43:23.127 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:23.129 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 3.7261ms
2025-01-23 16:43:23.132 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 165
2025-01-23 16:43:23.136 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:23.137 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:43:23.138 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-23 16:43:23.142 +02:00 [INF] Starting CreateGiftAsync at "2025-01-23T14:43:23.1424444Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-23 16:43:23.143 +02:00 [INF] Starting CreateGiftAsync for GiftDto: ttt at "2025-01-23T14:43:23.1438744Z"
2025-01-23 16:43:23.148 +02:00 [INF] Fetching donator by name: david
2025-01-23 16:43:23.156 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-23 16:43:23.163 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-23 16:43:23.169 +02:00 [INF] Successfully retrieved category with name: aa
2025-01-23 16:43:23.173 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Name] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-23 16:43:23.182 +02:00 [INF] Starting CreateGiftAsync for Gift: ttt at "2025-01-23T14:43:23.1828100Z"
2025-01-23 16:43:23.193 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-23 16:43:23.201 +02:00 [INF] CreateGiftAsync completed successfully for Gift: ttt at "2025-01-23T14:43:23.2016397Z"
2025-01-23 16:43:23.203 +02:00 [INF] CreateGiftAsync completed successfully for Gift: ttt at "2025-01-23T14:43:23.2034752Z"
2025-01-23 16:43:23.204 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-23T14:43:23.2048265Z"
2025-01-23 16:43:23.207 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:43:23.212 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 70.2007ms
2025-01-23 16:43:23.213 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:43:23.214 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 82.2377ms
2025-01-23 16:43:23.304 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:43:23.308 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:23.309 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 5.1964ms
2025-01-23 16:43:23.317 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:43:23.321 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:23.323 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:43:23.324 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:43:23.327 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:23.3273950Z"
2025-01-23 16:43:23.328 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:23.3284720Z"
2025-01-23 16:43:23.335 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:23.3353606Z"
2025-01-23 16:43:23.340 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:43:23.347 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:23.3476446Z"
2025-01-23 16:43:23.353 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:23.3531465Z"
2025-01-23 16:43:23.354 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:23.3544480Z"
2025-01-23 16:43:23.355 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:23.357 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 29.9637ms
2025-01-23 16:43:23.358 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:43:23.360 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 42.3066ms
2025-01-23 16:43:25.683 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:43:25.684 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:43:25.687 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:25.690 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:25.691 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.9121ms
2025-01-23 16:43:25.692 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:43:25.702 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:43:25.716 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:25.707 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:43:25.722 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:43:25.730 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:43:25.731 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:43:25.746 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:43:25.748 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:43:25.755 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:25.762 +02:00 [INF] Fetching all donators.
2025-01-23 16:43:25.770 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 42.6441ms
2025-01-23 16:43:25.773 +02:00 [INF] Fetching all donators.
2025-01-23 16:43:25.780 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:43:25.786 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:43:25.790 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 105.2648ms
2025-01-23 16:43:25.807 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:43:25.821 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:25.828 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 65.8363ms
2025-01-23 16:43:25.836 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:43:25.841 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:43:25.844 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 141.972ms
2025-01-23 16:43:32.918 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-23 16:43:32.921 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:32.923 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 5.1633ms
2025-01-23 16:43:32.925 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 170
2025-01-23 16:43:32.928 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:32.930 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:43:32.932 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-23 16:43:32.935 +02:00 [INF] Starting CreateGiftAsync at "2025-01-23T14:43:32.9356622Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-23 16:43:32.940 +02:00 [INF] Starting CreateGiftAsync for GiftDto: 786543 at "2025-01-23T14:43:32.9407194Z"
2025-01-23 16:43:32.942 +02:00 [INF] Fetching donator by name: david
2025-01-23 16:43:32.949 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-23 16:43:32.960 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-23 16:43:32.964 +02:00 [INF] Successfully retrieved category with name: aa
2025-01-23 16:43:32.968 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Name] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-23 16:43:32.976 +02:00 [INF] Starting CreateGiftAsync for Gift: 786543 at "2025-01-23T14:43:32.9764961Z"
2025-01-23 16:43:32.986 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-23 16:43:32.992 +02:00 [INF] CreateGiftAsync completed successfully for Gift: 786543 at "2025-01-23T14:43:32.9926823Z"
2025-01-23 16:43:32.993 +02:00 [INF] CreateGiftAsync completed successfully for Gift: 786543 at "2025-01-23T14:43:32.9939904Z"
2025-01-23 16:43:32.995 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-23T14:43:32.9956718Z"
2025-01-23 16:43:33.000 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:43:33.004 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 69.4075ms
2025-01-23 16:43:33.006 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:43:33.007 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 81.9278ms
2025-01-23 16:43:33.095 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:43:33.101 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:33.103 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 8.1292ms
2025-01-23 16:43:33.110 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:43:33.118 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:33.119 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:43:33.120 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:43:33.130 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:33.1307387Z"
2025-01-23 16:43:33.132 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:33.1321420Z"
2025-01-23 16:43:33.133 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:43:33.1331531Z"
2025-01-23 16:43:33.139 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:43:33.148 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:33.1480284Z"
2025-01-23 16:43:33.149 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:33.1495220Z"
2025-01-23 16:43:33.150 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:43:33.1509621Z"
2025-01-23 16:43:33.152 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:43:33.156 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 25.525ms
2025-01-23 16:43:33.161 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:43:33.162 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 52.5175ms
2025-01-23 16:43:34.885 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - null null
2025-01-23 16:43:34.891 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:34.892 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - 204 null null 7.1893ms
2025-01-23 16:43:34.896 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - application/json null
2025-01-23 16:43:34.898 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:43:34.899 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-23 16:43:34.900 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-23 16:43:34.904 +02:00 [INF] Route matched with {action = "ExportWinnersToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportWinnersToExcel() on controller project.Controllers.ReportController (project).
2025-01-23 16:43:35.654 +02:00 [INF] Starting to fetch winners with their gifts.
2025-01-23 16:43:35.703 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image], [w].[Id], [w].[Date], [w].[LinkedUserId], [w].[Name], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Gifts] AS [g]
LEFT JOIN [Winnings] AS [w] ON [g].[WinningId] = [w].[Id]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'User'
) AS [a0] ON [w].[LinkedUserId] = [a0].[Id]
WHERE [g].[WinningId] IS NOT NULL
2025-01-23 16:43:35.708 +02:00 [WRN] No winners found with associated gifts.
2025-01-23 16:43:36.258 +02:00 [INF] Executing FileContentResult, sending file with download name 'WinnersReport.xlsx' ...
2025-01-23 16:43:36.273 +02:00 [INF] Executed action project.Controllers.ReportController.ExportWinnersToExcel (project) in 1364.1223ms
2025-01-23 16:43:36.275 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-23 16:43:36.278 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:43:36.283 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 200 2655 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 1387.8403ms
2025-01-23 16:44:12.590 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:44:12.594 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:44:12.603 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:12.608 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:12.610 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 19.9811ms
2025-01-23 16:44:12.619 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:44:12.625 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:44:12.626 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:44:12.633 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:12.643 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:44:12.645 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:44:12.648 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:12.661 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:44:12.663 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:44:12.674 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:12.689 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:12.695 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 53.0178ms
2025-01-23 16:44:12.708 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:12.710 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:44:12.722 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:44:12.724 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 129.2232ms
2025-01-23 16:44:12.732 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:44:12.748 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:12.758 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 69.6136ms
2025-01-23 16:44:12.765 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:12.773 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:44:12.776 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 150.726ms
2025-01-23 16:44:14.722 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/6 - null null
2025-01-23 16:44:14.722 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:44:14.725 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:44:14.729 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:14.731 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:14.734 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:14.745 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:44:14.743 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/6 - 204 null null 21.01ms
2025-01-23 16:44:14.773 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:44:14.776 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:14.784 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/6 - application/json null
2025-01-23 16:44:14.787 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:44:14.792 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:44:14.795 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:14.811 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:44:14.818 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:14.823 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:44:14.829 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:44:14.833 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:14.840 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:44:14.841 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:14.854 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:44:14.861 +02:00 [INF] Starting GetByIdAsync with ID 6 at "2025-01-23T14:44:14.8612687Z"
2025-01-23 16:44:14.865 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 56.9674ms
2025-01-23 16:44:14.880 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:44:14.889 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-23T14:44:14.8889934Z"
2025-01-23 16:44:14.893 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:44:14.894 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:14.896 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-23T14:44:14.8963435Z"
2025-01-23 16:44:14.903 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 177.6333ms
2025-01-23 16:44:14.917 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 99.7071ms
2025-01-23 16:44:14.926 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-23 16:44:14.941 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:14.954 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 6 at "2025-01-23T14:44:14.9541593Z"
2025-01-23 16:44:14.959 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:44:14.961 +02:00 [INF] GetByIdAsync completed successfully with ID 6 at "2025-01-23T14:44:14.9611860Z"
2025-01-23 16:44:14.968 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 245.1963ms
2025-01-23 16:44:14.973 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-23 16:44:14.991 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 130.6293ms
2025-01-23 16:44:14.997 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-23 16:44:15.004 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/6 - 200 null application/json; charset=utf-8 220.5643ms
2025-01-23 16:44:18.567 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-23 16:44:18.571 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:18.572 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 5.7662ms
2025-01-23 16:44:18.575 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 187
2025-01-23 16:44:18.578 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:18.580 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-23 16:44:18.583 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-23 16:44:18.595 +02:00 [INF] Starting UpdateGiftAsync at "2025-01-23T14:44:18.5955479Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-23 16:44:18.598 +02:00 [INF] Starting UpdateGiftAsync for Gift ID 6 at "2025-01-23T14:44:18.5982056Z"
2025-01-23 16:44:18.608 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-23 16:44:18.623 +02:00 [INF] Successfully retrieved category with name: aa
2025-01-23 16:44:18.627 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__gift_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__gift_Id_0
2025-01-23 16:44:18.649 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [image] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-01-23 16:44:18.658 +02:00 [INF] UpdateGiftAsync completed successfully for Gift ID 6 at "2025-01-23T14:44:18.6583904Z"
2025-01-23 16:44:18.661 +02:00 [INF] UpdateGiftAsync completed successfully at "2025-01-23T14:44:18.6613410Z"
2025-01-23 16:44:18.666 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:44:18.671 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 78.9138ms
2025-01-23 16:44:18.674 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-23 16:44:18.676 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 100.4868ms
2025-01-23 16:44:18.764 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:44:18.767 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:18.769 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 5.1684ms
2025-01-23 16:44:18.775 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:44:18.781 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:18.783 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:44:18.785 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:44:18.796 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:44:18.7967810Z"
2025-01-23 16:44:18.798 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:44:18.7988551Z"
2025-01-23 16:44:18.800 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:44:18.8001122Z"
2025-01-23 16:44:18.809 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:44:18.813 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:44:18.8137849Z"
2025-01-23 16:44:18.815 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:44:18.8151238Z"
2025-01-23 16:44:18.816 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:44:18.8163061Z"
2025-01-23 16:44:18.820 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:18.824 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 28.1252ms
2025-01-23 16:44:18.827 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:44:18.829 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 53.7638ms
2025-01-23 16:44:23.611 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:44:23.613 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:44:23.615 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:23.618 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:23.619 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.934ms
2025-01-23 16:44:23.623 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:44:23.630 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:44:23.633 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:44:23.641 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:23.660 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:44:23.661 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:44:23.668 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:23.680 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:44:23.686 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:44:23.688 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:23.697 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:23.703 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 46.8794ms
2025-01-23 16:44:23.710 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:23.713 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:44:23.723 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:44:23.724 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 111.5401ms
2025-01-23 16:44:23.733 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:44:23.756 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:23.758 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 61.3878ms
2025-01-23 16:44:23.764 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:23.766 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:44:23.771 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 140.6247ms
2025-01-23 16:44:38.293 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-23 16:44:38.296 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:38.297 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 4.2809ms
2025-01-23 16:44:38.300 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 163
2025-01-23 16:44:38.303 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:38.305 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:44:38.306 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-23 16:44:38.309 +02:00 [INF] Starting CreateGiftAsync at "2025-01-23T14:44:38.3096661Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-23 16:44:38.311 +02:00 [INF] Starting CreateGiftAsync for GiftDto: 43 at "2025-01-23T14:44:38.3112630Z"
2025-01-23 16:44:38.312 +02:00 [INF] Fetching donator by name: david
2025-01-23 16:44:38.315 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-23 16:44:38.327 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-23 16:44:38.331 +02:00 [INF] Successfully retrieved category with name: aa
2025-01-23 16:44:38.337 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Gifts] AS [g]
        WHERE [g].[Name] = @__name_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-23 16:44:38.342 +02:00 [INF] Starting CreateGiftAsync for Gift: 43 at "2025-01-23T14:44:38.3426903Z"
2025-01-23 16:44:38.352 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-23 16:44:38.359 +02:00 [INF] CreateGiftAsync completed successfully for Gift: 43 at "2025-01-23T14:44:38.3590592Z"
2025-01-23 16:44:38.360 +02:00 [INF] CreateGiftAsync completed successfully for Gift: 43 at "2025-01-23T14:44:38.3603654Z"
2025-01-23 16:44:38.361 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-23T14:44:38.3616102Z"
2025-01-23 16:44:38.365 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:44:38.369 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 60.6756ms
2025-01-23 16:44:38.373 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-23 16:44:38.375 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 74.9204ms
2025-01-23 16:44:38.460 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:44:38.465 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:38.467 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 6.3768ms
2025-01-23 16:44:38.471 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:44:38.476 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:38.481 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:44:38.483 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:44:38.489 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:44:38.4895851Z"
2025-01-23 16:44:38.490 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:44:38.4906081Z"
2025-01-23 16:44:38.495 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:44:38.4951921Z"
2025-01-23 16:44:38.500 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:44:38.510 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:44:38.5100955Z"
2025-01-23 16:44:38.511 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:44:38.5117483Z"
2025-01-23 16:44:38.512 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:44:38.5127643Z"
2025-01-23 16:44:38.513 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:38.515 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 26.1263ms
2025-01-23 16:44:38.523 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:44:38.524 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 53.6802ms
2025-01-23 16:44:42.143 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-23 16:44:42.147 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:42.151 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 7.5746ms
2025-01-23 16:44:42.160 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-23 16:44:42.167 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:42.174 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:44:42.178 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-23 16:44:42.184 +02:00 [INF] Received request to get gifts with purchases.
2025-01-23 16:44:42.186 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:44:42.1868412Z"
2025-01-23 16:44:42.189 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:44:42.1899204Z"
2025-01-23 16:44:42.202 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-23 16:44:42.207 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:44:42.2079030Z"
2025-01-23 16:44:42.209 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:44:42.2089982Z"
2025-01-23 16:44:42.210 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-23 16:44:42.213 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:42.219 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 36.2947ms
2025-01-23 16:44:42.221 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:44:42.223 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 62.9453ms
2025-01-23 16:44:45.901 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - null null
2025-01-23 16:44:45.906 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:45.907 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - 204 null null 6.3725ms
2025-01-23 16:44:45.912 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - application/json null
2025-01-23 16:44:45.915 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:45.918 +02:00 [INF] Incoming Request: GET /api/User/4/buyers
2025-01-23 16:44:45.921 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetGiftBuyers (project)'
2025-01-23 16:44:45.925 +02:00 [INF] Route matched with {action = "GetGiftBuyers", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDTO.UserGiftDTO]] GetGiftBuyers(Int32) on controller project.Controllers.UserController (project).
2025-01-23 16:44:45.958 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[GiftId], [g].[Name] AS [GiftName], [g].[image] AS [GiftImage], [g].[Price] AS [GiftPrice], [u].[UserId], [a0].[UserName], [a0].[Email] AS [UserEmail], [u].[Quantity]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
INNER JOIN (
    SELECT [a].[Id], [a].[Email], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'User'
) AS [a0] ON [u].[UserId] = [a0].[Id]
WHERE [u].[GiftId] = @__giftId_0 AND [u].[GiftStatus] = N'Purchased'
2025-01-23 16:44:45.963 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDTO.UserGiftDTO, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:45.964 +02:00 [INF] Executed action project.Controllers.UserController.GetGiftBuyers (project) in 30.5618ms
2025-01-23 16:44:45.967 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetGiftBuyers (project)'
2025-01-23 16:44:45.976 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:44:45.978 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - 200 null application/json; charset=utf-8 65.6271ms
2025-01-23 16:44:50.042 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:44:50.048 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:50.051 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 8.7664ms
2025-01-23 16:44:50.057 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:44:50.063 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:50.073 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:44:50.079 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:50.080 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:44:50.089 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:50.090 +02:00 [INF] Fetching all donators.
2025-01-23 16:44:50.099 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:44:50.105 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:44:50.108 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:50.113 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 24.0438ms
2025-01-23 16:44:50.115 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:44:50.117 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:44:50.118 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 60.5073ms
2025-01-23 16:44:51.235 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-23 16:44:51.240 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:51.242 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 7.6236ms
2025-01-23 16:44:51.253 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-23 16:44:51.256 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:51.258 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:44:51.259 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-23 16:44:51.263 +02:00 [INF] Received request to get gifts with purchases.
2025-01-23 16:44:51.264 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:44:51.2646475Z"
2025-01-23 16:44:51.270 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:44:51.2706677Z"
2025-01-23 16:44:51.277 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-23 16:44:51.287 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:44:51.2879214Z"
2025-01-23 16:44:51.289 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:44:51.2897380Z"
2025-01-23 16:44:51.291 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-23 16:44:51.292 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:51.293 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 30.9293ms
2025-01-23 16:44:51.300 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:44:51.302 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 49.0782ms
2025-01-23 16:44:52.389 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - null null
2025-01-23 16:44:52.395 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:52.398 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - 204 null null 8.1273ms
2025-01-23 16:44:52.402 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - application/json null
2025-01-23 16:44:52.405 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:44:52.406 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsBySortAsync (project)'
2025-01-23 16:44:52.407 +02:00 [INF] Route matched with {action = "GetGiftsBySort", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGiftsBySortAsync(System.String, System.String) on controller project.Controllers.GiftController (project).
2025-01-23 16:44:52.410 +02:00 [INF] Received request for GetGiftsBySortAsync with parameters sortBy: Price, order: desc
2025-01-23 16:44:52.411 +02:00 [INF] Starting GetGiftsAsync with sortBy: Price, order: desc at "2025-01-23T14:44:52.4112148Z"
2025-01-23 16:44:52.424 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases], [c].[name] AS [Category]
FROM [Gifts] AS [g]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
ORDER BY [g].[Price] DESC
2025-01-23 16:44:52.433 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:44:52.4338247Z"
2025-01-23 16:44:52.435 +02:00 [INF] Successfully retrieved 6 gifts.
2025-01-23 16:44:52.437 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:44:52.439 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsBySortAsync (project) in 29.5271ms
2025-01-23 16:44:52.441 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsBySortAsync (project)'
2025-01-23 16:44:52.442 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=desc - 200 null application/json; charset=utf-8 39.7133ms
2025-01-23 16:45:02.796 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:45:02.800 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:02.802 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.9984ms
2025-01-23 16:45:02.809 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:45:02.814 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:02.817 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:45:02.823 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:02.825 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:45:02.848 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:02.850 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:02.855 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:45:02.858 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:45:02.859 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:45:02.861 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 12.7555ms
2025-01-23 16:45:02.863 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:02.864 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:45:02.865 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 55.5761ms
2025-01-23 16:45:05.399 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:45:05.403 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:05.405 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:45:05.407 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:05.410 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:45:05.414 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:05.415 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:05.418 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:45:05.421 +02:00 [INF] Successfully fetched 1 donators.
2025-01-23 16:45:05.422 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:45:05.430 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 16.0443ms
2025-01-23 16:45:05.432 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:05.435 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:45:05.437 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 38.6256ms
2025-01-23 16:45:37.930 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:45:37.937 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:37.939 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 8.727ms
2025-01-23 16:45:37.947 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Donator - application/json 63
2025-01-23 16:45:37.949 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:37.950 +02:00 [INF] Incoming Request: POST /api/Donator
2025-01-23 16:45:37.952 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.CreateDonatorAsync (project)'
2025-01-23 16:45:37.959 +02:00 [INF] Route matched with {action = "CreateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-23 16:45:37.971 +02:00 [INF] Received request to create donator: Reuti
2025-01-23 16:45:37.974 +02:00 [INF] Creating donator with name: Reuti
2025-01-23 16:45:37.975 +02:00 [INF] Adding donator with name: Reuti
2025-01-23 16:45:37.989 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Donators] ([Email], [Name], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-23 16:45:37.998 +02:00 [INF] Successfully added donator: Reuti
2025-01-23 16:45:38.002 +02:00 [INF] Donator Reuti created successfully.
2025-01-23 16:45:38.003 +02:00 [INF] Successfully created donator: Reuti
2025-01-23 16:45:38.008 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:45:38.010 +02:00 [INF] Executed action project.Controllers.DonatorController.CreateDonatorAsync (project) in 45.5019ms
2025-01-23 16:45:38.012 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.CreateDonatorAsync (project)'
2025-01-23 16:45:38.013 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:45:38.016 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 69.7544ms
2025-01-23 16:45:38.102 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:45:38.107 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:38.109 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:45:38.110 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:38.111 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:45:38.116 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:38.117 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:38.119 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:45:38.127 +02:00 [INF] Successfully fetched 2 donators.
2025-01-23 16:45:38.130 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:45:38.133 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 16.8605ms
2025-01-23 16:45:38.135 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:38.136 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:45:38.137 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 34.4417ms
2025-01-23 16:45:46.524 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:45:46.527 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:46.529 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.0616ms
2025-01-23 16:45:46.533 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:45:46.536 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:45:46.540 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:45:46.543 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:46.550 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:45:46.563 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:46.566 +02:00 [INF] Fetching all donators.
2025-01-23 16:45:46.570 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:45:46.578 +02:00 [INF] Successfully fetched 2 donators.
2025-01-23 16:45:46.582 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:45:46.586 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 22.9895ms
2025-01-23 16:45:46.590 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:45:46.591 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:45:46.594 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 60.6962ms
2025-01-23 16:46:05.613 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:46:05.618 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:05.620 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.7363ms
2025-01-23 16:46:05.624 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Donator - application/json 62
2025-01-23 16:46:05.627 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:05.630 +02:00 [INF] Incoming Request: POST /api/Donator
2025-01-23 16:46:05.632 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.CreateDonatorAsync (project)'
2025-01-23 16:46:05.633 +02:00 [INF] Route matched with {action = "CreateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:05.637 +02:00 [INF] Received request to create donator: Mally Wallach
2025-01-23 16:46:05.638 +02:00 [INF] Creating donator with name: Mally Wallach
2025-01-23 16:46:05.641 +02:00 [INF] Adding donator with name: Mally Wallach
2025-01-23 16:46:05.646 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Donators] ([Email], [Name], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-23 16:46:05.649 +02:00 [INF] Successfully added donator: Mally Wallach
2025-01-23 16:46:05.650 +02:00 [INF] Donator Mally Wallach created successfully.
2025-01-23 16:46:05.652 +02:00 [INF] Successfully created donator: Mally Wallach
2025-01-23 16:46:05.656 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:46:05.660 +02:00 [INF] Executed action project.Controllers.DonatorController.CreateDonatorAsync (project) in 24.1412ms
2025-01-23 16:46:05.663 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.CreateDonatorAsync (project)'
2025-01-23 16:46:05.664 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:05.665 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 40.3537ms
2025-01-23 16:46:05.754 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:46:05.760 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:05.761 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:46:05.763 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:05.763 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:05.766 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:05.767 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:05.775 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:46:05.786 +02:00 [INF] Successfully fetched 3 donators.
2025-01-23 16:46:05.788 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:05.790 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 23.6715ms
2025-01-23 16:46:05.792 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:05.795 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:05.796 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 41.8216ms
2025-01-23 16:46:11.358 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/3 - null null
2025-01-23 16:46:11.363 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:11.365 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/3 - 204 null null 6.8368ms
2025-01-23 16:46:11.375 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/3 - application/json null
2025-01-23 16:46:11.386 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:11.389 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/3
2025-01-23 16:46:11.395 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:46:11.402 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:11.413 +02:00 [INF] Fetching donator with gifts for ID: 3
2025-01-23 16:46:11.418 +02:00 [INF] Fetching donator with ID: 3
2025-01-23 16:46:11.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-23 16:46:11.433 +02:00 [INF] Fetching gifts for donator ID: 3
2025-01-23 16:46:11.445 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-23 16:46:11.454 +02:00 [WRN] No gifts found for donator ID: 3
2025-01-23 16:46:11.455 +02:00 [INF] Successfully fetched 0 gifts for donator ID: 3
2025-01-23 16:46:11.456 +02:00 [WRN] No gifts found for donator with ID 3.
2025-01-23 16:46:11.458 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType22`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:46:11.468 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 57.503ms
2025-01-23 16:46:11.471 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:46:11.473 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:11.474 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/3 - 200 null application/json; charset=utf-8 99.482ms
2025-01-23 16:46:15.729 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-23 16:46:15.734 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:15.735 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 5.9109ms
2025-01-23 16:46:15.740 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-23 16:46:15.742 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:15.743 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:46:15.745 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-23 16:46:15.757 +02:00 [INF] Received request to get gifts with purchases.
2025-01-23 16:46:15.759 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:46:15.7590903Z"
2025-01-23 16:46:15.760 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:46:15.7600677Z"
2025-01-23 16:46:15.767 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-23 16:46:15.776 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:46:15.7765458Z"
2025-01-23 16:46:15.786 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:46:15.7869553Z"
2025-01-23 16:46:15.790 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-23 16:46:15.792 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:15.794 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 36.649ms
2025-01-23 16:46:15.799 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:46:15.801 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 61.7055ms
2025-01-23 16:46:17.220 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:46:17.224 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:17.228 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.4072ms
2025-01-23 16:46:17.238 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:46:17.240 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:17.243 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:46:17.244 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:17.245 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:17.249 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:17.253 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:17.257 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:46:17.260 +02:00 [INF] Successfully fetched 3 donators.
2025-01-23 16:46:17.261 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:17.263 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 13.9411ms
2025-01-23 16:46:17.268 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:17.270 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:17.273 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 35.793ms
2025-01-23 16:46:20.815 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - null null
2025-01-23 16:46:20.819 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:20.821 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - 204 null null 5.8855ms
2025-01-23 16:46:20.826 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/1 - application/json null
2025-01-23 16:46:20.833 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:20.835 +02:00 [INF] Incoming Request: GET /api/Donator/1
2025-01-23 16:46:20.841 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-23 16:46:20.846 +02:00 [INF] Route matched with {action = "GetById", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByIdAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:20.867 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:46:20.871 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:46:20.876 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-23 16:46:20.887 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Donator'.
2025-01-23 16:46:20.889 +02:00 [INF] Executed action project.Controllers.DonatorController.GetByIdAsync (project) in 28.9535ms
2025-01-23 16:46:20.890 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-23 16:46:20.895 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:20.900 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/1 - 200 null application/json; charset=utf-8 74.038ms
2025-01-23 16:46:22.618 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:46:22.625 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:22.628 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 9.9059ms
2025-01-23 16:46:22.634 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Donator - application/json 76
2025-01-23 16:46:22.641 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:22.642 +02:00 [INF] Incoming Request: PUT /api/Donator
2025-01-23 16:46:22.649 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-23 16:46:22.658 +02:00 [INF] Route matched with {action = "UpdateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:22.671 +02:00 [INF] Updating donator with ID: 1
2025-01-23 16:46:22.674 +02:00 [INF] Updating donator with ID: 1
2025-01-23 16:46:22.685 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Donators] SET [Email] = @p0, [Name] = @p1, [Phone] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-01-23 16:46:22.693 +02:00 [INF] Successfully updated donator with ID: 1
2025-01-23 16:46:22.696 +02:00 [INF] Donator with ID 1 updated successfully.
2025-01-23 16:46:22.705 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-01-23 16:46:22.707 +02:00 [INF] Executed action project.Controllers.DonatorController.UpdateDonatorAsync (project) in 42.9384ms
2025-01-23 16:46:22.709 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-23 16:46:22.711 +02:00 [INF] Outgoing Response: 204
2025-01-23 16:46:22.718 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Donator - 204 null null 84.5285ms
2025-01-23 16:46:23.467 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - null null
2025-01-23 16:46:23.470 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:23.472 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - 204 null null 5.7775ms
2025-01-23 16:46:23.483 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - application/json null
2025-01-23 16:46:23.490 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:23.491 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/1
2025-01-23 16:46:23.500 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:46:23.503 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:23.510 +02:00 [INF] Fetching donator with gifts for ID: 1
2025-01-23 16:46:23.517 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:46:23.522 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-23 16:46:23.533 +02:00 [INF] Fetching gifts for donator ID: 1
2025-01-23 16:46:23.537 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-23 16:46:23.549 +02:00 [INF] Successfully fetched 6 gifts for donator ID: 1
2025-01-23 16:46:23.550 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType22`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:46:23.554 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 44.6225ms
2025-01-23 16:46:23.560 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:46:23.565 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:23.567 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - 200 null application/json; charset=utf-8 84.2473ms
2025-01-23 16:46:33.491 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - null null
2025-01-23 16:46:33.496 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:33.498 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - 204 null null 7.8026ms
2025-01-23 16:46:33.502 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - application/json null
2025-01-23 16:46:33.505 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:33.512 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/1
2025-01-23 16:46:33.514 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:46:33.518 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:33.522 +02:00 [INF] Fetching donator with gifts for ID: 1
2025-01-23 16:46:33.528 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:46:33.532 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-23 16:46:33.535 +02:00 [INF] Fetching gifts for donator ID: 1
2025-01-23 16:46:33.538 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-23 16:46:33.548 +02:00 [INF] Successfully fetched 6 gifts for donator ID: 1
2025-01-23 16:46:33.549 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType22`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:46:33.551 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 29.7369ms
2025-01-23 16:46:33.553 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:46:33.560 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:33.561 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - 200 null application/json; charset=utf-8 59.1728ms
2025-01-23 16:46:37.568 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:46:37.571 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:37.573 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 5.2491ms
2025-01-23 16:46:37.580 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:46:37.588 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:37.589 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:46:37.595 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:46:37.602 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:46:37.6020624Z"
2025-01-23 16:46:37.602 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:46:37.6029065Z"
2025-01-23 16:46:37.603 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:46:37.6038959Z"
2025-01-23 16:46:37.611 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:46:37.621 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:46:37.6219112Z"
2025-01-23 16:46:37.631 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:46:37.6318958Z"
2025-01-23 16:46:37.633 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:46:37.6330032Z"
2025-01-23 16:46:37.637 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:37.641 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 39.9067ms
2025-01-23 16:46:37.645 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:46:37.650 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 70.0642ms
2025-01-23 16:46:39.549 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:46:39.553 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:39.556 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.7324ms
2025-01-23 16:46:39.560 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:46:39.563 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:39.566 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:46:39.567 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:39.573 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:39.576 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:39.577 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:39.580 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:46:39.588 +02:00 [INF] Successfully fetched 3 donators.
2025-01-23 16:46:39.594 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:39.601 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 25.8622ms
2025-01-23 16:46:39.604 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:39.605 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:39.607 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 46.2868ms
2025-01-23 16:46:40.809 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:46:40.814 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:40.815 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:46:40.817 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:40.818 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:40.825 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:40.828 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:40.835 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:46:40.843 +02:00 [INF] Successfully fetched 3 donators.
2025-01-23 16:46:40.850 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:40.857 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 32.2945ms
2025-01-23 16:46:40.864 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:40.865 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:40.870 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 60.5937ms
2025-01-23 16:46:50.661 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:46:50.666 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:50.669 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.5183ms
2025-01-23 16:46:50.673 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:46:50.676 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:46:50.678 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:46:50.680 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:50.686 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:46:50.691 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:50.694 +02:00 [INF] Fetching all donators.
2025-01-23 16:46:50.697 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:46:50.702 +02:00 [INF] Successfully fetched 3 donators.
2025-01-23 16:46:50.704 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:46:50.707 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 15.8133ms
2025-01-23 16:46:50.711 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:46:50.713 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:46:50.716 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 43.5326ms
2025-01-23 16:47:06.212 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:47:06.216 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:06.218 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.6704ms
2025-01-23 16:47:06.222 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:47:06.230 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:06.234 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:47:06.237 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:06.243 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:06.257 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:06.260 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:06.268 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:47:06.282 +02:00 [INF] Successfully fetched 3 donators.
2025-01-23 16:47:06.288 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:47:06.293 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 36.692ms
2025-01-23 16:47:06.298 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:06.305 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:06.307 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 84.5962ms
2025-01-23 16:47:26.790 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:47:26.810 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:26.811 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 20.4898ms
2025-01-23 16:47:26.815 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Donator - application/json 84
2025-01-23 16:47:26.817 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:26.821 +02:00 [INF] Incoming Request: POST /api/Donator
2025-01-23 16:47:26.822 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.CreateDonatorAsync (project)'
2025-01-23 16:47:26.823 +02:00 [INF] Route matched with {action = "CreateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:26.826 +02:00 [INF] Received request to create donator: אמא סלנט
2025-01-23 16:47:26.830 +02:00 [INF] Creating donator with name: אמא סלנט
2025-01-23 16:47:26.832 +02:00 [INF] Adding donator with name: אמא סלנט
2025-01-23 16:47:26.842 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Donators] ([Email], [Name], [Phone])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-23 16:47:26.852 +02:00 [INF] Successfully added donator: אמא סלנט
2025-01-23 16:47:26.855 +02:00 [INF] Donator אמא סלנט created successfully.
2025-01-23 16:47:26.856 +02:00 [INF] Successfully created donator: אמא סלנט
2025-01-23 16:47:26.857 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:47:26.862 +02:00 [INF] Executed action project.Controllers.DonatorController.CreateDonatorAsync (project) in 36.4185ms
2025-01-23 16:47:26.872 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.CreateDonatorAsync (project)'
2025-01-23 16:47:26.881 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:26.882 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 66.9187ms
2025-01-23 16:47:26.971 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:47:26.976 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:26.977 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:47:26.979 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:26.980 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:26.990 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:26.991 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:26.995 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:47:27.003 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:47:27.005 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:47:27.007 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 16.4448ms
2025-01-23 16:47:27.009 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:27.010 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:27.011 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 39.4887ms
2025-01-23 16:47:30.927 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:47:30.933 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:30.934 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:47:30.936 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:30.937 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:30.940 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:30.941 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:30.944 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:47:30.946 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:47:30.947 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:47:30.949 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 8.6377ms
2025-01-23 16:47:30.951 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:30.960 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:30.961 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 33.68ms
2025-01-23 16:47:33.546 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - null null
2025-01-23 16:47:33.552 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:33.554 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - 204 null null 7.6225ms
2025-01-23 16:47:33.558 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/1 - application/json null
2025-01-23 16:47:33.561 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:33.561 +02:00 [INF] Incoming Request: GET /api/Donator/1
2025-01-23 16:47:33.563 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-23 16:47:33.563 +02:00 [INF] Route matched with {action = "GetById", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByIdAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:33.572 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:47:33.579 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:47:33.587 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-23 16:47:33.592 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Donator'.
2025-01-23 16:47:33.594 +02:00 [INF] Executed action project.Controllers.DonatorController.GetByIdAsync (project) in 22.3669ms
2025-01-23 16:47:33.595 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-23 16:47:33.600 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:33.605 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/1 - 200 null application/json; charset=utf-8 46.3933ms
2025-01-23 16:47:39.820 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:47:39.824 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:39.825 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.3643ms
2025-01-23 16:47:39.828 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Donator - application/json 81
2025-01-23 16:47:39.832 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:39.833 +02:00 [INF] Incoming Request: PUT /api/Donator
2025-01-23 16:47:39.835 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-23 16:47:39.836 +02:00 [INF] Route matched with {action = "UpdateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:39.839 +02:00 [INF] Updating donator with ID: 1
2025-01-23 16:47:39.840 +02:00 [INF] Updating donator with ID: 1
2025-01-23 16:47:39.845 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Donators] SET [Email] = @p0, [Name] = @p1, [Phone] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-01-23 16:47:39.852 +02:00 [INF] Successfully updated donator with ID: 1
2025-01-23 16:47:39.853 +02:00 [INF] Donator with ID 1 updated successfully.
2025-01-23 16:47:39.854 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-01-23 16:47:39.855 +02:00 [INF] Executed action project.Controllers.DonatorController.UpdateDonatorAsync (project) in 16.9635ms
2025-01-23 16:47:39.856 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-23 16:47:39.858 +02:00 [INF] Outgoing Response: 204
2025-01-23 16:47:39.861 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Donator - 204 null null 32.8716ms
2025-01-23 16:47:39.951 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:47:39.956 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:39.957 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:47:39.960 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:39.962 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:39.967 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:39.970 +02:00 [INF] Fetching all donators.
2025-01-23 16:47:39.974 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:47:39.986 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:47:39.995 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:47:40.005 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 38.1865ms
2025-01-23 16:47:40.011 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:47:40.012 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:40.013 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 61.9899ms
2025-01-23 16:47:41.930 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - null null
2025-01-23 16:47:41.935 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:41.937 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - 204 null null 7.017ms
2025-01-23 16:47:41.943 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - application/json null
2025-01-23 16:47:41.948 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:47:41.951 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/1
2025-01-23 16:47:41.952 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:47:41.957 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-23 16:47:41.965 +02:00 [INF] Fetching donator with gifts for ID: 1
2025-01-23 16:47:41.967 +02:00 [INF] Fetching donator with ID: 1
2025-01-23 16:47:41.969 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-23 16:47:41.979 +02:00 [INF] Fetching gifts for donator ID: 1
2025-01-23 16:47:41.987 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-23 16:47:41.997 +02:00 [INF] Successfully fetched 6 gifts for donator ID: 1
2025-01-23 16:47:42.001 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType22`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:47:42.007 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 42.4036ms
2025-01-23 16:47:42.009 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-23 16:47:42.011 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:47:42.012 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - 200 null application/json; charset=utf-8 69.8027ms
2025-01-23 16:48:03.091 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-23 16:48:03.100 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:48:03.101 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-23 16:48:03.105 +02:00 [INF] Starting GetGiftsAsync at "2025-01-23T14:48:03.1051253Z"
2025-01-23 16:48:03.107 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-23 16:48:03.110 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:48:03.1108216Z"
2025-01-23 16:48:03.111 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:48:03.1117493Z"
2025-01-23 16:48:03.112 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:48:03.1128381Z"
2025-01-23 16:48:03.113 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:03.119 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 14.5006ms
2025-01-23 16:48:03.126 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-23 16:48:03.128 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 36.5484ms
2025-01-23 16:48:16.190 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=asc - null null
2025-01-23 16:48:16.196 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:16.197 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=asc - 204 null null 6.917ms
2025-01-23 16:48:16.201 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=asc - application/json null
2025-01-23 16:48:16.204 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:16.205 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsBySortAsync (project)'
2025-01-23 16:48:16.206 +02:00 [INF] Route matched with {action = "GetGiftsBySort", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGiftsBySortAsync(System.String, System.String) on controller project.Controllers.GiftController (project).
2025-01-23 16:48:16.209 +02:00 [INF] Received request for GetGiftsBySortAsync with parameters sortBy: Price, order: asc
2025-01-23 16:48:16.210 +02:00 [INF] Starting GetGiftsAsync with sortBy: Price, order: asc at "2025-01-23T14:48:16.2105997Z"
2025-01-23 16:48:16.229 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases], [c].[name] AS [Category]
FROM [Gifts] AS [g]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
ORDER BY [g].[Price]
2025-01-23 16:48:16.235 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-23T14:48:16.2353230Z"
2025-01-23 16:48:16.236 +02:00 [INF] Successfully retrieved 6 gifts.
2025-01-23 16:48:16.238 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:16.240 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsBySortAsync (project) in 30.6711ms
2025-01-23 16:48:16.241 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsBySortAsync (project)'
2025-01-23 16:48:16.243 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=Price&order=asc - 200 null application/json; charset=utf-8 41.489ms
2025-01-23 16:48:20.627 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:48:20.631 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:20.634 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.7005ms
2025-01-23 16:48:20.640 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:48:20.650 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:20.652 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:48:20.653 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:20.654 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:48:20.657 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:20.658 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:20.663 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:48:20.666 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:48:20.668 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:20.669 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 12.434ms
2025-01-23 16:48:20.671 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:20.672 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:48:20.674 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 33.3467ms
2025-01-23 16:48:22.570 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:48:22.575 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:22.576 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:48:22.577 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:22.579 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:48:22.583 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:22.584 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:22.590 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:48:22.593 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:48:22.594 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:22.596 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 13.6495ms
2025-01-23 16:48:22.600 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:22.606 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:48:22.607 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 37.5255ms
2025-01-23 16:48:25.292 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:48:25.297 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:25.300 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 8.2319ms
2025-01-23 16:48:25.305 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:48:25.308 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:25.318 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:48:25.321 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:48:25.324 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:25.3245910Z"
2025-01-23 16:48:25.325 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:25.3255437Z"
2025-01-23 16:48:25.326 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:25.3265525Z"
2025-01-23 16:48:25.335 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:48:25.343 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:25.3430486Z"
2025-01-23 16:48:25.350 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:25.3500814Z"
2025-01-23 16:48:25.351 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:25.3514996Z"
2025-01-23 16:48:25.352 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:25.354 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 29.8267ms
2025-01-23 16:48:25.356 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:48:25.357 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 52.1808ms
2025-01-23 16:48:30.156 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-23 16:48:30.164 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:30.167 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 10.5383ms
2025-01-23 16:48:30.172 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-23 16:48:30.174 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:30.178 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-23 16:48:30.180 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-23 16:48:30.183 +02:00 [INF] Starting LotteryAsync for Gift ID 5 at "2025-01-23T14:48:30.1830956Z"
2025-01-23 16:48:30.186 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 5 at "2025-01-23T14:48:30.1863708Z"
2025-01-23 16:48:30.187 +02:00 [INF] Fetching Gift with participants for Gift ID 5 at "2025-01-23T14:48:30.1876043Z"
2025-01-23 16:48:30.199 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-23 16:48:30.214 +02:00 [WRN] No participants found for Gift ID 5 at "2025-01-23T14:48:30.2140778Z"
2025-01-23 16:48:30.246 +02:00 [ERR] Error occurred in LotteryAsync Service for Gift ID 5 at "2025-01-23T14:48:30.2463943Z"
System.ApplicationException: No participants found for this gift.
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 239
2025-01-23 16:48:30.302 +02:00 [ERR] Error occurred in LotteryAsync for Gift ID 5 at "2025-01-23T14:48:30.3027845Z"
System.Net.Http.HttpRequestException: An error occurred during the lottery process.
 ---> System.ApplicationException: No participants found for this gift.
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 239
   --- End of inner exception stack trace ---
   at project.Services.GiftService.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Services\GiftService.cs:line 272
   at project.Controllers.GiftController.LotteryAsync(Int32 giftId) in D:\פרויקט סופי\server\project\Controllers\GiftController.cs:line 229
2025-01-23 16:48:30.310 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-23 16:48:30.313 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 130.3897ms
2025-01-23 16:48:30.315 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-23 16:48:30.316 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 500 null application/json; charset=utf-8 144.021ms
2025-01-23 16:48:35.306 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-23 16:48:35.310 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:35.312 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.285ms
2025-01-23 16:48:35.321 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-23 16:48:35.326 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:35.332 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:48:35.334 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-23 16:48:35.343 +02:00 [INF] Received request to get gifts with purchases.
2025-01-23 16:48:35.344 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:48:35.3443373Z"
2025-01-23 16:48:35.347 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:48:35.3470354Z"
2025-01-23 16:48:35.353 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-23 16:48:35.360 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:48:35.3603209Z"
2025-01-23 16:48:35.362 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:48:35.3621013Z"
2025-01-23 16:48:35.363 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-23 16:48:35.364 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:35.368 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 25.5158ms
2025-01-23 16:48:35.370 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:48:35.373 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 51.4037ms
2025-01-23 16:48:36.768 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-23 16:48:36.773 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:36.775 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 7.1052ms
2025-01-23 16:48:36.783 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:48:36.791 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:36.798 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:48:36.800 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:48:36.805 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:36.8051995Z"
2025-01-23 16:48:36.807 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:36.8071977Z"
2025-01-23 16:48:36.813 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:36.8137638Z"
2025-01-23 16:48:36.819 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:48:36.829 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:36.8290329Z"
2025-01-23 16:48:36.831 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:36.8311115Z"
2025-01-23 16:48:36.832 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:36.8321576Z"
2025-01-23 16:48:36.833 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:36.838 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 33.148ms
2025-01-23 16:48:36.845 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:48:36.846 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 63.0044ms
2025-01-23 16:48:37.690 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:48:37.694 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:37.696 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.2134ms
2025-01-23 16:48:37.702 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:48:37.705 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:37.706 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:48:37.707 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:37.712 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:48:37.718 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:37.719 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:37.722 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:48:37.733 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:48:37.735 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:37.736 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 18.5124ms
2025-01-23 16:48:37.738 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:37.742 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:48:37.743 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 40.7551ms
2025-01-23 16:48:39.563 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-23 16:48:39.569 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:39.571 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:48:39.573 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-23 16:48:39.578 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:39.5787018Z"
2025-01-23 16:48:39.579 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:39.5797803Z"
2025-01-23 16:48:39.580 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-23T14:48:39.5809562Z"
2025-01-23 16:48:39.596 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-23 16:48:39.607 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:39.6073446Z"
2025-01-23 16:48:39.611 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:39.6110987Z"
2025-01-23 16:48:39.612 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-23T14:48:39.6125584Z"
2025-01-23 16:48:39.615 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:39.619 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 40.9706ms
2025-01-23 16:48:39.621 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-23 16:48:39.623 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 60.3477ms
2025-01-23 16:48:40.893 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/revenue - null null
2025-01-23 16:48:40.898 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:40.899 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/revenue - 204 null null 6.406ms
2025-01-23 16:48:40.903 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/revenue - application/json null
2025-01-23 16:48:40.908 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:40.910 +02:00 [INF] Incoming Request: GET /api/Report/excel/revenue
2025-01-23 16:48:40.914 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportRevenueToExcel (project)'
2025-01-23 16:48:40.918 +02:00 [INF] Route matched with {action = "ExportRevenueToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportRevenueToExcel() on controller project.Controllers.ReportController (project).
2025-01-23 16:48:40.929 +02:00 [INF] Calculating gift revenues.
2025-01-23 16:48:40.972 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT (
    SELECT TOP(1) [g0].[Name]
    FROM [Gifts] AS [g0]
    INNER JOIN (
        SELECT [u2].[GiftId]
        FROM [UserGifts] AS [u2]
        WHERE [u2].[GiftStatus] = N'Purchased'
    ) AS [u1] ON [g0].[Id] = [u1].[GiftId]
    WHERE [g].[Id] = [g0].[Id]) AS [GiftName], CAST(COALESCE(SUM([u0].[Quantity] * [g].[Price]), 0) AS decimal(18,2)) AS [Revenue]
FROM [Gifts] AS [g]
INNER JOIN (
    SELECT [u].[GiftId], [u].[Quantity]
    FROM [UserGifts] AS [u]
    WHERE [u].[GiftStatus] = N'Purchased'
) AS [u0] ON [g].[Id] = [u0].[GiftId]
GROUP BY [g].[Id]
2025-01-23 16:48:40.979 +02:00 [INF] Total revenue calculated: 0.
2025-01-23 16:48:41.736 +02:00 [INF] Executing FileContentResult, sending file with download name 'RevenueReport.xlsx' ...
2025-01-23 16:48:41.739 +02:00 [INF] Executed action project.Controllers.ReportController.ExportRevenueToExcel (project) in 813.8931ms
2025-01-23 16:48:41.741 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportRevenueToExcel (project)'
2025-01-23 16:48:41.743 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:48:41.745 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/revenue - 200 2795 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 842.1072ms
2025-01-23 16:48:57.043 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-23 16:48:57.045 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-23 16:48:57.053 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:57.056 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:57.058 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 14.8288ms
2025-01-23 16:48:57.060 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:48:57.066 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-23 16:48:57.067 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-23 16:48:57.074 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:57.096 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-23 16:48:57.097 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-23 16:48:57.108 +02:00 [INF] Successfully retrieved categories.
2025-01-23 16:48:57.113 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:57.117 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:57.127 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-23 16:48:57.131 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 39.6901ms
2025-01-23 16:48:57.145 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:57.150 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-23 16:48:57.156 +02:00 [INF] Fetching all donators.
2025-01-23 16:48:57.160 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 115.9276ms
2025-01-23 16:48:57.169 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-23 16:48:57.188 +02:00 [INF] Successfully fetched 4 donators.
2025-01-23 16:48:57.194 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:48:57.200 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 55.9402ms
2025-01-23 16:48:57.204 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-23 16:48:57.211 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:48:57.230 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 163.6553ms
2025-01-23 16:48:59.684 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - null null
2025-01-23 16:48:59.689 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:59.690 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - 204 null null 5.2755ms
2025-01-23 16:48:59.693 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - application/json null
2025-01-23 16:48:59.695 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:48:59.696 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-23 16:48:59.697 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-23 16:48:59.699 +02:00 [INF] Route matched with {action = "ExportWinnersToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportWinnersToExcel() on controller project.Controllers.ReportController (project).
2025-01-23 16:48:59.703 +02:00 [INF] Starting to fetch winners with their gifts.
2025-01-23 16:48:59.711 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image], [w].[Id], [w].[Date], [w].[LinkedUserId], [w].[Name], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Gifts] AS [g]
LEFT JOIN [Winnings] AS [w] ON [g].[WinningId] = [w].[Id]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'User'
) AS [a0] ON [w].[LinkedUserId] = [a0].[Id]
WHERE [g].[WinningId] IS NOT NULL
2025-01-23 16:48:59.720 +02:00 [WRN] No winners found with associated gifts.
2025-01-23 16:48:59.727 +02:00 [INF] Executing FileContentResult, sending file with download name 'WinnersReport.xlsx' ...
2025-01-23 16:48:59.730 +02:00 [INF] Executed action project.Controllers.ReportController.ExportWinnersToExcel (project) in 28.7004ms
2025-01-23 16:48:59.735 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-23 16:48:59.739 +02:00 [INF] Outgoing Response: 200
2025-01-23 16:48:59.741 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 200 2655 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 48.4109ms
2025-01-23 16:50:08.277 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-23 16:50:08.283 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:50:08.284 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.9667ms
2025-01-23 16:50:08.295 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-23 16:50:08.299 +02:00 [INF] CORS policy execution successful.
2025-01-23 16:50:08.300 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:50:08.306 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-23 16:50:08.311 +02:00 [INF] Received request to get gifts with purchases.
2025-01-23 16:50:08.315 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:50:08.3149953Z"
2025-01-23 16:50:08.316 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-23T14:50:08.3162811Z"
2025-01-23 16:50:08.325 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-23 16:50:08.333 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:50:08.3338293Z"
2025-01-23 16:50:08.335 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-23T14:50:08.3351938Z"
2025-01-23 16:50:08.336 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-23 16:50:08.338 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-23 16:50:08.340 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 29.3899ms
2025-01-23 16:50:08.342 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-23 16:50:08.346 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 51.6619ms
