2025-01-20 16:30:07.083 +02:00 [INF] Starting up the application
2025-01-20 16:30:11.019 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 16:30:13.891 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 16:30:14.053 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 16:30:14.525 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 16:30:14.590 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 16:30:14.593 +02:00 [INF] Hosting environment: Development
2025-01-20 16:30:14.595 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 16:30:15.459 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 16:30:15.858 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 408.06ms
2025-01-20 16:30:15.881 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 16:30:15.897 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 16.5095ms
2025-01-20 16:30:16.729 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 16:30:17.008 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 278.1296ms
2025-01-20 16:34:34.181 +02:00 [INF] Starting up the application
2025-01-20 16:34:37.596 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 16:34:39.922 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 16:34:40.089 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 16:34:40.500 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 16:34:40.506 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 16:34:40.508 +02:00 [INF] Hosting environment: Development
2025-01-20 16:34:40.509 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 16:34:41.354 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 16:34:41.763 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 420.3202ms
2025-01-20 16:34:41.785 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 16:34:41.795 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.756ms
2025-01-20 16:34:41.971 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 16:34:42.313 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 341.7764ms
2025-01-20 16:36:39.579 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 16:36:39.611 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 16:36:39.909 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 14:18:13', Current time (UTC): '20/01/2025 14:36:39'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 16:36:39.960 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 14:18:13', Current time (UTC): '20/01/2025 14:36:39'.
2025-01-20 16:36:39.969 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 16:36:40.007 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 16:36:40.386 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 16:36:40.396 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T14:36:40.3955221Z"
2025-01-20 16:36:40.401 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T14:36:40.4016899Z"
2025-01-20 16:36:40.406 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T14:36:40.4059162Z"
2025-01-20 16:36:40.509 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 16:36:40.590 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T14:36:40.5901732Z"
2025-01-20 16:36:40.592 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T14:36:40.5920094Z"
2025-01-20 16:36:40.593 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T14:36:40.5939770Z"
2025-01-20 16:36:40.603 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 209.2138ms.
2025-01-20 16:36:40.618 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 16:36:40.694 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 676.5766ms
2025-01-20 16:36:40.697 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 16:36:40.706 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 1127.6448ms
2025-01-20 17:46:12.122 +02:00 [INF] Starting up the application
2025-01-20 17:46:16.103 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 17:46:18.898 +02:00 [INF] Executed DbCommand (103ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 17:46:19.057 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:46:19.494 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 17:46:19.500 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 17:46:19.503 +02:00 [INF] Hosting environment: Development
2025-01-20 17:46:19.504 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 17:46:21.144 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 17:46:21.625 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 488.6297ms
2025-01-20 17:46:21.659 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 17:46:21.678 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 19.1405ms
2025-01-20 17:46:21.916 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 17:46:22.265 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 348.8324ms
2025-01-20 17:47:10.778 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 112
2025-01-20 17:47:10.789 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:47:10.792 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:47:10.796 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 17:47:11.011 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:47:11.056 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 17:47:11.323 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 17:47:11.599 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:47:11.640 +02:00 [ERR] Registration failed: Username 'sari' is already taken.
2025-01-20 17:47:11.826 +02:00 [ERR] Error during registration for user sari.
System.Exception: Registration failed: Username 'sari' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 17:47:12.115 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'sari' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 17:47:12.127 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 797.0818ms.
2025-01-20 17:47:12.145 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 17:47:12.159 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 1090.4352ms
2025-01-20 17:47:12.161 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:47:12.171 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 1392.5255ms
2025-01-20 17:47:28.748 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 113
2025-01-20 17:47:28.755 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:47:28.756 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:47:28.764 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:47:28.767 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 17:47:28.815 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 17:47:28.981 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:47:29.201 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 17:47:29.244 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:47:29.295 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 17:47:29.301 +02:00 [INF] User registered successfully: sari1
2025-01-20 17:47:29.302 +02:00 [INF] User registered successfully.
2025-01-20 17:47:29.304 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 486.5115ms.
2025-01-20 17:47:29.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 17:47:29.309 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 537.3259ms
2025-01-20 17:47:29.311 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:47:29.313 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 564.786ms
2025-01-20 17:48:10.051 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 57
2025-01-20 17:48:10.071 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:48:10.072 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:48:10.077 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:48:10.086 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 17:48:10.139 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 17:48:10.173 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 17:48:10.294 +02:00 [ERR] Error during login for user sari@gmail.com.
System.InvalidOperationException: Sequence contains more than one element.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at project.Services.AuthService.LoginAsync(Login model) in E:\פרויקט\server\project\Services\AuthService.cs:line 75
2025-01-20 17:48:10.304 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 162.7297ms.
2025-01-20 17:48:10.310 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 17:48:10.312 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 221.4111ms
2025-01-20 17:48:10.314 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:48:10.317 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 500 null text/plain; charset=utf-8 266.0693ms
2025-01-20 17:48:50.552 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 57
2025-01-20 17:48:50.572 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:48:50.574 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:48:50.576 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:48:50.580 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 17:48:50.623 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 17:48:50.630 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 17:48:50.704 +02:00 [ERR] Error during login for user sari@gmail.com.
System.InvalidOperationException: Sequence contains more than one element.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at project.Services.AuthService.LoginAsync(Login model) in E:\פרויקט\server\project\Services\AuthService.cs:line 75
2025-01-20 17:48:50.712 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 86.8871ms.
2025-01-20 17:48:50.714 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 17:48:50.720 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 129.1756ms
2025-01-20 17:48:50.724 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:48:50.726 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 500 null text/plain; charset=utf-8 173.7029ms
2025-01-20 17:49:12.804 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 57
2025-01-20 17:49:12.813 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:49:12.815 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:49:12.817 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:49:12.819 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 17:49:12.857 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 17:49:12.867 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 17:49:12.958 +02:00 [ERR] Error during login for user sari@gmail.com.
System.InvalidOperationException: Sequence contains more than one element.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at project.Services.AuthService.LoginAsync(Login model) in E:\פרויקט\server\project\Services\AuthService.cs:line 75
2025-01-20 17:49:12.970 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 110.7983ms.
2025-01-20 17:49:12.973 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 17:49:12.975 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 149.7597ms
2025-01-20 17:49:12.980 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:49:12.982 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 500 null text/plain; charset=utf-8 178.9802ms
2025-01-20 17:50:33.553 +02:00 [INF] Starting up the application
2025-01-20 17:50:36.803 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 17:50:39.267 +02:00 [INF] Executed DbCommand (129ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 17:50:39.428 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:50:39.842 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 17:50:39.848 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 17:50:39.851 +02:00 [INF] Hosting environment: Development
2025-01-20 17:50:39.852 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 17:50:40.965 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 17:50:41.216 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 255.3322ms
2025-01-20 17:50:41.235 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 17:50:41.242 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 7.369ms
2025-01-20 17:50:41.435 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 17:50:41.747 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 311.6783ms
2025-01-20 17:51:33.313 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 112
2025-01-20 17:51:33.323 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:51:33.325 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:51:33.328 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 17:51:33.502 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:51:33.541 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 17:51:33.791 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 17:51:34.073 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:51:34.297 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 17:51:34.324 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:51:34.363 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 17:51:34.370 +02:00 [INF] User registered successfully: miri
2025-01-20 17:51:34.372 +02:00 [INF] User registered successfully.
2025-01-20 17:51:34.379 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 580.1466ms.
2025-01-20 17:51:34.395 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 17:51:34.406 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 855.6595ms
2025-01-20 17:51:34.410 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:51:34.420 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 1107.6158ms
2025-01-20 17:52:16.343 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 57
2025-01-20 17:52:16.386 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:52:16.387 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:52:16.393 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:52:16.408 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 17:52:16.460 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 17:52:16.508 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 17:52:16.741 +02:00 [INF] User miri@gmail.com logged in successfully.
2025-01-20 17:52:16.743 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 280.2883ms.
2025-01-20 17:52:16.747 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 17:52:16.773 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 357.3846ms
2025-01-20 17:52:16.776 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 17:52:16.779 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 435.9766ms
2025-01-20 17:53:34.022 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 115
2025-01-20 17:53:34.034 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:53:34.036 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:53:34.042 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:53:34.044 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 17:53:34.106 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 17:53:34.253 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:53:34.265 +02:00 [ERR] Registration failed: Username 'miri' is already taken.
2025-01-20 17:53:34.465 +02:00 [ERR] Error during registration for user miri.
System.Exception: Registration failed: Username 'miri' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 17:53:34.748 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'miri' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 17:53:34.755 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 645.874ms.
2025-01-20 17:53:34.757 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 17:53:34.759 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 709.856ms
2025-01-20 17:53:34.761 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:53:34.766 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 743.8475ms
2025-01-20 17:53:46.684 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 117
2025-01-20 17:53:46.689 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:53:46.690 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:53:46.709 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:53:46.711 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 17:53:46.745 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 17:53:46.902 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 17:53:46.909 +02:00 [ERR] Registration failed: Username 'miri' is already taken.
2025-01-20 17:53:46.996 +02:00 [ERR] Error during registration for user miri.
System.Exception: Registration failed: Username 'miri' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 17:53:47.164 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'miri' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 17:53:47.170 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 421.9852ms.
2025-01-20 17:53:47.173 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 17:53:47.175 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 457.4219ms
2025-01-20 17:53:47.177 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 17:53:47.182 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 497.491ms
2025-01-20 17:54:42.878 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - null 0
2025-01-20 17:54:42.888 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:54:42.889 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:54:42.892 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 17:54:43.037 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 17:54:43.048 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 17:54:43.099 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 17:54:43.106 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 17:54:43.109 +02:00 [INF] Received request to fetch user by token.
2025-01-20 17:54:43.110 +02:00 [INF] Parsing token...
2025-01-20 17:54:43.115 +02:00 [INF] Attempting to retrieve user with username: miri and email: miri@gmail.com
2025-01-20 17:54:43.171 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 17:54:43.179 +02:00 [INF] User successfully found: miri
2025-01-20 17:54:43.190 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T15:54:43.1903151Z"
2025-01-20 17:54:43.210 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 17:54:43.275 +02:00 [INF] Adding Gift 3 to User be8b444f-2c3b-4efa-9770-72d6387507a0's basket in database
2025-01-20 17:54:43.297 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 17:54:43.364 +02:00 [INF] Created new UserGift entry for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:54:43.446 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 17:54:43.454 +02:00 [INF] Saved changes to database for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:54:43.457 +02:00 [INF] Completed AddToBasketAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0 and GiftId: 3
2025-01-20 17:54:43.460 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 358.1128ms.
2025-01-20 17:54:43.469 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 413.0169ms
2025-01-20 17:54:43.472 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 17:54:43.476 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:54:43.480 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - 200 0 null 601.3794ms
2025-01-20 17:54:51.972 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 17:54:51.977 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 17:54:51.987 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 17:54:51.995 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 17:54:52.055 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 17:54:52.068 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 17:54:52.075 +02:00 [INF] Received request to get basket for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:54:52.082 +02:00 [INF] Starting to fetch basket for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:54:52.209 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 17:54:52.222 +02:00 [INF] Successfully fetched 1 gifts for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:54:52.256 +02:00 [INF] Serialized response: [
  {
    "UserId": "be8b444f-2c3b-4efa-9770-72d6387507a0",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 1
  }
]
2025-01-20 17:54:52.259 +02:00 [INF] Completed GetBasketByUserAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:54:52.263 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 197.7352ms.
2025-01-20 17:54:52.268 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 17:54:52.279 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 276.1329ms
2025-01-20 17:54:52.284 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 17:54:52.287 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:54:52.289 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 317.0705ms
2025-01-20 17:55:08.167 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 17:55:08.171 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:55:08.173 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:55:08.175 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 17:55:08.181 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 17:55:08.188 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 17:55:08.238 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 17:55:08.243 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 17:55:08.247 +02:00 [INF] Removing Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket
2025-01-20 17:55:08.252 +02:00 [INF] Removing Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 in database
2025-01-20 17:55:08.267 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 17:55:08.325 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserGifts]
OUTPUT 1
WHERE [GiftId] = @p0 AND [UserId] = @p1;
2025-01-20 17:55:08.339 +02:00 [INF] Removed Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 successfully
2025-01-20 17:55:08.346 +02:00 [INF] Removed Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket successfully
2025-01-20 17:55:08.350 +02:00 [INF] Completed RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 17:55:08.351 +02:00 [INF] Executed action method project.Controllers.UserController.RemoveGiftFromUserAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 110.027ms.
2025-01-20 17:55:08.354 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 161.9221ms
2025-01-20 17:55:08.358 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 17:55:08.360 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:55:08.364 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - 200 0 null 197.2089ms
2025-01-20 17:55:13.636 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - null 0
2025-01-20 17:55:13.640 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:55:13.642 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:55:13.645 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 17:55:13.648 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 17:55:13.650 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 17:55:13.691 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 17:55:13.695 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 17:55:13.698 +02:00 [INF] Received request to fetch user by token.
2025-01-20 17:55:13.700 +02:00 [INF] Parsing token...
2025-01-20 17:55:13.702 +02:00 [INF] Attempting to retrieve user with username: miri and email: miri@gmail.com
2025-01-20 17:55:13.713 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 17:55:13.723 +02:00 [INF] User successfully found: miri
2025-01-20 17:55:13.725 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T15:55:13.7252254Z"
2025-01-20 17:55:13.731 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 17:55:13.738 +02:00 [INF] Adding Gift 3 to User be8b444f-2c3b-4efa-9770-72d6387507a0's basket in database
2025-01-20 17:55:13.744 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 17:55:13.756 +02:00 [INF] Created new UserGift entry for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:13.773 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 17:55:13.784 +02:00 [INF] Saved changes to database for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:13.788 +02:00 [INF] Completed AddToBasketAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0 and GiftId: 3
2025-01-20 17:55:13.791 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 95.9339ms.
2025-01-20 17:55:13.794 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 139.9273ms
2025-01-20 17:55:13.800 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 17:55:13.803 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:55:13.805 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - 200 0 null 168.0958ms
2025-01-20 17:55:19.896 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - null 0
2025-01-20 17:55:19.901 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:55:19.916 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:55:19.925 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 17:55:19.938 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 17:55:19.946 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 17:55:19.984 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 17:55:19.988 +02:00 [INF] Starting ConfirmPurchaseAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:19.989 +02:00 [INF] Confirming purchase for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:19.992 +02:00 [INF] Fetching UserGifts for User be8b444f-2c3b-4efa-9770-72d6387507a0 to confirm purchase
2025-01-20 17:55:20.019 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 17:55:20.027 +02:00 [INF] Updated Gift 3 to Purchased for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:20.040 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [GiftStatus] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 17:55:20.049 +02:00 [INF] Purchase confirmed for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:20.051 +02:00 [INF] Purchase confirmed for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:20.053 +02:00 [INF] Completed ConfirmPurchaseAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:20.054 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 67.5743ms.
2025-01-20 17:55:20.057 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 104.4822ms
2025-01-20 17:55:20.059 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 17:55:20.060 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:55:20.065 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 168.6457ms
2025-01-20 17:55:26.625 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 17:55:26.629 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 17:55:26.631 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 17:55:26.633 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 17:55:26.674 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 17:55:26.678 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 17:55:26.680 +02:00 [INF] Received request to get basket for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:26.682 +02:00 [INF] Starting to fetch basket for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:26.689 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 17:55:26.698 +02:00 [INF] Successfully fetched 1 gifts for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:26.701 +02:00 [INF] Serialized response: [
  {
    "UserId": "be8b444f-2c3b-4efa-9770-72d6387507a0",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Purchased",
    "Quantity": 1
  }
]
2025-01-20 17:55:26.703 +02:00 [INF] Completed GetBasketByUserAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:26.705 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 27.05ms.
2025-01-20 17:55:26.708 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 17:55:26.711 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 70.8012ms
2025-01-20 17:55:26.718 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 17:55:26.720 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:55:26.722 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 96.6322ms
2025-01-20 17:55:33.021 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 17:55:33.025 +02:00 [INF] CORS policy execution failed.
2025-01-20 17:55:33.027 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 17:55:33.030 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 17:55:33.032 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 17:55:33.034 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 17:55:33.088 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 17:55:33.091 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 17:55:33.092 +02:00 [INF] Removing Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket
2025-01-20 17:55:33.095 +02:00 [INF] Removing Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 in database
2025-01-20 17:55:33.102 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 17:55:33.114 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserGifts]
OUTPUT 1
WHERE [GiftId] = @p0 AND [UserId] = @p1;
2025-01-20 17:55:33.120 +02:00 [INF] Removed Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 successfully
2025-01-20 17:55:33.122 +02:00 [INF] Removed Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket successfully
2025-01-20 17:55:33.124 +02:00 [INF] Completed RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 17:55:33.126 +02:00 [INF] Executed action method project.Controllers.UserController.RemoveGiftFromUserAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 35.3027ms.
2025-01-20 17:55:33.133 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 94.0476ms
2025-01-20 17:55:33.135 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 17:55:33.137 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:55:33.139 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - 200 0 null 117.9287ms
2025-01-20 17:55:41.636 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 17:55:41.640 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 17:55:41.642 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 17:55:41.645 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 17:55:41.685 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 17:55:41.689 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 17:55:41.690 +02:00 [INF] Received request to get basket for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:41.692 +02:00 [INF] Starting to fetch basket for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:41.702 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 17:55:41.707 +02:00 [WRN] No gifts found for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:41.709 +02:00 [INF] No gifts found for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:41.716 +02:00 [INF] Completed GetBasketByUserAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 17:55:41.719 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.7157ms.
2025-01-20 17:55:41.723 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 17:55:41.736 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 86.5429ms
2025-01-20 17:55:41.739 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 17:55:41.741 +02:00 [INF] Outgoing Response: 200
2025-01-20 17:55:41.743 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 106.7686ms
2025-01-20 18:05:26.907 +02:00 [INF] Starting up the application
2025-01-20 18:05:30.607 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 18:05:32.985 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 18:05:33.147 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:05:33.536 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 18:05:33.549 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 18:05:33.553 +02:00 [INF] Hosting environment: Development
2025-01-20 18:05:33.557 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 18:05:34.548 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 18:05:34.987 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 446.4796ms
2025-01-20 18:05:35.007 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 18:05:35.016 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 8.5968ms
2025-01-20 18:05:35.210 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 18:05:35.542 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 331.8761ms
2025-01-20 18:06:19.053 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:06:19.074 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 18:06:19.175 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:06:19.535 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:06:19.606 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:06:19.947 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:06:19.954 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:06:19.964 +02:00 [INF] Received request to get basket for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:19.970 +02:00 [INF] Starting to fetch basket for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:20.279 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:06:20.289 +02:00 [WRN] No gifts found for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:20.292 +02:00 [INF] No gifts found for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:20.294 +02:00 [INF] Completed GetBasketByUserAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:20.309 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 350.7723ms.
2025-01-20 18:06:20.334 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:06:20.430 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 806.0685ms
2025-01-20 18:06:20.434 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:06:20.440 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:06:20.452 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 1399.1158ms
2025-01-20 18:06:30.579 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - null 0
2025-01-20 18:06:30.585 +02:00 [INF] CORS policy execution failed.
2025-01-20 18:06:30.587 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 18:06:30.593 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:06:30.598 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:06:30.620 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:06:30.706 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:06:30.715 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 18:06:30.720 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:06:30.723 +02:00 [INF] Parsing token...
2025-01-20 18:06:30.726 +02:00 [INF] Attempting to retrieve user with username: miri and email: miri@gmail.com
2025-01-20 18:06:30.797 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:06:30.826 +02:00 [INF] User successfully found: miri
2025-01-20 18:06:30.835 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:06:30.8356150Z"
2025-01-20 18:06:30.853 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:06:30.917 +02:00 [INF] Adding Gift 3 to User be8b444f-2c3b-4efa-9770-72d6387507a0's basket in database
2025-01-20 18:06:30.932 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:06:31.011 +02:00 [INF] Created new UserGift entry for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:31.266 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 18:06:31.289 +02:00 [INF] Saved changes to database for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:06:31.291 +02:00 [INF] Completed AddToBasketAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0 and GiftId: 3
2025-01-20 18:06:31.295 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 585.9021ms.
2025-01-20 18:06:31.300 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 674.7319ms
2025-01-20 18:06:31.302 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:06:31.305 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:06:31.308 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - 200 0 null 729.5158ms
2025-01-20 18:07:55.172 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:07:55.196 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:07:55.206 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:07:55.209 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:07:55.255 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:07:55.259 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:07:55.261 +02:00 [INF] Received request to get basket for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:07:55.264 +02:00 [INF] Starting to fetch basket for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:07:55.282 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:07:55.302 +02:00 [INF] Successfully fetched 1 gifts for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:07:55.331 +02:00 [INF] Serialized response: [
  {
    "UserId": "be8b444f-2c3b-4efa-9770-72d6387507a0",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 1
  }
]
2025-01-20 18:07:55.334 +02:00 [INF] Completed GetBasketByUserAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:07:55.338 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 79.5244ms.
2025-01-20 18:07:55.347 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:07:55.360 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 147.0603ms
2025-01-20 18:07:55.363 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:07:55.366 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:07:55.369 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 196.9971ms
2025-01-20 18:08:10.460 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 18:08:10.465 +02:00 [INF] CORS policy execution failed.
2025-01-20 18:08:10.467 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 18:08:10.469 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 18:08:10.474 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 18:08:10.480 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:08:10.517 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 18:08:10.523 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 18:08:10.526 +02:00 [INF] Removing Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket
2025-01-20 18:08:10.530 +02:00 [INF] Removing Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 in database
2025-01-20 18:08:10.544 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 18:08:10.605 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGifts] AS [u]
        WHERE [u].[GiftId] = @__giftId_0 AND [u].[GiftStatus] = N'Purchased') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-20 18:08:10.633 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserGifts]
OUTPUT 1
WHERE [GiftId] = @p0 AND [UserId] = @p1;
2025-01-20 18:08:10.650 +02:00 [INF] Removed Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 successfully
2025-01-20 18:08:10.654 +02:00 [INF] Removed Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket successfully
2025-01-20 18:08:10.657 +02:00 [INF] Completed RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 18:08:10.658 +02:00 [INF] Executed action method project.Controllers.UserController.RemoveGiftFromUserAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 136.0948ms.
2025-01-20 18:08:10.661 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 177.4557ms
2025-01-20 18:08:10.665 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 18:08:10.667 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:08:10.671 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - 200 0 null 210.7649ms
2025-01-20 18:08:21.157 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - null 0
2025-01-20 18:08:21.161 +02:00 [INF] CORS policy execution failed.
2025-01-20 18:08:21.164 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 18:08:21.179 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:08:21.183 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:08:21.185 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:08:21.224 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:08:21.227 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 18:08:21.229 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:08:21.230 +02:00 [INF] Parsing token...
2025-01-20 18:08:21.232 +02:00 [INF] Attempting to retrieve user with username: miri and email: miri@gmail.com
2025-01-20 18:08:21.243 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:08:21.249 +02:00 [INF] User successfully found: miri
2025-01-20 18:08:21.251 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:08:21.2512621Z"
2025-01-20 18:08:21.259 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:08:21.264 +02:00 [INF] Adding Gift 3 to User be8b444f-2c3b-4efa-9770-72d6387507a0's basket in database
2025-01-20 18:08:21.271 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:08:21.281 +02:00 [INF] Created new UserGift entry for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:21.290 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 18:08:21.295 +02:00 [INF] Saved changes to database for Gift 3 and User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:21.297 +02:00 [INF] Completed AddToBasketAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0 and GiftId: 3
2025-01-20 18:08:21.298 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 71.4259ms.
2025-01-20 18:08:21.302 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 112.8036ms
2025-01-20 18:08:21.309 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:08:21.311 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:08:21.314 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - 200 0 null 156.6185ms
2025-01-20 18:08:29.391 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - null 0
2025-01-20 18:08:29.395 +02:00 [INF] CORS policy execution failed.
2025-01-20 18:08:29.397 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 18:08:29.403 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 18:08:29.421 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:08:29.440 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:08:29.471 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 18:08:29.474 +02:00 [INF] Starting ConfirmPurchaseAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:29.476 +02:00 [INF] Confirming purchase for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:29.479 +02:00 [INF] Fetching UserGifts for User be8b444f-2c3b-4efa-9770-72d6387507a0 to confirm purchase
2025-01-20 18:08:29.499 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 18:08:29.507 +02:00 [INF] Updated Gift 3 to Purchased for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:29.520 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [GiftStatus] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 18:08:29.526 +02:00 [INF] Purchase confirmed for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:29.528 +02:00 [INF] Purchase confirmed for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:29.529 +02:00 [INF] Completed ConfirmPurchaseAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:29.530 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 57.3628ms.
2025-01-20 18:08:29.533 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 89.8491ms
2025-01-20 18:08:29.536 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:08:29.541 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:08:29.543 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 151.8802ms
2025-01-20 18:08:32.440 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - null 0
2025-01-20 18:08:32.444 +02:00 [INF] CORS policy execution failed.
2025-01-20 18:08:32.446 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 18:08:32.448 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 18:08:32.450 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:08:32.455 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:08:32.498 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 18:08:32.501 +02:00 [INF] Starting ConfirmPurchaseAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:32.504 +02:00 [INF] Confirming purchase for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:32.506 +02:00 [INF] Fetching UserGifts for User be8b444f-2c3b-4efa-9770-72d6387507a0 to confirm purchase
2025-01-20 18:08:32.514 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 18:08:32.524 +02:00 [INF] Updated Gift 3 to Purchased for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:32.526 +02:00 [INF] Purchase confirmed for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:32.528 +02:00 [INF] Purchase confirmed for User be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:32.529 +02:00 [INF] Completed ConfirmPurchaseAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:32.531 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 30.2694ms.
2025-01-20 18:08:32.534 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 73.7645ms
2025-01-20 18:08:32.539 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:08:32.540 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:08:32.542 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 102.106ms
2025-01-20 18:08:37.160 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:08:37.164 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:08:37.166 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:08:37.168 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:08:37.204 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:08:37.209 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:08:37.210 +02:00 [INF] Received request to get basket for user: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:37.212 +02:00 [INF] Starting to fetch basket for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:37.221 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:08:37.228 +02:00 [INF] Successfully fetched 1 gifts for userId: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:37.231 +02:00 [INF] Serialized response: [
  {
    "UserId": "be8b444f-2c3b-4efa-9770-72d6387507a0",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Purchased",
    "Quantity": 1
  }
]
2025-01-20 18:08:37.234 +02:00 [INF] Completed GetBasketByUserAsync for User: be8b444f-2c3b-4efa-9770-72d6387507a0
2025-01-20 18:08:37.241 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32.067ms.
2025-01-20 18:08:37.244 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:08:37.247 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 74.8093ms
2025-01-20 18:08:37.249 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:08:37.251 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:08:37.257 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 97.5278ms
2025-01-20 18:08:42.965 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 18:08:42.970 +02:00 [INF] CORS policy execution failed.
2025-01-20 18:08:42.973 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 18:08:42.991 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 18:08:42.997 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 18:08:42.999 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:08:43.046 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 18:08:43.049 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 18:08:43.051 +02:00 [INF] Removing Gift 3 from User be8b444f-2c3b-4efa-9770-72d6387507a0's basket
2025-01-20 18:08:43.054 +02:00 [INF] Removing Gift 3 for User be8b444f-2c3b-4efa-9770-72d6387507a0 in database
2025-01-20 18:08:43.060 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 18:08:43.069 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGifts] AS [u]
        WHERE [u].[GiftId] = @__giftId_0 AND [u].[GiftStatus] = N'Purchased') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-20 18:08:43.389 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 380.9214ms
2025-01-20 18:08:43.393 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 18:08:43.543 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot remove gift with ID 3 from user be8b444f-2c3b-4efa-9770-72d6387507a0 because it is purchased.
   at project.Repository.UserRepository.RemoveGiftFromUserAsync(String userId, Int32 giftId) in E:\פרויקט\server\project\Repositories\UserRepository.cs:line 121
   at project.Services.UserService.RemoveGiftFromUserAsync(String userId, Int32 giftId) in E:\פרויקט\server\project\Services\UserService.cs:line 80
   at project.Controllers.UserController.RemoveGiftFromUserAsync(Int32 giftId) in E:\פרויקט\server\project\Controllers\UserController.cs:line 131
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at project.Controllers.Middlewares.OurMiddleware.Invoke(HttpContext context) in E:\פרויקט\server\project\Controllers\Middlewares\OurMiddleware.cs:line 64
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-20 18:08:43.658 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 692.8043ms
2025-01-20 18:10:42.871 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 18:10:42.882 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:10:42.887 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 15.6113ms
2025-01-20 18:10:42.912 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 47
2025-01-20 18:10:42.916 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:10:42.923 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:10:42.936 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 18:10:43.030 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 18:10:43.061 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 18:10:43.256 +02:00 [INF] User xjkhx@gmail.com logged in successfully.
2025-01-20 18:10:43.260 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 228.3165ms.
2025-01-20 18:10:43.264 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 18:10:43.282 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 340.8581ms
2025-01-20 18:10:43.286 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:10:43.290 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 378.4476ms
2025-01-20 18:10:58.293 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:10:58.297 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:10:58.305 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:10:58.534 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:10:58.539 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:10:58.5392037Z"
2025-01-20 18:10:58.560 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:10:58.565 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:10:58.5655135Z"
2025-01-20 18:10:58.569 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:10:58.5692383Z"
2025-01-20 18:10:58.571 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:10:58.5712802Z"
2025-01-20 18:10:58.572 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 34.6439ms.
2025-01-20 18:10:58.575 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:10:58.594 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 286.0742ms
2025-01-20 18:10:58.597 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:10:58.603 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 309.9305ms
2025-01-20 18:12:44.022 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:12:44.023 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:12:44.044 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:12:44.047 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:12:44.049 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:12:44.051 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:12:44.117 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:12:44.120 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:12:44.1204690Z"
2025-01-20 18:12:44.129 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:12:44.160 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:12:44.163 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:12:44.1633037Z"
2025-01-20 18:12:44.165 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:12:44.1656692Z"
2025-01-20 18:12:44.168 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:12:44.1681587Z"
2025-01-20 18:12:44.173 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:12:44.1738740Z"
2025-01-20 18:12:44.174 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:12:44.176 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 55.9095ms.
2025-01-20 18:12:44.181 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:12:44.1817080Z"
2025-01-20 18:12:44.190 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:12:44.193 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:12:44.1934793Z"
2025-01-20 18:12:44.198 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 142.9548ms
2025-01-20 18:12:44.204 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:12:44.2042555Z"
2025-01-20 18:12:44.207 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:12:44.210 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 44.8032ms.
2025-01-20 18:12:44.213 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 196.0917ms
2025-01-20 18:12:44.223 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:12:44.240 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 156.1342ms
2025-01-20 18:12:44.243 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:12:44.248 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 224.0078ms
2025-01-20 18:13:32.547 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:13:32.556 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:13:32.558 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:13:32.594 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:13:32.596 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:13:32.5967604Z"
2025-01-20 18:13:32.603 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:13:32.625 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:13:32.6258111Z"
2025-01-20 18:13:32.626 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:13:32.6269141Z"
2025-01-20 18:13:32.628 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:13:32.6283520Z"
2025-01-20 18:13:32.632 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 35.7187ms.
2025-01-20 18:13:32.635 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:13:32.637 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 76.2278ms
2025-01-20 18:13:32.639 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:13:32.642 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 94.2401ms
2025-01-20 18:13:36.557 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:13:36.561 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:13:36.563 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:13:36.605 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:13:36.607 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:13:36.6074924Z"
2025-01-20 18:13:36.612 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:13:36.620 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:13:36.6202978Z"
2025-01-20 18:13:36.621 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:13:36.6215123Z"
2025-01-20 18:13:36.624 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:13:36.6240796Z"
2025-01-20 18:13:36.626 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.4819ms.
2025-01-20 18:13:36.628 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:13:36.631 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 61.05ms
2025-01-20 18:13:36.638 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:13:36.640 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 82.7045ms
2025-01-20 18:14:04.613 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 18:14:04.639 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 18:14:04.642 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:14:04.646 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 33.6744ms
2025-01-20 18:14:05.452 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 18:14:05.456 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:14:05.459 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.9932ms
2025-01-20 18:14:05.473 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 18:14:05.478 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:14:05.486 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 18:14:05.500 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-01-20 18:14:05.518 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-01-20 18:14:05.520 +02:00 [INF] Outgoing Response: 403
2025-01-20 18:14:05.523 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 403 0 null 49.1712ms
2025-01-20 18:14:20.811 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 18:14:20.816 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:14:20.818 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 7.3998ms
2025-01-20 18:14:20.823 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 47
2025-01-20 18:14:20.827 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:14:20.830 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:14:20.835 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 18:14:20.894 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 18:14:20.905 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 18:14:21.096 +02:00 [INF] User xjkhx@gmail.com logged in successfully.
2025-01-20 18:14:21.099 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 201.7424ms.
2025-01-20 18:14:21.103 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 18:14:21.105 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 264.6718ms
2025-01-20 18:14:21.107 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:14:21.110 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 286.5276ms
2025-01-20 18:14:27.126 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 18:14:27.148 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 18:14:27.150 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:14:27.152 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 26.1586ms
2025-01-20 18:14:27.898 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 18:14:27.905 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:14:27.908 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 10.269ms
2025-01-20 18:14:27.924 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 18:14:27.929 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:14:27.935 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 18:14:27.938 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-01-20 18:14:27.941 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-01-20 18:14:27.943 +02:00 [INF] Outgoing Response: 403
2025-01-20 18:14:27.945 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 403 0 null 20.7355ms
2025-01-20 18:15:17.334 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:15:17.354 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:15:17.355 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:15:17.414 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:15:17.417 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:15:17.4170382Z"
2025-01-20 18:15:17.422 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:15:17.445 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:15:17.4457896Z"
2025-01-20 18:15:17.449 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:15:17.4493034Z"
2025-01-20 18:15:17.450 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:15:17.4509725Z"
2025-01-20 18:15:17.452 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 35.6066ms.
2025-01-20 18:15:17.455 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:15:17.458 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 98.6263ms
2025-01-20 18:15:17.460 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:15:17.467 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 132.244ms
2025-01-20 18:15:19.783 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 18:15:19.804 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:19.806 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 18:15:19.818 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 18:15:19.872 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 18:15:19.881 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T16:15:19.8810622Z"
2025-01-20 18:15:19.884 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T16:15:19.8844176Z"
2025-01-20 18:15:19.886 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T16:15:19.8860013Z"
2025-01-20 18:15:19.892 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:15:19.901 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T16:15:19.9010801Z"
2025-01-20 18:15:19.902 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T16:15:19.9027906Z"
2025-01-20 18:15:19.905 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.4825ms.
2025-01-20 18:15:19.908 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 18:15:19.909 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 87.2892ms
2025-01-20 18:15:19.911 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 18:15:19.914 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 130.6385ms
2025-01-20 18:15:19.924 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 18:15:19.928 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:19.930 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 5.5993ms
2025-01-20 18:15:19.938 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 18:15:19.942 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:19.944 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:15:19.948 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:15:19.952 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:15:20.082 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:15:20.084 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 18:15:20.086 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:15:20.088 +02:00 [INF] Parsing token...
2025-01-20 18:15:20.090 +02:00 [INF] Attempting to retrieve user with username: dfs and email: xjkhx@gmail.com
2025-01-20 18:15:20.100 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:15:20.106 +02:00 [INF] User successfully found: dfs
2025-01-20 18:15:20.108 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T16:15:20.1086649Z"
2025-01-20 18:15:20.113 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:15:20.122 +02:00 [INF] Adding Gift 5 to User c7172372-2a2b-4e98-b755-425264a0e49f's basket in database
2025-01-20 18:15:20.128 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:15:20.136 +02:00 [INF] Created new UserGift entry for Gift 5 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:15:20.151 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 18:15:20.156 +02:00 [INF] Saved changes to database for Gift 5 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:15:20.158 +02:00 [INF] Completed AddToBasketAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f and GiftId: 5
2025-01-20 18:15:20.160 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 76.0532ms.
2025-01-20 18:15:20.167 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 210.8665ms
2025-01-20 18:15:20.170 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:15:20.173 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:15:20.174 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 200 0 null 236.0076ms
2025-01-20 18:15:23.277 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 18:15:23.283 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:23.287 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 18:15:23.289 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 18:15:23.333 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 18:15:23.336 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T16:15:23.3366013Z"
2025-01-20 18:15:23.338 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:15:23.3389820Z"
2025-01-20 18:15:23.340 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:15:23.3407532Z"
2025-01-20 18:15:23.355 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:15:23.361 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T16:15:23.3616191Z"
2025-01-20 18:15:23.363 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T16:15:23.3636487Z"
2025-01-20 18:15:23.368 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.544ms.
2025-01-20 18:15:23.371 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 18:15:23.373 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 78.1016ms
2025-01-20 18:15:23.375 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 18:15:23.377 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 100.239ms
2025-01-20 18:15:23.387 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 18:15:23.391 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:23.392 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 5.2219ms
2025-01-20 18:15:23.404 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 18:15:23.408 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:23.410 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:15:23.413 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:15:23.415 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:15:23.520 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:15:23.523 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 18:15:23.524 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:15:23.526 +02:00 [INF] Parsing token...
2025-01-20 18:15:23.527 +02:00 [INF] Attempting to retrieve user with username: dfs and email: xjkhx@gmail.com
2025-01-20 18:15:23.540 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:15:23.550 +02:00 [INF] User successfully found: dfs
2025-01-20 18:15:23.552 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:15:23.5524718Z"
2025-01-20 18:15:23.557 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:15:23.565 +02:00 [INF] Adding Gift 3 to User c7172372-2a2b-4e98-b755-425264a0e49f's basket in database
2025-01-20 18:15:23.571 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:15:23.576 +02:00 [INF] Created new UserGift entry for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:15:23.589 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 18:15:23.594 +02:00 [INF] Saved changes to database for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:15:23.600 +02:00 [INF] Completed AddToBasketAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f and GiftId: 3
2025-01-20 18:15:23.602 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 79.7302ms.
2025-01-20 18:15:23.606 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 181.3191ms
2025-01-20 18:15:23.608 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:15:23.610 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:15:23.616 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 200 0 null 212.2211ms
2025-01-20 18:15:30.325 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - null null
2025-01-20 18:15:30.330 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-20 18:15:30.332 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:15:30.334 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 401 null null 8.4151ms
2025-01-20 18:15:31.057 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - null null
2025-01-20 18:15:31.066 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:31.073 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/userBasket - 204 null null 15.3032ms
2025-01-20 18:15:31.082 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - application/json null
2025-01-20 18:15:31.087 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:15:31.088 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-20 18:15:31.091 +02:00 [INF] Outgoing Response: 404
2025-01-20 18:15:31.099 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 404 0 null 17.395ms
2025-01-20 18:15:31.144 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/userBasket, Response status code: 404
2025-01-20 18:16:45.068 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/bas - null null
2025-01-20 18:16:45.084 +02:00 [INF] Incoming Request: GET /api/User/bas
2025-01-20 18:16:45.086 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:16:45.087 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/bas - 401 null null 19.5098ms
2025-01-20 18:16:45.994 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/bas - null null
2025-01-20 18:16:46.032 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:46.037 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/bas - 204 null null 42.6251ms
2025-01-20 18:16:46.043 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/bas - application/json null
2025-01-20 18:16:46.052 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:46.054 +02:00 [INF] Incoming Request: GET /api/User/bas
2025-01-20 18:16:46.057 +02:00 [INF] Outgoing Response: 404
2025-01-20 18:16:46.058 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/bas - 404 0 null 15.5328ms
2025-01-20 18:16:46.073 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/bas, Response status code: 404
2025-01-20 18:16:48.203 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:16:48.207 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:16:48.208 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:16:48.210 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 6.757ms
2025-01-20 18:16:48.919 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:16:48.927 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:48.932 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 13.2072ms
2025-01-20 18:16:48.938 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:16:48.944 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:48.952 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:16:48.958 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:16:48.960 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:16:49.081 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:16:49.092 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:16:49.096 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:49.098 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:49.121 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:16:49.135 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:49.152 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 1
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 1
  }
]
2025-01-20 18:16:49.156 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:49.159 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 66.9807ms.
2025-01-20 18:16:49.170 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:16:49.174 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 175.9137ms
2025-01-20 18:16:49.183 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:16:49.189 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:16:49.196 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 257.6611ms
2025-01-20 18:16:59.371 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3&quantity=2 - null null
2025-01-20 18:16:59.375 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:59.377 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3&quantity=2 - 204 null null 5.992ms
2025-01-20 18:16:59.384 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=2 - application/json 14
2025-01-20 18:16:59.387 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:59.389 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:16:59.391 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:16:59.392 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:16:59.432 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:16:59.434 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 2
2025-01-20 18:16:59.437 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:16:59.439 +02:00 [INF] Parsing token...
2025-01-20 18:16:59.440 +02:00 [INF] Attempting to retrieve user with username: dfs and email: xjkhx@gmail.com
2025-01-20 18:16:59.452 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:16:59.458 +02:00 [INF] User successfully found: dfs
2025-01-20 18:16:59.459 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:16:59.4598951Z"
2025-01-20 18:16:59.465 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:16:59.472 +02:00 [INF] Adding Gift 3 to User c7172372-2a2b-4e98-b755-425264a0e49f's basket in database
2025-01-20 18:16:59.477 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:16:59.486 +02:00 [INF] Updated existing UserGift entry for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:59.494 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 18:16:59.504 +02:00 [INF] Saved changes to database for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:59.505 +02:00 [INF] Completed AddToBasketAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f and GiftId: 3
2025-01-20 18:16:59.507 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 72.8011ms.
2025-01-20 18:16:59.510 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 110.077ms
2025-01-20 18:16:59.515 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:16:59.517 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:16:59.519 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=2 - 200 0 null 135.4486ms
2025-01-20 18:16:59.636 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3&quantity=3 - null null
2025-01-20 18:16:59.641 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:59.642 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3&quantity=3 - 204 null null 5.7459ms
2025-01-20 18:16:59.651 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=3 - application/json 14
2025-01-20 18:16:59.656 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:59.659 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:16:59.661 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:16:59.664 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:16:59.700 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:16:59.703 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 3
2025-01-20 18:16:59.705 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:16:59.707 +02:00 [INF] Parsing token...
2025-01-20 18:16:59.708 +02:00 [INF] Attempting to retrieve user with username: dfs and email: xjkhx@gmail.com
2025-01-20 18:16:59.718 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:16:59.724 +02:00 [INF] User successfully found: dfs
2025-01-20 18:16:59.725 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:16:59.7256564Z"
2025-01-20 18:16:59.730 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:16:59.737 +02:00 [INF] Adding Gift 3 to User c7172372-2a2b-4e98-b755-425264a0e49f's basket in database
2025-01-20 18:16:59.741 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:16:59.747 +02:00 [INF] Updated existing UserGift entry for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:59.757 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 18:16:59.762 +02:00 [INF] Saved changes to database for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:16:59.767 +02:00 [INF] Completed AddToBasketAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f and GiftId: 3
2025-01-20 18:16:59.769 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 65.3021ms.
2025-01-20 18:16:59.771 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 98.8648ms
2025-01-20 18:16:59.773 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:16:59.775 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:16:59.776 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=3 - 200 0 null 124.716ms
2025-01-20 18:16:59.892 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3&quantity=4 - null null
2025-01-20 18:16:59.897 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:59.899 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3&quantity=4 - 204 null null 7.1306ms
2025-01-20 18:16:59.905 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=4 - application/json 14
2025-01-20 18:16:59.908 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:16:59.910 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:16:59.912 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:16:59.917 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:16:59.948 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:16:59.951 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 4
2025-01-20 18:16:59.953 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:16:59.954 +02:00 [INF] Parsing token...
2025-01-20 18:16:59.956 +02:00 [INF] Attempting to retrieve user with username: dfs and email: xjkhx@gmail.com
2025-01-20 18:16:59.965 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:16:59.970 +02:00 [INF] User successfully found: dfs
2025-01-20 18:16:59.972 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T16:16:59.9724429Z"
2025-01-20 18:16:59.976 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:16:59.985 +02:00 [INF] Adding Gift 3 to User c7172372-2a2b-4e98-b755-425264a0e49f's basket in database
2025-01-20 18:16:59.990 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:16:59.994 +02:00 [INF] Updated existing UserGift entry for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:00.001 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 18:17:00.007 +02:00 [INF] Saved changes to database for Gift 3 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:00.008 +02:00 [INF] Completed AddToBasketAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f and GiftId: 3
2025-01-20 18:17:00.010 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 59.0095ms.
2025-01-20 18:17:00.018 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 96.9945ms
2025-01-20 18:17:00.021 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:17:00.022 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:17:00.024 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=4 - 200 0 null 118.7508ms
2025-01-20 18:17:01.780 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5&quantity=2 - null null
2025-01-20 18:17:01.786 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:17:01.789 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5&quantity=2 - 204 null null 8.9428ms
2025-01-20 18:17:01.794 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5&quantity=2 - application/json 14
2025-01-20 18:17:01.802 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:17:01.803 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 18:17:01.805 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:17:01.806 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:17:01.840 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 18:17:01.842 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 2
2025-01-20 18:17:01.844 +02:00 [INF] Received request to fetch user by token.
2025-01-20 18:17:01.847 +02:00 [INF] Parsing token...
2025-01-20 18:17:01.849 +02:00 [INF] Attempting to retrieve user with username: dfs and email: xjkhx@gmail.com
2025-01-20 18:17:01.858 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 18:17:01.868 +02:00 [INF] User successfully found: dfs
2025-01-20 18:17:01.870 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T16:17:01.8703274Z"
2025-01-20 18:17:01.874 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 18:17:01.879 +02:00 [INF] Adding Gift 5 to User c7172372-2a2b-4e98-b755-425264a0e49f's basket in database
2025-01-20 18:17:01.888 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 18:17:01.893 +02:00 [INF] Updated existing UserGift entry for Gift 5 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:01.901 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 18:17:01.906 +02:00 [INF] Saved changes to database for Gift 5 and User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:01.908 +02:00 [INF] Completed AddToBasketAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f and GiftId: 5
2025-01-20 18:17:01.910 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 68.0312ms.
2025-01-20 18:17:01.921 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 110.5877ms
2025-01-20 18:17:01.923 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 18:17:01.925 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:17:01.927 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5&quantity=2 - 200 0 null 132.9393ms
2025-01-20 18:17:06.669 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 18:17:06.674 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 18:17:06.676 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:17:06.678 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 8.4391ms
2025-01-20 18:17:07.188 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 18:17:07.192 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:17:07.194 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.7087ms
2025-01-20 18:17:07.200 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 18:17:07.204 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:17:07.206 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 18:17:07.213 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (manager)
2025-01-20 18:17:07.216 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-01-20 18:17:07.219 +02:00 [INF] Outgoing Response: 403
2025-01-20 18:17:07.221 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 403 0 null 20.1504ms
2025-01-20 18:17:11.202 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:17:11.206 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:17:11.208 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:17:11.256 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:17:11.259 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:17:11.2591325Z"
2025-01-20 18:17:11.264 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:17:11.268 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:17:11.2689300Z"
2025-01-20 18:17:11.270 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:17:11.2704906Z"
2025-01-20 18:17:11.272 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:17:11.2720587Z"
2025-01-20 18:17:11.273 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.4775ms.
2025-01-20 18:17:11.276 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:17:11.283 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 66.9118ms
2025-01-20 18:17:11.285 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:17:11.287 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 84.5886ms
2025-01-20 18:17:29.272 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:17:29.277 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:17:29.279 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:17:29.281 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 8.191ms
2025-01-20 18:17:29.716 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:17:29.720 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:17:29.722 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 5.6238ms
2025-01-20 18:17:29.728 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:17:29.733 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:17:29.734 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:17:29.737 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:17:29.739 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:17:29.787 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:17:29.790 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:17:29.792 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:29.794 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:29.804 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:17:29.810 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:29.816 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:17:29.819 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:17:29.821 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 30.4759ms.
2025-01-20 18:17:29.824 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:17:29.830 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 81.7437ms
2025-01-20 18:17:29.832 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:17:29.835 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:17:29.837 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 109.0523ms
2025-01-20 18:18:03.740 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:03.745 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:03.747 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:03.749 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 8.9728ms
2025-01-20 18:18:04.035 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:04.054 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:04.056 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 21.4775ms
2025-01-20 18:18:04.063 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:18:04.067 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:04.068 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:04.070 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:04.073 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:18:04.110 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:18:04.113 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:18:04.115 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:04.116 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:04.124 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:18:04.130 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:04.131 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:18:04.138 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:04.140 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 26.8354ms.
2025-01-20 18:18:04.143 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:18:04.147 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 69.2371ms
2025-01-20 18:18:04.155 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:04.159 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:18:04.162 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 98.6838ms
2025-01-20 18:18:12.860 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:12.860 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:12.864 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:12.867 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:12.869 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:12.870 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:12.871 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 11.941ms
2025-01-20 18:18:12.873 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 13.7025ms
2025-01-20 18:18:13.128 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:13.133 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:13.135 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 7.0117ms
2025-01-20 18:18:13.142 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:18:13.146 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:13.148 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:13.149 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:13.153 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:18:13.187 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:18:13.189 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:18:13.191 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:13.192 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:13.201 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:18:13.206 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:13.207 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:18:13.216 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:13.219 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.6202ms.
2025-01-20 18:18:13.223 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:18:13.225 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 68.3041ms
2025-01-20 18:18:13.233 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:13.235 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:18:13.236 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 94.827ms
2025-01-20 18:18:19.681 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:19.685 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:19.686 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:19.688 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 7.1148ms
2025-01-20 18:18:19.916 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:19.920 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:19.922 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 6.2537ms
2025-01-20 18:18:19.927 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:18:19.931 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:19.932 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:19.934 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:19.935 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:18:19.970 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:18:19.973 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:18:19.974 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:19.976 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:19.983 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:18:19.989 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:19.991 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:18:19.994 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:19.996 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 22.8158ms.
2025-01-20 18:18:20.002 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:18:20.005 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 64.3593ms
2025-01-20 18:18:20.008 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:20.009 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:18:20.012 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 84.5648ms
2025-01-20 18:18:22.843 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:22.848 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:22.850 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:22.852 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 8.645ms
2025-01-20 18:18:23.101 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:18:23.106 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:23.109 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:23.112 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:23.115 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:18:23.166 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:18:23.168 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:18:23.169 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:23.171 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:23.178 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:18:23.183 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:23.184 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:18:23.187 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:23.192 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.8522ms.
2025-01-20 18:18:23.195 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:18:23.198 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 76.907ms
2025-01-20 18:18:23.200 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:23.202 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:18:23.206 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 104.1251ms
2025-01-20 18:18:25.858 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:25.863 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:25.865 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:25.867 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 8.8842ms
2025-01-20 18:18:26.129 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:26.133 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:26.136 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 7.3392ms
2025-01-20 18:18:26.142 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:18:26.147 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:26.151 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:26.153 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:26.154 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:18:26.187 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:18:26.189 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:18:26.190 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:26.192 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:26.202 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:18:26.209 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:26.227 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:18:26.250 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:26.253 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 63.8511ms.
2025-01-20 18:18:26.257 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:18:26.264 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 105.3382ms
2025-01-20 18:18:26.266 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:26.268 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:18:26.270 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 128.5277ms
2025-01-20 18:18:55.860 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:55.884 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:55.887 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:18:55.889 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 29.3992ms
2025-01-20 18:18:56.138 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:18:56.145 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:56.147 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 9.2459ms
2025-01-20 18:18:56.178 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:18:56.183 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:18:56.184 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:18:56.186 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:56.188 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:18:56.232 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:18:56.235 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:18:56.236 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:56.238 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:56.247 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:18:56.255 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:56.257 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:18:56.267 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:18:56.268 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 33.526ms.
2025-01-20 18:18:56.271 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:18:56.274 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 77.1114ms
2025-01-20 18:18:56.276 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:18:56.281 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:18:56.283 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 104.4768ms
2025-01-20 18:19:55.131 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:19:55.151 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:19:55.152 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:19:55.155 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 24.1905ms
2025-01-20 18:19:55.603 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:19:55.628 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:19:55.629 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 26.0607ms
2025-01-20 18:19:55.633 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:19:55.636 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:19:55.638 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:19:55.640 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:19:55.644 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:19:55.682 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:19:55.684 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:19:55.686 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:19:55.688 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:19:55.700 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:19:55.711 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:19:55.714 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Draft",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 18:19:55.717 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:19:55.725 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 40.4102ms.
2025-01-20 18:19:55.729 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:19:55.733 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 83.6411ms
2025-01-20 18:19:55.737 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:19:55.739 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:19:55.741 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 108.0234ms
2025-01-20 18:22:28.344 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - null null
2025-01-20 18:22:28.368 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:22:28.370 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - 204 null null 25.8896ms
2025-01-20 18:22:28.395 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - application/json 2
2025-01-20 18:22:28.398 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:22:28.399 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 18:22:28.402 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:22:28.404 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:22:28.439 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 18:22:28.443 +02:00 [INF] Starting ConfirmPurchaseAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.446 +02:00 [INF] Confirming purchase for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.447 +02:00 [INF] Fetching UserGifts for User c7172372-2a2b-4e98-b755-425264a0e49f to confirm purchase
2025-01-20 18:22:28.457 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 18:22:28.466 +02:00 [INF] Updated Gift 3 to Purchased for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.468 +02:00 [INF] Updated Gift 5 to Purchased for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.503 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (Size = 450), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserGifts] SET [GiftStatus] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
UPDATE [UserGifts] SET [GiftStatus] = @p3
OUTPUT 1
WHERE [GiftId] = @p4 AND [UserId] = @p5;
2025-01-20 18:22:28.522 +02:00 [INF] Purchase confirmed for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.527 +02:00 [INF] Purchase confirmed for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.530 +02:00 [INF] Completed ConfirmPurchaseAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:28.532 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 88.5406ms.
2025-01-20 18:22:28.535 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 128.2405ms
2025-01-20 18:22:28.537 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:22:28.538 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:22:28.540 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 144.9399ms
2025-01-20 18:22:42.485 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:22:42.489 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:22:42.492 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:22:42.496 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 10.1847ms
2025-01-20 18:22:43.242 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:22:43.279 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:22:43.284 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 41.506ms
2025-01-20 18:22:43.292 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:22:43.298 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:22:43.301 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:22:43.304 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:22:43.306 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:22:43.378 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:22:43.384 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:22:43.386 +02:00 [INF] Received request to get basket for user: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:43.390 +02:00 [INF] Starting to fetch basket for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:43.423 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:22:43.433 +02:00 [INF] Successfully fetched 2 gifts for userId: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:43.448 +02:00 [INF] Serialized response: [
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 3,
    "GiftStatus": "Purchased",
    "Quantity": 4
  },
  {
    "UserId": "c7172372-2a2b-4e98-b755-425264a0e49f",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Purchased",
    "Quantity": 2
  }
]
2025-01-20 18:22:43.456 +02:00 [INF] Completed GetBasketByUserAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:22:43.466 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 81.7674ms.
2025-01-20 18:22:43.473 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:22:43.478 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 160.654ms
2025-01-20 18:22:43.483 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:22:43.486 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:22:43.489 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 197.1743ms
2025-01-20 18:22:45.036 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 18:22:45.041 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:22:45.044 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 8.6904ms
2025-01-20 18:22:45.053 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - application/json null
2025-01-20 18:22:45.058 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:22:45.062 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 18:22:45.065 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 18:22:45.070 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 18:22:45.102 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 18:22:45.105 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 3
2025-01-20 18:22:45.107 +02:00 [INF] Removing Gift 3 from User c7172372-2a2b-4e98-b755-425264a0e49f's basket
2025-01-20 18:22:45.109 +02:00 [INF] Removing Gift 3 for User c7172372-2a2b-4e98-b755-425264a0e49f in database
2025-01-20 18:22:45.116 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 18:22:45.123 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGifts] AS [u]
        WHERE [u].[GiftId] = @__giftId_0 AND [u].[GiftStatus] = N'Purchased') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-20 18:22:45.314 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 237.8261ms
2025-01-20 18:22:45.316 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 18:22:45.455 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot remove gift with ID 3 from user c7172372-2a2b-4e98-b755-425264a0e49f because it is purchased.
   at project.Repository.UserRepository.RemoveGiftFromUserAsync(String userId, Int32 giftId) in E:\פרויקט\server\project\Repositories\UserRepository.cs:line 121
   at project.Services.UserService.RemoveGiftFromUserAsync(String userId, Int32 giftId) in E:\פרויקט\server\project\Services\UserService.cs:line 80
   at project.Controllers.UserController.RemoveGiftFromUserAsync(Int32 giftId) in E:\פרויקט\server\project\Controllers\UserController.cs:line 131
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at project.Controllers.Middlewares.OurMiddleware.Invoke(HttpContext context) in E:\פרויקט\server\project\Controllers\Middlewares\OurMiddleware.cs:line 64
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-20 18:22:45.494 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 441.0129ms
2025-01-20 18:23:17.834 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 18:23:17.857 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:23:17.861 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 27.1343ms
2025-01-20 18:23:17.870 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 94
2025-01-20 18:23:17.875 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:23:17.879 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 18:23:17.896 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 18:23:17.995 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 18:23:18.163 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:23:18.255 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 18:23:18.284 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:23:18.340 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 18:23:18.345 +02:00 [INF] User registered successfully: aaaa
2025-01-20 18:23:18.347 +02:00 [INF] User registered successfully.
2025-01-20 18:23:18.348 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 351.1648ms.
2025-01-20 18:23:18.351 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 18:23:18.353 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 452.2495ms
2025-01-20 18:23:18.355 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 18:23:18.358 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 487.6343ms
2025-01-20 18:23:56.014 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 18:23:56.037 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:23:56.043 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 28.3094ms
2025-01-20 18:23:56.067 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 92
2025-01-20 18:23:56.071 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:23:56.072 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 18:23:56.076 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 18:23:56.120 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 18:23:56.284 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:23:56.298 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 18:23:56.309 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:23:56.330 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 18:23:56.334 +02:00 [INF] User registered successfully: aaa
2025-01-20 18:23:56.336 +02:00 [INF] User registered successfully.
2025-01-20 18:23:56.338 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 214.8912ms.
2025-01-20 18:23:56.344 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 18:23:56.347 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 265.5422ms
2025-01-20 18:23:56.350 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 18:23:56.353 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 286.0822ms
2025-01-20 18:26:30.120 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 18:26:30.145 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:26:30.147 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 27.3217ms
2025-01-20 18:26:30.169 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 99
2025-01-20 18:26:30.177 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:26:30.178 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 18:26:30.181 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 18:26:30.228 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 18:26:30.383 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:26:30.403 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 18:26:30.421 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:26:30.463 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 18:26:30.467 +02:00 [INF] User registered successfully: aaaaaa
2025-01-20 18:26:30.469 +02:00 [INF] User registered successfully.
2025-01-20 18:26:30.470 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 239.8197ms.
2025-01-20 18:26:30.473 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 18:26:30.475 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 290.7174ms
2025-01-20 18:26:30.478 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 18:26:30.480 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 310.6507ms
2025-01-20 18:27:37.870 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - null null
2025-01-20 18:27:37.893 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:27:37.894 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - 204 null null 24.1869ms
2025-01-20 18:27:37.922 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - application/json 2
2025-01-20 18:27:37.928 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:27:37.930 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 18:27:37.932 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:27:37.934 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:27:37.966 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 18:27:37.968 +02:00 [INF] Starting ConfirmPurchaseAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.970 +02:00 [INF] Confirming purchase for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.972 +02:00 [INF] Fetching UserGifts for User c7172372-2a2b-4e98-b755-425264a0e49f to confirm purchase
2025-01-20 18:27:37.981 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 18:27:37.986 +02:00 [INF] Updated Gift 3 to Purchased for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.991 +02:00 [INF] Updated Gift 5 to Purchased for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.994 +02:00 [INF] Purchase confirmed for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.995 +02:00 [INF] Purchase confirmed for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.997 +02:00 [INF] Completed ConfirmPurchaseAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:27:37.998 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 30.2817ms.
2025-01-20 18:27:38.001 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 64.4216ms
2025-01-20 18:27:38.003 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:27:38.009 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:27:38.011 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 88.3049ms
2025-01-20 18:30:44.434 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - null null
2025-01-20 18:30:44.457 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:30:44.459 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - 204 null null 25.4777ms
2025-01-20 18:30:44.485 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - application/json 2
2025-01-20 18:30:44.493 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:30:44.495 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 18:30:44.497 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:30:44.499 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:30:44.531 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 18:30:44.534 +02:00 [INF] Starting ConfirmPurchaseAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.536 +02:00 [INF] Confirming purchase for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.538 +02:00 [INF] Fetching UserGifts for User c7172372-2a2b-4e98-b755-425264a0e49f to confirm purchase
2025-01-20 18:30:44.549 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 18:30:44.560 +02:00 [INF] Updated Gift 3 to Purchased for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.563 +02:00 [INF] Updated Gift 5 to Purchased for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.565 +02:00 [INF] Purchase confirmed for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.566 +02:00 [INF] Purchase confirmed for User c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.567 +02:00 [INF] Completed ConfirmPurchaseAsync for User: c7172372-2a2b-4e98-b755-425264a0e49f
2025-01-20 18:30:44.569 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 35.6783ms.
2025-01-20 18:30:44.576 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 71.1039ms
2025-01-20 18:30:44.578 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 18:30:44.579 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:30:44.581 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 96.0292ms
2025-01-20 18:47:47.679 +02:00 [INF] Starting up the application
2025-01-20 18:47:51.589 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 18:47:54.638 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 18:47:54.822 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:47:55.293 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 18:47:55.299 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 18:47:55.301 +02:00 [INF] Hosting environment: Development
2025-01-20 18:47:55.303 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 18:47:56.991 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 18:47:57.610 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 634.6109ms
2025-01-20 18:47:57.649 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 18:47:57.691 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 41.4018ms
2025-01-20 18:47:57.960 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 18:47:58.319 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 358.7298ms
2025-01-20 18:56:43.425 +02:00 [INF] Starting up the application
2025-01-20 18:56:47.957 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 18:56:51.820 +02:00 [INF] Executed DbCommand (109ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 18:56:52.063 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 18:56:52.647 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 18:56:52.658 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 18:56:52.661 +02:00 [INF] Hosting environment: Development
2025-01-20 18:56:52.662 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 18:56:54.594 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 18:56:55.343 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 754.9101ms
2025-01-20 18:56:55.392 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 18:56:55.407 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 15.1068ms
2025-01-20 18:56:55.707 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 18:56:56.048 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 340.9073ms
2025-01-20 18:57:00.829 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:57:00.840 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 18:57:01.056 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:57:01.099 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:57:01.523 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:57:01.528 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:57:01.5284078Z"
2025-01-20 18:57:01.644 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:57:01.707 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:57:01.7074943Z"
2025-01-20 18:57:01.709 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:57:01.7094415Z"
2025-01-20 18:57:01.711 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:57:01.7110069Z"
2025-01-20 18:57:01.718 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 188.2819ms.
2025-01-20 18:57:01.732 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:57:01.833 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 723.9245ms
2025-01-20 18:57:01.837 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:57:01.847 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 1017.6393ms
2025-01-20 18:58:25.707 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 18:58:25.720 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:25.725 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 18.1467ms
2025-01-20 18:58:25.747 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 59
2025-01-20 18:58:25.753 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:25.759 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:58:25.778 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 18:58:25.901 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 18:58:25.954 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 18:58:26.119 +02:00 [WRN] Invalid login attempt: manager1@example.com
2025-01-20 18:58:26.122 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 217.7343ms.
2025-01-20 18:58:26.124 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 18:58:26.127 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 344.5087ms
2025-01-20 18:58:26.129 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:58:26.131 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 383.2848ms
2025-01-20 18:58:39.171 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 18:58:39.176 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:39.178 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 6.4549ms
2025-01-20 18:58:39.183 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 59
2025-01-20 18:58:39.186 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:39.191 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:58:39.193 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 18:58:39.223 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 18:58:39.236 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 18:58:39.386 +02:00 [WRN] Invalid login attempt: manager1@example.com
2025-01-20 18:58:39.388 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 162.0114ms.
2025-01-20 18:58:39.391 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 18:58:39.393 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 197.1572ms
2025-01-20 18:58:39.395 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:58:39.397 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 214.4638ms
2025-01-20 18:58:44.579 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 18:58:44.584 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:44.586 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 6.3363ms
2025-01-20 18:58:44.591 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 18:58:44.595 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:44.596 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:58:44.597 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 18:58:44.643 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 18:58:44.655 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 18:58:44.940 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 18:58:45.027 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 18:58:45.082 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 18:58:45.105 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 460.2846ms.
2025-01-20 18:58:45.109 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 18:58:45.131 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 528.6395ms
2025-01-20 18:58:45.134 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 18:58:45.136 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 544.7992ms
2025-01-20 18:58:58.898 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:58:58.903 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:58:58.905 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:58:58.906 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:58:58.937 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:58:58.940 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:58:58.9403220Z"
2025-01-20 18:58:58.947 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:58:58.951 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:58:58.9511292Z"
2025-01-20 18:58:58.952 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:58:58.9522504Z"
2025-01-20 18:58:58.953 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:58:58.9534786Z"
2025-01-20 18:58:58.954 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.5708ms.
2025-01-20 18:58:58.957 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:58:58.959 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 49.5868ms
2025-01-20 18:58:58.961 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:58:58.965 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 67.4454ms
2025-01-20 18:59:00.314 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 18:59:00.319 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:59:00.321 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 6.8279ms
2025-01-20 18:59:00.326 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 18:59:00.330 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:59:00.333 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:59:00.462 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:59:00.469 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 18:59:00.494 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 18:59:00.498 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 18:59:00.502 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 18:59:00.508 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 18:59:00.567 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 18:59:00.572 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 18:59:00.573 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 18:59:00.575 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 18:59:00.576 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 79.4443ms.
2025-01-20 18:59:00.578 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:59:00.589 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 117.4151ms
2025-01-20 18:59:00.592 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 18:59:00.593 +02:00 [INF] Outgoing Response: 200
2025-01-20 18:59:00.595 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 268.3337ms
2025-01-20 18:59:02.361 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 18:59:02.368 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:59:02.370 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:59:02.373 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 18:59:02.407 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 18:59:02.410 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T16:59:02.4101507Z"
2025-01-20 18:59:02.413 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 18:59:02.418 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:59:02.4179966Z"
2025-01-20 18:59:02.419 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:59:02.4191530Z"
2025-01-20 18:59:02.420 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T16:59:02.4204162Z"
2025-01-20 18:59:02.421 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.5465ms.
2025-01-20 18:59:02.424 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 18:59:02.426 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 48.9851ms
2025-01-20 18:59:02.428 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 18:59:02.430 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 68.7725ms
2025-01-20 18:59:09.150 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 18:59:09.156 +02:00 [INF] CORS policy execution successful.
2025-01-20 18:59:09.158 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 18:59:09.159 +02:00 [WRN] Missing Authorization Header
2025-01-20 18:59:09.161 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 10.4918ms
2025-01-20 19:01:20.792 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:01:20.815 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:01:20.817 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 24.4854ms
2025-01-20 19:01:20.842 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:01:20.845 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:01:20.846 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:01:20.848 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:01:20.883 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:01:20.892 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:01:21.069 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:01:21.078 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:01:21.088 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:01:21.096 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 209.781ms.
2025-01-20 19:01:21.099 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:01:21.101 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 248.0003ms
2025-01-20 19:01:21.103 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:01:21.106 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 263.8285ms
2025-01-20 19:10:49.404 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:10:49.428 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:10:49.429 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 24.5752ms
2025-01-20 19:10:49.452 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:10:49.455 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:10:49.456 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:10:49.458 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:10:49.498 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:10:49.539 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:10:49.685 +02:00 [WRN] Invalid login attempt: manager1@example.com
2025-01-20 19:10:49.687 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 186.7783ms.
2025-01-20 19:10:49.690 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:10:49.692 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 228.0749ms
2025-01-20 19:10:49.694 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:10:49.696 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 244.3363ms
2025-01-20 19:11:17.898 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:11:17.902 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:11:17.904 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 5.9672ms
2025-01-20 19:11:17.927 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:11:17.930 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:11:17.931 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:11:17.932 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:11:17.964 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:11:17.970 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:11:18.132 +02:00 [WRN] Invalid login attempt: manager1@example.com
2025-01-20 19:11:18.134 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 168.3479ms.
2025-01-20 19:11:18.136 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:11:18.138 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 202.633ms
2025-01-20 19:11:18.141 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:11:18.143 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 215.9555ms
2025-01-20 19:11:56.868 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:11:56.888 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:11:56.891 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 22.3889ms
2025-01-20 19:11:56.913 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:11:56.916 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:11:56.918 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:11:56.919 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:11:56.954 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:11:56.965 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:11:57.130 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:11:57.138 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:11:57.147 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:11:57.151 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 194.016ms.
2025-01-20 19:11:57.153 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:11:57.155 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 233.5983ms
2025-01-20 19:11:57.158 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:11:57.161 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 248.5517ms
2025-01-20 19:14:52.218 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:14:52.237 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:14:52.240 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 21.5527ms
2025-01-20 19:14:52.262 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:14:52.265 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:14:52.267 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:14:52.268 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:14:52.309 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:14:52.318 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:14:52.463 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:14:52.471 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:14:52.480 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:14:52.484 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 172.1083ms.
2025-01-20 19:14:52.486 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:14:52.490 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 218.021ms
2025-01-20 19:14:52.492 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:14:52.495 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 232.883ms
2025-01-20 19:14:56.019 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:14:56.026 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:14:56.028 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:14:56.030 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:14:56.057 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:14:56.063 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:14:56.208 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:14:56.214 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:14:56.219 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:14:56.225 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 164.8297ms.
2025-01-20 19:14:56.228 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:14:56.232 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 198.9092ms
2025-01-20 19:14:56.235 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:14:56.237 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 218.0948ms
2025-01-20 19:14:59.838 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:14:59.843 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:14:59.845 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 7.3782ms
2025-01-20 19:14:59.851 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:14:59.855 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:14:59.858 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:14:59.859 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:14:59.888 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:14:59.895 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:15:00.041 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:15:00.048 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:15:00.053 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:15:00.059 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 168.8996ms.
2025-01-20 19:15:00.062 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:15:00.064 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 201.4015ms
2025-01-20 19:15:00.066 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:15:00.069 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 217.3435ms
2025-01-20 19:15:00.513 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:15:00.517 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:00.519 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:15:00.520 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:15:00.549 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:15:00.558 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:15:00.722 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:15:00.729 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:15:00.740 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:15:00.746 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 194.6505ms.
2025-01-20 19:15:00.750 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:15:00.754 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 227.6459ms
2025-01-20 19:15:00.761 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:15:00.764 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 250.7244ms
2025-01-20 19:15:05.708 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 19:15:05.713 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:05.715 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 6.8223ms
2025-01-20 19:15:05.719 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 19:15:05.724 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:05.726 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:15:05.728 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:15:05.754 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:15:05.760 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:15:05.901 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:15:05.910 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:15:05.917 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:15:05.923 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 166.5105ms.
2025-01-20 19:15:05.926 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:15:05.928 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 196.7467ms
2025-01-20 19:15:05.930 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:15:05.932 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 212.6283ms
2025-01-20 19:15:51.359 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 19:15:51.363 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:51.364 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 19:15:51.366 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 19:15:51.413 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 19:15:51.415 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T17:15:51.4157768Z"
2025-01-20 19:15:51.421 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 19:15:51.441 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T17:15:51.4417892Z"
2025-01-20 19:15:51.442 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T17:15:51.4428998Z"
2025-01-20 19:15:51.444 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T17:15:51.4441513Z"
2025-01-20 19:15:51.445 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.6428ms.
2025-01-20 19:15:51.447 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:15:51.449 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 79.7127ms
2025-01-20 19:15:51.452 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 19:15:51.454 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 94.1735ms
2025-01-20 19:15:52.972 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 19:15:52.977 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:52.979 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 6.8109ms
2025-01-20 19:15:52.985 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 19:15:52.990 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:52.991 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 19:15:52.995 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 19:15:52.996 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 19:15:53.028 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 19:15:53.031 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 19:15:53.033 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:15:53.034 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:15:53.043 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 19:15:53.048 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:15:53.049 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:15:53.050 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:15:53.052 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.7861ms.
2025-01-20 19:15:53.054 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:15:53.056 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 56.1125ms
2025-01-20 19:15:53.059 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 19:15:53.060 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:15:53.062 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 76.5154ms
2025-01-20 19:15:54.694 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 19:15:54.698 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:15:54.700 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:15:54.710 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 19:15:54.749 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 19:15:54.753 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:15:54.7533157Z"
2025-01-20 19:15:54.757 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:15:54.7574821Z"
2025-01-20 19:15:54.761 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:15:54.7613710Z"
2025-01-20 19:15:54.832 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 19:15:54.840 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:15:54.8400678Z"
2025-01-20 19:15:54.842 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:15:54.8421370Z"
2025-01-20 19:15:54.844 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:15:54.8441028Z"
2025-01-20 19:15:54.845 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 93.3ms.
2025-01-20 19:15:54.847 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:15:54.856 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 142.113ms
2025-01-20 19:15:54.858 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:15:54.861 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 167.2174ms
2025-01-20 19:16:19.236 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 19:16:19.255 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:19.256 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 20.8054ms
2025-01-20 19:16:19.294 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 19:16:19.297 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:19.299 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 19:16:19.304 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 19:16:19.311 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 19:16:19.341 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 19:16:19.350 +02:00 [INF] Fetching all donators.
2025-01-20 19:16:19.354 +02:00 [INF] Fetching all donators.
2025-01-20 19:16:19.368 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 19:16:19.385 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 19:16:19.387 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 42.5832ms.
2025-01-20 19:16:19.389 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:16:19.393 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 78.6014ms
2025-01-20 19:16:19.395 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 19:16:19.397 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:16:19.399 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 105.0803ms
2025-01-20 19:16:23.773 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 19:16:23.777 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:23.781 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:16:23.784 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 19:16:23.815 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 19:16:23.819 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:16:23.8192141Z"
2025-01-20 19:16:23.820 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:16:23.8207452Z"
2025-01-20 19:16:23.823 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:16:23.8230973Z"
2025-01-20 19:16:23.834 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 19:16:23.841 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:16:23.8411160Z"
2025-01-20 19:16:23.842 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:16:23.8428776Z"
2025-01-20 19:16:23.844 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:16:23.8445045Z"
2025-01-20 19:16:23.845 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 26.5908ms.
2025-01-20 19:16:23.848 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:16:23.850 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 60.328ms
2025-01-20 19:16:23.852 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:16:23.854 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 80.7764ms
2025-01-20 19:16:26.510 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 19:16:26.514 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:26.517 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.8974ms
2025-01-20 19:16:26.525 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 19:16:26.528 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:26.530 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 19:16:26.532 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 19:16:26.534 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 19:16:26.563 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 19:16:26.566 +02:00 [INF] Fetching all donators.
2025-01-20 19:16:26.567 +02:00 [INF] Fetching all donators.
2025-01-20 19:16:26.573 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 19:16:26.592 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 19:16:26.593 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.1993ms.
2025-01-20 19:16:26.595 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:16:26.597 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 58.2813ms
2025-01-20 19:16:26.599 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 19:16:26.601 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:16:26.602 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 77.4987ms
2025-01-20 19:16:30.156 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:16:30.161 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:30.163 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.4336ms
2025-01-20 19:16:30.169 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 19:16:30.173 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:16:30.175 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:16:30.182 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:16:30.203 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:16:30.229 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 41.4236ms
2025-01-20 19:16:30.232 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:16:30.234 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 64.9597ms
2025-01-20 19:17:26.675 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - null 0
2025-01-20 19:17:26.682 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:17:26.684 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:17:26.686 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 19:17:26.688 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:17:26.700 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 19:17:26.742 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 19:17:26.746 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-20 19:17:26.750 +02:00 [INF] Received request to fetch user by token.
2025-01-20 19:17:26.751 +02:00 [INF] Parsing token...
2025-01-20 19:17:26.754 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 19:17:26.798 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 19:17:26.803 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 19:17:27.018 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 19:17:27.215 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 512.3708ms
2025-01-20 19:17:27.218 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:17:27.367 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 119
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at project.Controllers.Middlewares.OurMiddleware.Invoke(HttpContext context) in E:\פרויקט\server\project\Controllers\Middlewares\OurMiddleware.cs:line 64
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-20 19:17:27.399 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - 500 null text/plain; charset=utf-8 724.5255ms
2025-01-20 19:17:59.678 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 57
2025-01-20 19:17:59.698 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:17:59.699 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:17:59.701 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:17:59.703 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:17:59.742 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:17:59.749 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:17:59.933 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 224.4497ms
2025-01-20 19:17:59.935 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:18:00.067 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains more than one element.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByEmailAsync(String email)
   at project.Services.AuthService.LoginAsync(Login model) in E:\פרויקט\server\project\Services\AuthService.cs:line 125
   at project.Controllers.AuthController.Login(Login model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 59
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at project.Controllers.Middlewares.OurMiddleware.Invoke(HttpContext context) in E:\פרויקט\server\project\Controllers\Middlewares\OurMiddleware.cs:line 40
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-20 19:18:00.094 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 500 null text/plain; charset=utf-8 416.2202ms
2025-01-20 19:18:13.461 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 57
2025-01-20 19:18:13.465 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:18:13.467 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:18:13.469 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:18:13.471 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:18:13.522 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:18:13.528 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:18:13.684 +02:00 [WRN] Invalid login attempt: miri@gmail.com
2025-01-20 19:18:13.687 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 163.1045ms.
2025-01-20 19:18:13.690 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:18:13.691 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 202.2849ms
2025-01-20 19:18:13.693 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:18:13.695 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 401 null text/plain; charset=utf-8 234.138ms
2025-01-20 19:19:23.548 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 112
2025-01-20 19:19:23.568 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:19:23.570 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:19:23.572 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:23.578 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:19:23.614 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:19:23.631 +02:00 [ERR] Registration failed: Passwords must have at least one uppercase ('A'-'Z').
2025-01-20 19:19:23.701 +02:00 [ERR] Error during registration for user sara.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 19:19:23.831 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 19:19:23.836 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 220.448ms.
2025-01-20 19:19:23.841 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:19:23.843 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 261.677ms
2025-01-20 19:19:23.846 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:23.847 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 299.4268ms
2025-01-20 19:19:27.857 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 112
2025-01-20 19:19:27.861 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:19:27.862 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:19:27.864 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:27.866 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:19:27.899 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:19:27.904 +02:00 [ERR] Registration failed: Passwords must have at least one uppercase ('A'-'Z').
2025-01-20 19:19:27.964 +02:00 [ERR] Error during registration for user sara.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 19:19:28.076 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 19:19:28.081 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 178.6627ms.
2025-01-20 19:19:28.086 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:19:28.088 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 217.2414ms
2025-01-20 19:19:28.091 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:28.093 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 235.877ms
2025-01-20 19:19:33.397 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 113
2025-01-20 19:19:33.402 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:19:33.404 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:19:33.406 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:33.408 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:19:33.447 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:19:33.450 +02:00 [ERR] Registration failed: Passwords must have at least one uppercase ('A'-'Z').
2025-01-20 19:19:33.508 +02:00 [ERR] Error during registration for user sara1.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 19:19:33.619 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 19:19:33.624 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 173.9162ms.
2025-01-20 19:19:33.627 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:19:33.630 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 216.9342ms
2025-01-20 19:19:33.633 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:33.636 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 238.7405ms
2025-01-20 19:19:44.291 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 116
2025-01-20 19:19:44.296 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:19:44.297 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:19:44.299 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:44.302 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:19:44.328 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:19:44.330 +02:00 [ERR] Registration failed: Passwords must have at least one uppercase ('A'-'Z').
2025-01-20 19:19:44.415 +02:00 [ERR] Error during registration for user sara1.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 19:19:44.526 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Passwords must have at least one uppercase ('A'-'Z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 19:19:44.530 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 199.4359ms.
2025-01-20 19:19:44.532 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:19:44.535 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 229.2149ms
2025-01-20 19:19:44.537 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:19:44.539 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 247.5346ms
2025-01-20 19:19:55.192 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 19:19:55.196 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 4.2505ms
2025-01-20 19:19:55.223 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 19:19:55.228 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 5.102ms
2025-01-20 19:19:55.567 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 19:19:55.609 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.8125ms
2025-01-20 19:20:26.939 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 107
2025-01-20 19:20:26.961 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:20:26.962 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:20:26.964 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:20:26.965 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:20:26.998 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:20:27.148 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:20:27.384 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 19:20:27.408 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:20:27.453 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 19:20:27.459 +02:00 [INF] User registered successfully: asd
2025-01-20 19:20:27.461 +02:00 [INF] User registered successfully.
2025-01-20 19:20:27.462 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 462.1884ms.
2025-01-20 19:20:27.465 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 19:20:27.467 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 498.0078ms
2025-01-20 19:20:27.470 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:20:27.471 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 531.7613ms
2025-01-20 19:20:59.101 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 54
2025-01-20 19:20:59.105 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:20:59.106 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:20:59.108 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:20:59.111 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 19:20:59.147 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 19:20:59.157 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 19:20:59.316 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 19:20:59.323 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 19:20:59.329 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 19:20:59.332 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 182.1628ms.
2025-01-20 19:20:59.337 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 19:20:59.339 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 225.5694ms
2025-01-20 19:20:59.341 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 19:20:59.343 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 241.5688ms
2025-01-20 19:21:33.607 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - null 0
2025-01-20 19:21:33.628 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:21:33.629 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:21:33.630 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 19:21:33.633 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:21:33.634 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 19:21:33.667 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 19:21:33.669 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-20 19:21:33.673 +02:00 [INF] Received request to fetch user by token.
2025-01-20 19:21:33.674 +02:00 [INF] Parsing token...
2025-01-20 19:21:33.676 +02:00 [INF] Attempting to retrieve user with username: asd and email: as@gmail.com
2025-01-20 19:21:33.686 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 19:21:33.692 +02:00 [INF] User successfully found: asd
2025-01-20 19:21:33.696 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-20T17:21:33.6960943Z"
2025-01-20 19:21:33.708 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 19:21:33.712 +02:00 [WRN] Gift with ID 1 not found at "2025-01-20T17:21:33.7122460Z"
2025-01-20 19:24:14.225 +02:00 [INF] Starting up the application
2025-01-20 19:24:17.430 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 19:24:19.782 +02:00 [INF] Executed DbCommand (91ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 19:24:19.930 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:24:20.317 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 19:24:20.323 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 19:24:20.325 +02:00 [INF] Hosting environment: Development
2025-01-20 19:24:20.327 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 19:24:21.638 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 19:24:21.948 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 317.3643ms
2025-01-20 19:24:21.966 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 19:24:21.976 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 8.888ms
2025-01-20 19:24:22.390 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 19:24:22.683 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 292.7833ms
2025-01-20 19:24:41.999 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - null 0
2025-01-20 19:24:42.009 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:24:42.011 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:24:42.015 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 19:24:42.053 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 19:24:42.275 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:24:42.311 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 19:24:42.508 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 19:24:42.517 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-20 19:24:42.521 +02:00 [INF] Received request to fetch user by token.
2025-01-20 19:24:42.522 +02:00 [INF] Parsing token...
2025-01-20 19:24:42.524 +02:00 [INF] Attempting to retrieve user with username: asd and email: as@gmail.com
2025-01-20 19:24:42.662 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 19:24:42.691 +02:00 [INF] User successfully found: asd
2025-01-20 19:24:42.697 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-20T17:24:42.6973145Z"
2025-01-20 19:24:42.717 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 19:24:42.722 +02:00 [WRN] Gift with ID 1 not found at "2025-01-20T17:24:42.7221410Z"
2025-01-20 19:30:13.340 +02:00 [INF] Starting up the application
2025-01-20 19:30:16.508 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 19:30:19.091 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 19:30:19.270 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:30:19.793 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 19:30:19.850 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 19:30:19.853 +02:00 [INF] Hosting environment: Development
2025-01-20 19:30:19.855 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 19:30:20.627 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 19:30:21.020 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 399.0055ms
2025-01-20 19:30:21.043 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 19:30:21.052 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 8.8269ms
2025-01-20 19:30:21.241 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 19:30:21.547 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 306.2179ms
2025-01-20 19:30:47.271 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - null 0
2025-01-20 19:30:47.281 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:30:47.283 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:30:47.287 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 19:30:47.328 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 19:30:47.595 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:30:47.636 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 19:30:47.817 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 19:30:47.823 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-20 19:30:47.828 +02:00 [INF] Received request to fetch user by token.
2025-01-20 19:30:47.830 +02:00 [INF] Parsing token...
2025-01-20 19:30:47.832 +02:00 [INF] Attempting to retrieve user with username: asd and email: as@gmail.com
2025-01-20 19:30:47.969 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 19:30:47.999 +02:00 [INF] User successfully found: asd
2025-01-20 19:30:48.003 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-20T17:30:48.0035507Z"
2025-01-20 19:30:48.021 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 19:30:48.026 +02:00 [WRN] Gift with ID 1 not found at "2025-01-20T17:30:48.0262176Z"
2025-01-20 19:39:14.366 +02:00 [INF] Starting up the application
2025-01-20 19:39:17.430 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 19:39:19.657 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 19:39:19.813 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:39:20.230 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 19:39:20.236 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 19:39:20.238 +02:00 [INF] Hosting environment: Development
2025-01-20 19:39:20.240 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 19:39:21.101 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 19:39:21.490 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 395.1178ms
2025-01-20 19:39:21.512 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 19:39:21.523 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.617ms
2025-01-20 19:39:21.738 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 19:39:22.048 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 310.2254ms
2025-01-20 19:43:08.341 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - null 0
2025-01-20 19:43:08.353 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:43:08.355 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:43:08.358 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 19:43:08.397 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 19:43:08.674 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:43:08.720 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 19:43:08.898 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 19:43:08.907 +02:00 [INF] Starting AddToBasketAsync with GiftId: 1 and Quantity: 1
2025-01-20 19:43:08.909 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 19:43:08.913 +02:00 [INF] Received request to fetch user by token.
2025-01-20 19:43:08.915 +02:00 [INF] Parsing token...
2025-01-20 19:43:08.917 +02:00 [INF] Attempting to retrieve user with username: asd and email: as@gmail.com
2025-01-20 19:43:09.046 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 19:43:09.085 +02:00 [INF] User successfully found: asd
2025-01-20 19:43:09.088 +02:00 [INF] User with Id: 411937a9-48d6-4ebb-b3eb-86447a22cf46 successfully retrieved.
2025-01-20 19:43:09.094 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-20T17:43:09.0941172Z"
2025-01-20 19:43:09.114 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 19:43:09.120 +02:00 [WRN] Gift with ID 1 not found at "2025-01-20T17:43:09.1205223Z"
2025-01-20 19:43:09.122 +02:00 [WRN] Gift with Id: 1 not found.
2025-01-20 19:43:09.133 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.NotFoundObjectResult in 226.4678ms.
2025-01-20 19:43:09.147 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-01-20 19:43:09.157 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 428.7176ms
2025-01-20 19:43:09.160 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:43:09.163 +02:00 [INF] Outgoing Response: 404
2025-01-20 19:43:09.171 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=1&quantity=1 - 404 null text/plain; charset=utf-8 829.6024ms
2025-01-20 19:43:18.928 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - null 0
2025-01-20 19:43:18.936 +02:00 [INF] CORS policy execution failed.
2025-01-20 19:43:18.950 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 19:43:18.957 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 19:43:18.962 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:43:18.964 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 19:43:19.042 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 19:43:19.045 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 19:43:19.047 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 19:43:19.048 +02:00 [INF] Received request to fetch user by token.
2025-01-20 19:43:19.049 +02:00 [INF] Parsing token...
2025-01-20 19:43:19.050 +02:00 [INF] Attempting to retrieve user with username: asd and email: as@gmail.com
2025-01-20 19:43:19.073 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 19:43:19.078 +02:00 [INF] User successfully found: asd
2025-01-20 19:43:19.080 +02:00 [INF] User with Id: 411937a9-48d6-4ebb-b3eb-86447a22cf46 successfully retrieved.
2025-01-20 19:43:19.082 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T17:43:19.0820945Z"
2025-01-20 19:43:19.087 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 19:43:19.134 +02:00 [INF] Gift with Id: 3 successfully retrieved.
2025-01-20 19:43:19.139 +02:00 [INF] Starting to add Gift 3 (Quantity: 1) to User 411937a9-48d6-4ebb-b3eb-86447a22cf46's basket
2025-01-20 19:43:19.167 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 19:43:19.255 +02:00 [INF] Created new UserGift entry for Gift 3 (Quantity: 1) and User 411937a9-48d6-4ebb-b3eb-86447a22cf46
2025-01-20 19:43:19.436 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 19:43:19.454 +02:00 [INF] Successfully saved changes to database for Gift 3 and User 411937a9-48d6-4ebb-b3eb-86447a22cf46 (Quantity: 1)
2025-01-20 19:43:19.459 +02:00 [INF] Completed AddToBasketAsync for User: 411937a9-48d6-4ebb-b3eb-86447a22cf46 and GiftId: 3 with Quantity: 1
2025-01-20 19:43:19.461 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 416.273ms.
2025-01-20 19:43:19.464 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 19:43:19.467 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 500.0685ms
2025-01-20 19:43:19.469 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 19:43:19.470 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:43:19.473 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3&quantity=1 - 200 null text/plain; charset=utf-8 544.0894ms
2025-01-20 19:43:27.425 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 19:43:27.434 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 19:43:27.445 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 19:43:27.667 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 19:43:27.671 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T17:43:27.6715066Z"
2025-01-20 19:43:27.693 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 19:43:27.702 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T17:43:27.7023309Z"
2025-01-20 19:43:27.704 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T17:43:27.7038530Z"
2025-01-20 19:43:27.705 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T17:43:27.7054282Z"
2025-01-20 19:43:27.707 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 37.5105ms.
2025-01-20 19:43:27.709 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:43:27.782 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 331.5172ms
2025-01-20 19:43:27.784 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 19:43:27.787 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 361.6933ms
2025-01-20 19:43:53.258 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - null null
2025-01-20 19:43:53.270 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:53.275 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 204 null null 18.518ms
2025-01-20 19:43:53.301 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 19:43:53.305 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:53.307 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:53.315 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:43:53.369 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:43:53.403 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 83.5677ms
2025-01-20 19:43:53.405 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:53.407 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 106.4882ms
2025-01-20 19:43:54.964 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 19:43:54.969 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:54.973 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:54.975 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:43:54.990 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:43:54.993 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 13.6366ms
2025-01-20 19:43:54.995 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:55.001 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 36.147ms
2025-01-20 19:43:55.711 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 19:43:55.716 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:55.718 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:55.719 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:43:55.723 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:43:55.725 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 2.9678ms
2025-01-20 19:43:55.727 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:55.730 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 19.2445ms
2025-01-20 19:43:56.324 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 19:43:56.329 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:56.331 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:56.333 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:43:56.337 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:43:56.340 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.9471ms
2025-01-20 19:43:56.342 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:56.343 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 18.9216ms
2025-01-20 19:43:57.300 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 19:43:57.305 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:57.306 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:57.307 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:43:57.312 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:43:57.316 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 5.5826ms
2025-01-20 19:43:57.318 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:57.320 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 19.8314ms
2025-01-20 19:43:57.600 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 19:43:57.605 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:43:57.607 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:57.609 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:43:57.614 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:43:57.617 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.4846ms
2025-01-20 19:43:57.620 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:43:57.621 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 20.7494ms
2025-01-20 19:44:09.519 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=asc - null null
2025-01-20 19:44:09.523 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:09.525 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=asc - 204 null null 5.8718ms
2025-01-20 19:44:09.532 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=asc - application/json null
2025-01-20 19:44:09.536 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:09.537 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:09.539 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:44:09.543 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:44:09.545 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.4437ms
2025-01-20 19:44:09.549 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:09.551 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=asc - 400 null application/problem+json; charset=utf-8 19.4894ms
2025-01-20 19:44:10.974 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 19:44:10.980 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:10.983 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 8.5234ms
2025-01-20 19:44:10.989 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 19:44:10.993 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:10.996 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 19:44:11.006 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 19:44:11.014 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 19:44:11.044 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 19:44:11.048 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 19:44:11.052 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:11.054 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:11.168 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 19:44:11.174 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:11.176 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:11.177 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:11.180 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 132.2919ms.
2025-01-20 19:44:11.182 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:44:11.188 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 170.4938ms
2025-01-20 19:44:11.191 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 19:44:11.193 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:44:11.194 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 205.2577ms
2025-01-20 19:44:15.062 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - null null
2025-01-20 19:44:15.068 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 19:44:15.069 +02:00 [WRN] Missing Authorization Header
2025-01-20 19:44:15.070 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 8.7525ms
2025-01-20 19:44:15.366 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 19:44:15.372 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:15.374 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 19:44:15.384 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 19:44:15.387 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 19:44:15.428 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 19:44:15.434 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 19:44:15.436 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:15.437 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:15.442 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 19:44:15.449 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:15.451 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:15.452 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 19:44:15.453 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.5044ms.
2025-01-20 19:44:15.456 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:44:15.460 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 68.8011ms
2025-01-20 19:44:15.467 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 19:44:15.469 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:44:15.472 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 105.9235ms
2025-01-20 19:44:16.427 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 19:44:16.433 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:16.435 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:44:16.442 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 19:44:16.478 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 19:44:16.483 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:44:16.4829704Z"
2025-01-20 19:44:16.485 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:44:16.4857136Z"
2025-01-20 19:44:16.489 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:44:16.4890212Z"
2025-01-20 19:44:16.554 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 19:44:16.560 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:44:16.5603946Z"
2025-01-20 19:44:16.562 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:44:16.5622135Z"
2025-01-20 19:44:16.564 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:44:16.5640286Z"
2025-01-20 19:44:16.565 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 83.646ms.
2025-01-20 19:44:16.568 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:44:16.575 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 127.9557ms
2025-01-20 19:44:16.578 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:44:16.580 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 152.6371ms
2025-01-20 19:44:18.790 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 19:44:18.795 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:18.797 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.5322ms
2025-01-20 19:44:18.803 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 19:44:18.806 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:18.807 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 19:44:18.813 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 19:44:18.820 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 19:44:18.848 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 19:44:18.853 +02:00 [INF] Fetching all donators.
2025-01-20 19:44:18.855 +02:00 [INF] Fetching all donators.
2025-01-20 19:44:18.865 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 19:44:18.881 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 19:44:18.883 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.4808ms.
2025-01-20 19:44:18.885 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:44:18.889 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 65.624ms
2025-01-20 19:44:18.892 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 19:44:18.894 +02:00 [INF] Outgoing Response: 200
2025-01-20 19:44:18.895 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 91.7752ms
2025-01-20 19:44:25.414 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:44:25.418 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:25.421 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.6957ms
2025-01-20 19:44:25.430 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 19:44:25.434 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:25.437 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:25.439 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:44:25.443 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:44:25.447 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.7638ms
2025-01-20 19:44:25.449 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:25.451 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 20.553ms
2025-01-20 19:44:27.928 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:44:27.968 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:27.970 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:44:27.974 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:44:27.976 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 2.9509ms
2025-01-20 19:44:27.978 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:27.981 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 52.8965ms
2025-01-20 19:44:28.217 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 19:44:28.221 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:44:28.224 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:28.226 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:44:28.231 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:44:28.234 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.3994ms
2025-01-20 19:44:28.237 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:44:28.240 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 23.3686ms
2025-01-20 19:47:54.960 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 19:47:54.980 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:47:54.982 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 19:47:55.019 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 19:47:55.022 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:47:55.0224333Z"
2025-01-20 19:47:55.023 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:47:55.0237779Z"
2025-01-20 19:47:55.025 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:47:55.0250370Z"
2025-01-20 19:47:55.039 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 19:47:55.045 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:47:55.0456160Z"
2025-01-20 19:47:55.047 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:47:55.0471781Z"
2025-01-20 19:47:55.049 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:47:55.0492192Z"
2025-01-20 19:47:55.050 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 28.1044ms.
2025-01-20 19:47:55.054 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:47:55.056 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 71.0752ms
2025-01-20 19:47:55.058 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:47:55.061 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 100.5711ms
2025-01-20 19:57:18.379 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:57:18.401 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:18.402 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:57:18.406 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:57:18.408 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.4804ms
2025-01-20 19:57:18.410 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:18.413 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 33.9331ms
2025-01-20 19:57:18.895 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:57:18.926 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:57:18.929 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 33.826ms
2025-01-20 19:57:18.936 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 19:57:18.939 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:57:18.946 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 17:45:05', Current time (UTC): '20/01/2025 17:57:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 19:57:19.001 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 17:45:05', Current time (UTC): '20/01/2025 17:57:18'.
2025-01-20 19:57:19.004 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:19.006 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:57:19.011 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:57:19.013 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.4184ms
2025-01-20 19:57:19.016 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:19.018 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 81.3309ms
2025-01-20 19:57:24.570 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 19:57:24.576 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 17:50:59', Current time (UTC): '20/01/2025 17:57:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 19:57:24.599 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 17:50:59', Current time (UTC): '20/01/2025 17:57:24'.
2025-01-20 19:57:24.602 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:57:24.604 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 19:57:24.645 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 19:57:24.647 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:57:24.6478726Z"
2025-01-20 19:57:24.649 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:57:24.6491783Z"
2025-01-20 19:57:24.650 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T17:57:24.6504429Z"
2025-01-20 19:57:24.685 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 19:57:24.690 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:57:24.6903460Z"
2025-01-20 19:57:24.691 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:57:24.6915175Z"
2025-01-20 19:57:24.693 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T17:57:24.6930361Z"
2025-01-20 19:57:24.694 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 46.5313ms.
2025-01-20 19:57:24.697 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 19:57:24.699 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 90.4731ms
2025-01-20 19:57:24.701 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 19:57:24.703 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 132.321ms
2025-01-20 19:57:37.255 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:57:37.258 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:37.260 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:57:37.266 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:57:37.269 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 5.3437ms
2025-01-20 19:57:37.271 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:37.272 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 17.7903ms
2025-01-20 19:57:37.497 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 19:57:37.501 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:57:37.503 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 5.972ms
2025-01-20 19:57:37.510 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 19:57:37.518 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:57:37.521 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 17:45:05', Current time (UTC): '20/01/2025 17:57:37'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 19:57:37.530 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 17:45:05', Current time (UTC): '20/01/2025 17:57:37'.
2025-01-20 19:57:37.539 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:37.541 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 19:57:37.545 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 19:57:37.548 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.835ms
2025-01-20 19:57:37.550 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 19:57:37.553 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 42.9868ms
2025-01-20 19:59:02.983 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 19:59:03.009 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:59:03.011 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 28.201ms
2025-01-20 19:59:03.039 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 99
2025-01-20 19:59:03.042 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:59:03.044 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:59:03.053 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:59:03.150 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:59:03.333 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:59:03.372 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 19:59:03.382 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:59:03.421 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 19:59:03.427 +02:00 [INF] User registered successfully: afg
2025-01-20 19:59:03.429 +02:00 [INF] User registered successfully.
2025-01-20 19:59:03.430 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 277.987ms.
2025-01-20 19:59:03.432 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 19:59:03.434 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 377.2024ms
2025-01-20 19:59:03.436 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:59:03.439 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 399.4678ms
2025-01-20 19:59:08.084 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 19:59:08.088 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:59:08.089 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 4.5787ms
2025-01-20 19:59:08.093 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 99
2025-01-20 19:59:08.097 +02:00 [INF] CORS policy execution successful.
2025-01-20 19:59:08.100 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:59:08.102 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 19:59:08.130 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 19:59:08.275 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 19:59:08.287 +02:00 [ERR] Registration failed: Username 'afg' is already taken.
2025-01-20 19:59:08.455 +02:00 [ERR] Error during registration for user afg.
System.Exception: Registration failed: Username 'afg' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 19:59:08.642 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'afg' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 19:59:08.646 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 513.1458ms.
2025-01-20 19:59:08.650 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 19:59:08.653 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 548.1998ms
2025-01-20 19:59:08.658 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 19:59:08.663 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 569.6313ms
2025-01-20 20:02:19.943 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 20:02:19.965 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:02:19.967 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 23.693ms
2025-01-20 20:02:19.989 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 20:02:19.993 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:02:19.995 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 20:02:20.002 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 20:02:20.043 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 20:02:20.068 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 20:02:20.266 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 20:02:20.308 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 20:02:20.341 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 20:02:20.353 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 307.2192ms.
2025-01-20 20:02:20.355 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 20:02:20.371 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 365.1278ms
2025-01-20 20:02:20.373 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 20:02:20.375 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 386.1444ms
2025-01-20 20:02:23.277 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 20:02:23.286 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:02:23.288 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 11.5657ms
2025-01-20 20:02:23.294 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 20:02:23.297 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:02:23.299 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:02:23.301 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:02:23.306 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 20:02:23.308 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.3954ms
2025-01-20 20:02:23.312 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:02:23.314 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 20.2661ms
2025-01-20 20:02:49.835 +02:00 [INF] Starting up the application
2025-01-20 20:02:52.776 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:02:54.954 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:02:55.120 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:02:55.505 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:02:55.512 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:02:55.514 +02:00 [INF] Hosting environment: Development
2025-01-20 20:02:55.515 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:02:57.002 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:02:57.350 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 359.2704ms
2025-01-20 20:02:57.370 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:02:57.381 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.9965ms
2025-01-20 20:02:57.571 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:02:57.893 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 322.3941ms
2025-01-20 20:03:08.952 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 20:03:08.962 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:03:08.968 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 15.5177ms
2025-01-20 20:03:08.974 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 20:03:08.979 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:03:08.981 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:03:09.015 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 20:03:09.233 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 20:03:09.265 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 20:03:09.600 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 20:03:09.606 +02:00 [INF] Fetching all donators.
2025-01-20 20:03:09.609 +02:00 [INF] Fetching all donators.
2025-01-20 20:03:09.712 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 20:03:09.750 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 20:03:09.759 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 150.1632ms.
2025-01-20 20:03:09.774 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:03:09.843 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 567.9788ms
2025-01-20 20:03:09.846 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 20:03:09.848 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:03:09.856 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 882.1935ms
2025-01-20 20:03:11.048 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 20:03:11.054 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 20:03:11.055 +02:00 [WRN] Missing Authorization Header
2025-01-20 20:03:11.056 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 8.7901ms
2025-01-20 20:03:11.783 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 20:03:11.790 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:03:11.795 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 20:03:11.810 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 20:03:11.813 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 20:03:11.956 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 20:03:11.962 +02:00 [INF] Fetching all donators.
2025-01-20 20:03:11.964 +02:00 [INF] Fetching all donators.
2025-01-20 20:03:12.021 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 20:03:12.035 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 20:03:12.037 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.4647ms.
2025-01-20 20:03:12.041 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:03:12.046 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 227.766ms
2025-01-20 20:03:12.053 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 20:03:12.057 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:03:12.066 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 282.7788ms
2025-01-20 20:03:13.208 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 20:03:13.219 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:03:13.221 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 12.8798ms
2025-01-20 20:03:13.229 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 20:03:13.233 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:03:13.240 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:03:13.257 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:03:13.279 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 20:03:13.308 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 47.2689ms
2025-01-20 20:03:13.310 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:03:13.312 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 83.5778ms
2025-01-20 20:08:35.613 +02:00 [INF] Starting up the application
2025-01-20 20:08:39.673 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:08:42.644 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:08:42.826 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:08:43.307 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:08:43.314 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:08:43.316 +02:00 [INF] Hosting environment: Development
2025-01-20 20:08:43.317 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:08:45.001 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:08:45.544 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 550.131ms
2025-01-20 20:08:45.577 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:08:45.589 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 11.934ms
2025-01-20 20:08:45.795 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:08:46.054 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 259.0224ms
2025-01-20 20:08:47.253 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:08:47.264 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:08:47.269 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 15.5099ms
2025-01-20 20:08:47.276 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 100
2025-01-20 20:08:47.280 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:08:47.283 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:08:47.478 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:08:47.521 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:08:47.800 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:09:27.645 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:09:27.893 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:09:35.996 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:09:46.012 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:09:47.879 +02:00 [INF] User registered successfully: yj
2025-01-20 20:09:56.149 +02:00 [INF] User registered successfully.
2025-01-20 20:09:59.384 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 71576.7542ms.
2025-01-20 20:09:59.401 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:09:59.411 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 71880.2008ms
2025-01-20 20:09:59.415 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:10:03.443 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 76167.0141ms
2025-01-20 20:10:08.612 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:10:08.618 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:10:08.620 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 7.8793ms
2025-01-20 20:10:08.626 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 100
2025-01-20 20:10:08.629 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:10:08.633 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:10:08.636 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:10:08.683 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:10:18.065 +02:00 [INF] Starting up the application
2025-01-20 20:10:21.444 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:10:23.759 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:10:23.925 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:10:24.320 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:10:24.326 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:10:24.328 +02:00 [INF] Hosting environment: Development
2025-01-20 20:10:24.330 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:10:25.363 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:10:25.789 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 435.7377ms
2025-01-20 20:10:25.812 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:10:25.822 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.5619ms
2025-01-20 20:10:26.021 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:10:26.308 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 287.264ms
2025-01-20 20:10:46.479 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:10:46.493 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:10:46.498 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 18.2249ms
2025-01-20 20:10:46.520 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 100
2025-01-20 20:10:46.525 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:10:46.528 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:10:46.651 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:10:46.688 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:10:46.895 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:10:47.150 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:10:47.374 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:10:47.397 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:10:47.435 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:10:47.445 +02:00 [INF] User registered successfully: ytu
2025-01-20 20:10:47.448 +02:00 [INF] User registered successfully.
2025-01-20 20:10:47.456 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 553.908ms.
2025-01-20 20:10:47.473 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:10:47.482 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 784.8006ms
2025-01-20 20:10:47.485 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:10:47.494 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 973.7015ms
2025-01-20 20:10:50.838 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 100
2025-01-20 20:10:50.845 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:10:50.850 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:10:50.852 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:10:50.900 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:10:51.079 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:10:51.091 +02:00 [ERR] Registration failed: Username 'ytu' is already taken.
2025-01-20 20:10:51.256 +02:00 [ERR] Error during registration for user ytu.
System.Exception: Registration failed: Username 'ytu' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 20:10:51.491 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'ytu' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 20:10:51.497 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 595.277ms.
2025-01-20 20:10:51.500 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 20:10:51.502 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 644.671ms
2025-01-20 20:10:51.504 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:10:51.507 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 668.8534ms
2025-01-20 20:19:14.512 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:19:14.522 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:19:14.523 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 21.0982ms
2025-01-20 20:19:14.548 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 88
2025-01-20 20:19:14.551 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:19:14.555 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:19:14.558 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:19:14.606 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:19:14.610 +02:00 [ERR] Registration failed: Passwords must have at least one lowercase ('a'-'z').
2025-01-20 20:19:14.684 +02:00 [ERR] Error during registration for user gh.
System.Exception: Registration failed: Passwords must have at least one lowercase ('a'-'z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 20:19:14.815 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Passwords must have at least one lowercase ('a'-'z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 20:19:14.819 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 210.1817ms.
2025-01-20 20:19:14.822 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 20:19:14.824 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 261.9001ms
2025-01-20 20:19:14.829 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:19:14.831 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 283.2606ms
2025-01-20 20:19:37.184 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:19:37.188 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:19:37.190 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 6.4829ms
2025-01-20 20:19:37.200 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 88
2025-01-20 20:19:37.204 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:19:37.206 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:19:37.208 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:19:37.242 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:19:37.244 +02:00 [ERR] Registration failed: Passwords must have at least one lowercase ('a'-'z').
2025-01-20 20:19:37.302 +02:00 [ERR] Error during registration for user gh.
System.Exception: Registration failed: Passwords must have at least one lowercase ('a'-'z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 20:19:37.420 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Passwords must have at least one lowercase ('a'-'z').
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 39
2025-01-20 20:19:37.424 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 180.2543ms.
2025-01-20 20:19:37.428 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 20:19:37.430 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 216.7693ms
2025-01-20 20:19:37.432 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:19:37.435 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 234.8586ms
2025-01-20 20:19:51.321 +02:00 [INF] Starting up the application
2025-01-20 20:19:54.614 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:19:56.822 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:19:56.985 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:19:57.376 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:19:57.382 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:19:57.384 +02:00 [INF] Hosting environment: Development
2025-01-20 20:19:57.386 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:19:58.792 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:20:59.312 +02:00 [INF] Starting up the application
2025-01-20 20:21:02.396 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:21:04.645 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:21:04.801 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:21:05.198 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:21:05.205 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:21:05.207 +02:00 [INF] Hosting environment: Development
2025-01-20 20:21:05.208 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:21:06.121 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:21:06.478 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 361.8747ms
2025-01-20 20:21:06.500 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:21:06.515 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 14.6452ms
2025-01-20 20:21:06.703 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:21:07.021 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 318.3907ms
2025-01-20 20:21:43.968 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:21:43.978 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:21:43.982 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 14.3187ms
2025-01-20 20:21:44.004 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 99
2025-01-20 20:21:44.011 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:21:44.013 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:21:44.133 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:21:44.177 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:21:44.406 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:22:08.097 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:22:08.367 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:22:22.189 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:22:35.482 +02:00 [INF] Executed DbCommand (53ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:22:58.963 +02:00 [INF] User registered successfully: asder
2025-01-20 20:23:06.630 +02:00 [INF] User registered successfully.
2025-01-20 20:23:12.414 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 88000.8555ms.
2025-01-20 20:23:12.429 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:23:12.440 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 88253.6885ms
2025-01-20 20:23:12.443 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:23:16.169 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 92165.2995ms
2025-01-20 20:25:28.255 +02:00 [INF] Starting up the application
2025-01-20 20:25:31.370 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:25:33.578 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:25:33.745 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:25:34.147 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:25:34.186 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:25:34.189 +02:00 [INF] Hosting environment: Development
2025-01-20 20:25:34.190 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:25:34.961 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:25:35.352 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 403.1234ms
2025-01-20 20:25:35.377 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:25:35.387 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.4018ms
2025-01-20 20:25:35.582 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:25:35.895 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 312.6843ms
2025-01-20 20:26:39.054 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:26:39.071 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:26:39.076 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 21.4288ms
2025-01-20 20:26:39.099 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 97
2025-01-20 20:26:39.105 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:26:39.108 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:26:39.247 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:26:39.283 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:26:39.499 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:26:39.755 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:26:39.983 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:26:40.015 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:26:40.052 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:26:40.058 +02:00 [INF] User registered successfully: guk
2025-01-20 20:26:40.060 +02:00 [INF] User registered successfully.
2025-01-20 20:26:40.067 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 561.5803ms.
2025-01-20 20:26:40.081 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:26:40.090 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 797.7348ms
2025-01-20 20:26:40.093 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:26:40.101 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 1002.2903ms
2025-01-20 20:31:58.676 +02:00 [INF] Starting up the application
2025-01-20 20:32:01.864 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:32:04.175 +02:00 [INF] Executed DbCommand (90ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:32:04.352 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:32:04.768 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:32:04.775 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:32:04.777 +02:00 [INF] Hosting environment: Development
2025-01-20 20:32:04.779 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:32:06.173 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:32:06.541 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 376.7073ms
2025-01-20 20:32:06.568 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:32:06.577 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.5258ms
2025-01-20 20:32:06.805 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:32:07.153 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 348.2867ms
2025-01-20 20:32:42.727 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:32:42.740 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:32:42.746 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 18.6348ms
2025-01-20 20:32:42.755 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 95
2025-01-20 20:32:42.761 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:32:42.764 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:32:42.907 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:32:42.942 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:32:43.156 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:32:43.319 +02:00 [ERR] Registration failed: Username 'עמכ' is invalid, can only contain letters or digits.
2025-01-20 20:32:43.437 +02:00 [ERR] Error during registration for user עמכ.
System.Exception: Registration failed: Username 'עמכ' is invalid, can only contain letters or digits.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 20:32:43.615 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'עמכ' is invalid, can only contain letters or digits.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 40
2025-01-20 20:32:43.626 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 462.4296ms.
2025-01-20 20:32:43.638 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 20:32:43.651 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 699.0353ms
2025-01-20 20:32:43.653 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:32:43.657 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 901.4592ms
2025-01-20 20:33:36.829 +02:00 [INF] Starting up the application
2025-01-20 20:33:40.069 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:33:42.251 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:33:42.410 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:33:42.836 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:33:42.843 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:33:42.846 +02:00 [INF] Hosting environment: Development
2025-01-20 20:33:42.848 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:33:43.739 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:33:44.258 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 529.0892ms
2025-01-20 20:33:44.311 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:33:44.322 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.989ms
2025-01-20 20:33:44.524 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:33:44.865 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 340.5232ms
2025-01-20 20:34:09.968 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 107
2025-01-20 20:34:09.979 +02:00 [INF] CORS policy execution failed.
2025-01-20 20:34:09.981 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 20:34:09.987 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:34:10.132 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:34:10.170 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:34:10.413 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:34:10.760 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:34:10.989 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:34:11.016 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:34:11.053 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:34:11.060 +02:00 [INF] User registered successfully.
2025-01-20 20:34:11.069 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 645.8227ms.
2025-01-20 20:34:11.085 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:34:11.098 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 915.75ms
2025-01-20 20:34:11.101 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:34:11.113 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 1144.4985ms
2025-01-20 20:34:35.700 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:34:35.711 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:34:35.715 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 14.7184ms
2025-01-20 20:34:35.740 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 101
2025-01-20 20:34:35.744 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:34:35.749 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:34:35.752 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:34:35.806 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:34:35.968 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:34:35.981 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:34:35.988 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:34:36.026 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:34:36.031 +02:00 [INF] User registered successfully.
2025-01-20 20:34:36.032 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 223.7239ms.
2025-01-20 20:34:36.036 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:34:36.038 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 281.6702ms
2025-01-20 20:34:36.040 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:34:36.042 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 301.8331ms
2025-01-20 20:37:49.904 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:37:49.916 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:37:49.918 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 13.8523ms
2025-01-20 20:37:49.943 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 96
2025-01-20 20:37:49.948 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:37:49.953 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:37:49.954 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:37:50.000 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:37:50.308 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'טאח' is invalid, can only contain letters or digits.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 86
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 40
2025-01-20 20:37:50.353 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 350.0582ms.
2025-01-20 20:37:50.356 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 20:37:50.358 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 401.3931ms
2025-01-20 20:37:50.361 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:37:50.363 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 420.0143ms
2025-01-20 20:38:07.924 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 20:38:07.930 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:07.931 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 7.2025ms
2025-01-20 20:38:07.936 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 44
2025-01-20 20:38:07.940 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:07.941 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 20:38:07.952 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 20:38:07.988 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 20:38:08.021 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 20:38:08.295 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 20:38:08.377 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 20:38:08.445 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 20:38:08.450 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 459.9152ms.
2025-01-20 20:38:08.453 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 20:38:08.478 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 521.9247ms
2025-01-20 20:38:08.481 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 20:38:08.483 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 546.6265ms
2025-01-20 20:38:19.313 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 20:38:19.318 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:19.320 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 20:38:19.327 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 20:38:19.586 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 20:38:19.594 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T18:38:19.5942961Z"
2025-01-20 20:38:19.617 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 20:38:19.666 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T18:38:19.6667534Z"
2025-01-20 20:38:19.669 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T18:38:19.6691965Z"
2025-01-20 20:38:19.671 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T18:38:19.6711215Z"
2025-01-20 20:38:19.673 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 83.9577ms.
2025-01-20 20:38:19.675 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:38:19.713 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 382.393ms
2025-01-20 20:38:19.715 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 20:38:19.718 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 406.0445ms
2025-01-20 20:38:21.769 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 20:38:21.773 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:21.775 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:38:21.787 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:38:21.821 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 20:38:21.825 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T18:38:21.8254285Z"
2025-01-20 20:38:21.829 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T18:38:21.8291010Z"
2025-01-20 20:38:21.838 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T18:38:21.8383761Z"
2025-01-20 20:38:21.857 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 20:38:21.863 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T18:38:21.8638186Z"
2025-01-20 20:38:21.866 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T18:38:21.8668267Z"
2025-01-20 20:38:21.868 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 44.9214ms.
2025-01-20 20:38:21.871 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 20:38:21.874 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 82.9537ms
2025-01-20 20:38:21.876 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:38:21.879 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 110.3423ms
2025-01-20 20:38:21.887 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 20:38:21.893 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:21.897 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 9.4173ms
2025-01-20 20:38:21.903 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 20:38:21.906 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:21.908 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 20:38:22.040 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 20:38:22.049 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 20:38:22.085 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 20:38:22.090 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 20:38:22.092 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 20:38:22.096 +02:00 [INF] Received request to fetch user by token.
2025-01-20 20:38:22.097 +02:00 [INF] Parsing token...
2025-01-20 20:38:22.100 +02:00 [INF] Attempting to retrieve user with username: akjh and email: cdst@ghtfjh
2025-01-20 20:38:22.137 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 20:38:22.144 +02:00 [INF] User successfully found: akjh
2025-01-20 20:38:22.146 +02:00 [INF] User with Id: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 successfully retrieved.
2025-01-20 20:38:22.148 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T18:38:22.1484545Z"
2025-01-20 20:38:22.153 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 20:38:22.159 +02:00 [INF] Gift with Id: 5 successfully retrieved.
2025-01-20 20:38:22.164 +02:00 [INF] Starting to add Gift 5 (Quantity: 1) to User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584's basket
2025-01-20 20:38:22.180 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 20:38:22.238 +02:00 [INF] Created new UserGift entry for Gift 5 (Quantity: 1) and User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:22.281 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 20:38:22.286 +02:00 [INF] Successfully saved changes to database for Gift 5 and User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 (Quantity: 1)
2025-01-20 20:38:22.288 +02:00 [INF] Completed AddToBasketAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 and GiftId: 5 with Quantity: 1
2025-01-20 20:38:22.290 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 202.998ms.
2025-01-20 20:38:22.294 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:38:22.295 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 243.5011ms
2025-01-20 20:38:22.298 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 20:38:22.301 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:38:22.303 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 200 null text/plain; charset=utf-8 400.2316ms
2025-01-20 20:38:23.303 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/6 - null null
2025-01-20 20:38:23.307 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:23.310 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:38:23.313 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:38:23.366 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 20:38:23.368 +02:00 [INF] Starting GetByIdAsync with ID 6 at "2025-01-20T18:38:23.3689059Z"
2025-01-20 20:38:23.371 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-20T18:38:23.3714918Z"
2025-01-20 20:38:23.373 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-20T18:38:23.3730391Z"
2025-01-20 20:38:23.379 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 20:38:23.383 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 6 at "2025-01-20T18:38:23.3839123Z"
2025-01-20 20:38:23.385 +02:00 [INF] GetByIdAsync completed successfully with ID 6 at "2025-01-20T18:38:23.3854918Z"
2025-01-20 20:38:23.387 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.4383ms.
2025-01-20 20:38:23.389 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 20:38:23.391 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 74.4504ms
2025-01-20 20:38:23.393 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:38:23.396 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/6 - 200 null application/json; charset=utf-8 92.5336ms
2025-01-20 20:38:23.402 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=6 - null null
2025-01-20 20:38:23.407 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:23.408 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=6 - 204 null null 6.0108ms
2025-01-20 20:38:23.413 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=6 - application/json 2
2025-01-20 20:38:23.417 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:23.419 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 20:38:23.422 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 20:38:23.424 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 20:38:23.456 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 20:38:23.459 +02:00 [INF] Starting AddToBasketAsync with GiftId: 6 and Quantity: 1
2025-01-20 20:38:23.461 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 20:38:23.463 +02:00 [INF] Received request to fetch user by token.
2025-01-20 20:38:23.464 +02:00 [INF] Parsing token...
2025-01-20 20:38:23.465 +02:00 [INF] Attempting to retrieve user with username: akjh and email: cdst@ghtfjh
2025-01-20 20:38:23.474 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 20:38:23.481 +02:00 [INF] User successfully found: akjh
2025-01-20 20:38:23.484 +02:00 [INF] User with Id: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 successfully retrieved.
2025-01-20 20:38:23.486 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-20T18:38:23.4865749Z"
2025-01-20 20:38:23.491 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 20:38:23.496 +02:00 [INF] Gift with Id: 6 successfully retrieved.
2025-01-20 20:38:23.497 +02:00 [INF] Starting to add Gift 6 (Quantity: 1) to User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584's basket
2025-01-20 20:38:23.503 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 20:38:23.507 +02:00 [INF] Created new UserGift entry for Gift 6 (Quantity: 1) and User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:23.518 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserGifts] ([GiftId], [UserId], [GiftStatus], [Quantity])
VALUES (@p0, @p1, @p2, @p3);
2025-01-20 20:38:23.522 +02:00 [INF] Successfully saved changes to database for Gift 6 and User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 (Quantity: 1)
2025-01-20 20:38:23.524 +02:00 [INF] Completed AddToBasketAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 and GiftId: 6 with Quantity: 1
2025-01-20 20:38:23.526 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.2719ms.
2025-01-20 20:38:23.529 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:38:23.531 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 102.9135ms
2025-01-20 20:38:23.533 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 20:38:23.535 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:38:23.537 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=6 - 200 null text/plain; charset=utf-8 124.0471ms
2025-01-20 20:38:45.138 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 20:38:45.143 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:45.146 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 7.9261ms
2025-01-20 20:38:45.151 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 20:38:45.154 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:45.158 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 20:38:45.223 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 20:38:45.233 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 20:38:45.269 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 20:38:45.273 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 20:38:45.276 +02:00 [INF] Received request to get basket for user: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:45.279 +02:00 [INF] Starting to fetch basket for userId: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:45.320 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 20:38:45.331 +02:00 [INF] Successfully fetched 2 gifts for userId: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:45.346 +02:00 [INF] Serialized response: [
  {
    "UserId": "6dded86b-1ad6-4056-8ea2-a4cfbf5b9584",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 1
  },
  {
    "UserId": "6dded86b-1ad6-4056-8ea2-a4cfbf5b9584",
    "User": null,
    "GiftId": 6,
    "GiftStatus": "Draft",
    "Quantity": 1
  }
]
2025-01-20 20:38:45.350 +02:00 [INF] Completed GetBasketByUserAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:45.351 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 79.4164ms.
2025-01-20 20:38:45.353 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:38:45.356 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 120.733ms
2025-01-20 20:38:45.359 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 20:38:45.361 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:38:45.363 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 211.9473ms
2025-01-20 20:38:48.021 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5&quantity=2 - null null
2025-01-20 20:38:48.025 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:48.027 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5&quantity=2 - 204 null null 6.0484ms
2025-01-20 20:38:48.034 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5&quantity=2 - application/json 14
2025-01-20 20:38:48.039 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:48.040 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 20:38:48.042 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 20:38:48.045 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 20:38:48.073 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 20:38:48.076 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 2
2025-01-20 20:38:48.079 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 20:38:48.081 +02:00 [INF] Received request to fetch user by token.
2025-01-20 20:38:48.082 +02:00 [INF] Parsing token...
2025-01-20 20:38:48.084 +02:00 [INF] Attempting to retrieve user with username: akjh and email: cdst@ghtfjh
2025-01-20 20:38:48.091 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 20:38:48.097 +02:00 [INF] User successfully found: akjh
2025-01-20 20:38:48.098 +02:00 [INF] User with Id: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 successfully retrieved.
2025-01-20 20:38:48.100 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T18:38:48.1002493Z"
2025-01-20 20:38:48.104 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 20:38:48.108 +02:00 [INF] Gift with Id: 5 successfully retrieved.
2025-01-20 20:38:48.109 +02:00 [INF] Starting to add Gift 5 (Quantity: 2) to User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584's basket
2025-01-20 20:38:48.116 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (Size = 450), @__gift_Id_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__user_Id_0 AND [u].[GiftId] = @__gift_Id_1
2025-01-20 20:38:48.121 +02:00 [INF] Updated existing UserGift entry for Gift 5 (New Quantity: 2) and User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:48.138 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [Quantity] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 20:38:48.148 +02:00 [INF] Successfully saved changes to database for Gift 5 and User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 (Quantity: 2)
2025-01-20 20:38:48.151 +02:00 [INF] Completed AddToBasketAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 and GiftId: 5 with Quantity: 2
2025-01-20 20:38:48.153 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 76.1457ms.
2025-01-20 20:38:48.155 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:38:48.157 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 107.8754ms
2025-01-20 20:38:48.161 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 20:38:48.163 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:38:48.165 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5&quantity=2 - 200 null text/plain; charset=utf-8 130.2272ms
2025-01-20 20:38:50.490 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=6 - null null
2025-01-20 20:38:50.495 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:50.498 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=6 - 204 null null 7.7448ms
2025-01-20 20:38:50.503 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=6 - application/json null
2025-01-20 20:38:50.507 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:50.508 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 20:38:50.516 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 20:38:50.523 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 20:38:50.561 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 20:38:50.567 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 6
2025-01-20 20:38:50.570 +02:00 [INF] Removing Gift 6 from User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584's basket
2025-01-20 20:38:50.574 +02:00 [INF] Removing Gift 6 for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 in database
2025-01-20 20:38:50.594 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 20:38:50.639 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGifts] AS [u]
        WHERE [u].[GiftId] = @__giftId_0 AND [u].[GiftStatus] = N'Purchased') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-20 20:38:50.662 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [UserGifts]
OUTPUT 1
WHERE [GiftId] = @p0 AND [UserId] = @p1;
2025-01-20 20:38:50.670 +02:00 [INF] Removed Gift 6 for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 successfully
2025-01-20 20:38:50.672 +02:00 [INF] Removed Gift 6 from User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584's basket successfully
2025-01-20 20:38:50.674 +02:00 [INF] Completed RemoveGiftFromUserAsync for GiftId: 6
2025-01-20 20:38:50.675 +02:00 [INF] Executed action method project.Controllers.UserController.RemoveGiftFromUserAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 110.6779ms.
2025-01-20 20:38:50.679 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 150.8565ms
2025-01-20 20:38:50.681 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 20:38:50.682 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:38:50.683 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=6 - 200 0 null 179.9303ms
2025-01-20 20:38:50.689 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 20:38:50.692 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:50.695 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 5.4318ms
2025-01-20 20:38:50.700 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 20:38:50.703 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:38:50.706 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 20:38:50.709 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 20:38:50.711 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 20:38:50.741 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 20:38:50.744 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 20:38:50.746 +02:00 [INF] Received request to get basket for user: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:50.748 +02:00 [INF] Starting to fetch basket for userId: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:50.755 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 20:38:50.761 +02:00 [INF] Successfully fetched 1 gifts for userId: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:50.765 +02:00 [INF] Serialized response: [
  {
    "UserId": "6dded86b-1ad6-4056-8ea2-a4cfbf5b9584",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Draft",
    "Quantity": 2
  }
]
2025-01-20 20:38:50.767 +02:00 [INF] Completed GetBasketByUserAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:38:50.768 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 24.7286ms.
2025-01-20 20:38:50.771 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:38:50.773 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 57.7959ms
2025-01-20 20:38:50.775 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 20:38:50.777 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:38:50.780 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 80.3625ms
2025-01-20 20:39:15.624 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - null null
2025-01-20 20:39:15.646 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:39:15.648 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/confirmPurchase - 204 null null 23.8184ms
2025-01-20 20:39:15.675 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - application/json 2
2025-01-20 20:39:15.678 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:39:15.679 +02:00 [INF] Incoming Request: POST /api/User/confirmPurchase
2025-01-20 20:39:15.682 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 20:39:15.688 +02:00 [INF] Route matched with {action = "ConfirmPurchase", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task ConfirmPurchaseAsync() on controller project.Controllers.UserController (project).
2025-01-20 20:39:15.726 +02:00 [INF] Executing action method project.Controllers.UserController.ConfirmPurchaseAsync (project) - Validation state: "Valid"
2025-01-20 20:39:15.731 +02:00 [INF] Starting ConfirmPurchaseAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:15.734 +02:00 [INF] Confirming purchase for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:15.736 +02:00 [INF] Fetching UserGifts for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 to confirm purchase
2025-01-20 20:39:15.760 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0 AND [g].[Status] = N'Draft'
2025-01-20 20:39:15.769 +02:00 [INF] Updated Gift 5 to Purchased for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:15.776 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (Size = 450), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserGifts] SET [GiftStatus] = @p0
OUTPUT 1
WHERE [GiftId] = @p1 AND [UserId] = @p2;
2025-01-20 20:39:15.782 +02:00 [INF] Purchase confirmed for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:15.783 +02:00 [INF] Purchase confirmed for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:15.785 +02:00 [INF] Completed ConfirmPurchaseAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:15.786 +02:00 [INF] Executed action method project.Controllers.UserController.ConfirmPurchaseAsync (project), returned result Microsoft.AspNetCore.Mvc.EmptyResult in 56.7939ms.
2025-01-20 20:39:15.789 +02:00 [INF] Executed action project.Controllers.UserController.ConfirmPurchaseAsync (project) in 97.5673ms
2025-01-20 20:39:15.790 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.ConfirmPurchaseAsync (project)'
2025-01-20 20:39:15.792 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:39:15.794 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User/confirmPurchase - 200 0 null 119.6573ms
2025-01-20 20:39:20.049 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 20:39:20.054 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:39:20.057 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 7.311ms
2025-01-20 20:39:20.071 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 20:39:20.078 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:39:20.080 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 20:39:20.083 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 20:39:20.085 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 20:39:20.120 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 20:39:20.123 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 20:39:20.124 +02:00 [INF] Received request to get basket for user: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:20.125 +02:00 [INF] Starting to fetch basket for userId: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:20.134 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 20:39:20.138 +02:00 [INF] Successfully fetched 1 gifts for userId: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:20.140 +02:00 [INF] Serialized response: [
  {
    "UserId": "6dded86b-1ad6-4056-8ea2-a4cfbf5b9584",
    "User": null,
    "GiftId": 5,
    "GiftStatus": "Purchased",
    "Quantity": 2
  }
]
2025-01-20 20:39:20.142 +02:00 [INF] Completed GetBasketByUserAsync for User: 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584
2025-01-20 20:39:20.144 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21.2097ms.
2025-01-20 20:39:20.146 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:39:20.148 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 57.91ms
2025-01-20 20:39:20.151 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 20:39:20.152 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:39:20.154 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 83.2471ms
2025-01-20 20:39:21.638 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 20:39:21.642 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:39:21.644 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 6.2737ms
2025-01-20 20:39:21.650 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=5 - application/json null
2025-01-20 20:39:21.655 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:39:21.659 +02:00 [INF] Incoming Request: DELETE /api/User
2025-01-20 20:39:21.662 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 20:39:21.665 +02:00 [INF] Route matched with {action = "RemoveGiftFromUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task RemoveGiftFromUserAsync(Int32) on controller project.Controllers.UserController (project).
2025-01-20 20:39:21.698 +02:00 [INF] Executing action method project.Controllers.UserController.RemoveGiftFromUserAsync (project) - Validation state: "Valid"
2025-01-20 20:39:21.701 +02:00 [INF] Starting RemoveGiftFromUserAsync for GiftId: 5
2025-01-20 20:39:21.702 +02:00 [INF] Removing Gift 5 from User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584's basket
2025-01-20 20:39:21.704 +02:00 [INF] Removing Gift 5 for User 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 in database
2025-01-20 20:39:21.710 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450), @__giftId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity]
FROM [UserGifts] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[GiftId] = @__giftId_1
2025-01-20 20:39:21.720 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [UserGifts] AS [u]
        WHERE [u].[GiftId] = @__giftId_0 AND [u].[GiftStatus] = N'Purchased') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-20 20:39:21.972 +02:00 [INF] Executed action project.Controllers.UserController.RemoveGiftFromUserAsync (project) in 303.2096ms
2025-01-20 20:39:21.975 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.RemoveGiftFromUserAsync (project)'
2025-01-20 20:39:22.114 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot remove gift with ID 5 from user 6dded86b-1ad6-4056-8ea2-a4cfbf5b9584 because it is purchased.
   at project.Repository.UserRepository.RemoveGiftFromUserAsync(String userId, Int32 giftId) in E:\פרויקט\server\project\Repositories\UserRepository.cs:line 158
   at project.Services.UserService.RemoveGiftFromUserAsync(String userId, Int32 giftId) in E:\פרויקט\server\project\Services\UserService.cs:line 80
   at project.Controllers.UserController.RemoveGiftFromUserAsync(Int32 giftId) in E:\פרויקט\server\project\Controllers\UserController.cs:line 175
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at project.Controllers.Middlewares.OurMiddleware.Invoke(HttpContext context) in E:\פרויקט\server\project\Controllers\Middlewares\OurMiddleware.cs:line 64
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-20 20:39:22.142 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/User?giftId=5 - 500 null text/plain; charset=utf-8 492.209ms
2025-01-20 20:54:21.746 +02:00 [INF] Starting up the application
2025-01-20 20:54:26.339 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 20:54:29.567 +02:00 [INF] Executed DbCommand (108ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 20:54:29.771 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:54:30.259 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 20:54:30.269 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 20:54:30.272 +02:00 [INF] Hosting environment: Development
2025-01-20 20:54:30.273 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 20:54:32.125 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 20:54:32.748 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 629.5503ms
2025-01-20 20:54:32.803 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 20:54:32.817 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 14.244ms
2025-01-20 20:54:33.065 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 20:54:33.396 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 331.3876ms
2025-01-20 20:55:18.235 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 20:55:18.247 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:55:18.253 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 18.2251ms
2025-01-20 20:55:18.275 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 96
2025-01-20 20:55:18.282 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:55:18.285 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 20:55:18.489 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:55:18.532 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 20:55:18.797 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 20:55:19.079 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:55:19.302 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 20:55:19.327 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 20:55:19.367 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 20:55:19.372 +02:00 [INF] User registered successfully: aol
2025-01-20 20:55:19.374 +02:00 [INF] User registered successfully.
2025-01-20 20:55:19.381 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 577.4166ms.
2025-01-20 20:55:19.394 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 20:55:19.403 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 861.8398ms
2025-01-20 20:55:19.406 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 20:55:19.416 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 1140.3102ms
2025-01-20 20:56:10.354 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 20:56:10.376 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:56:10.378 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 23.9744ms
2025-01-20 20:56:10.402 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 20:56:10.405 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:56:10.412 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 20:56:10.421 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 20:56:10.478 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 20:56:10.536 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 20:56:10.788 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 20:56:10.861 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 20:56:10.936 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 20:56:10.955 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 473.7798ms.
2025-01-20 20:56:10.958 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 20:56:10.991 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 566.4706ms
2025-01-20 20:56:10.993 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 20:56:10.996 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 593.5026ms
2025-01-20 20:56:13.553 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 20:56:13.559 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:56:13.564 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 20:56:13.572 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 20:56:13.813 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 20:56:13.818 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T18:56:13.8178929Z"
2025-01-20 20:56:13.823 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T18:56:13.8232878Z"
2025-01-20 20:56:13.829 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T18:56:13.8297214Z"
2025-01-20 20:56:13.921 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 20:56:13.935 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T18:56:13.9358660Z"
2025-01-20 20:56:13.943 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T18:56:13.9431418Z"
2025-01-20 20:56:13.944 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T18:56:13.9449669Z"
2025-01-20 20:56:13.947 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 131.2332ms.
2025-01-20 20:56:13.950 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:56:13.974 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 397.8763ms
2025-01-20 20:56:13.976 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 20:56:13.978 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 424.9405ms
2025-01-20 20:57:33.229 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 20:57:33.237 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:57:33.239 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 11.1309ms
2025-01-20 20:57:33.258 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 20:57:33.262 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:57:33.375 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:57:33.383 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:57:33.404 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 20:57:33.437 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 50.7958ms
2025-01-20 20:57:33.441 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:57:33.443 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 184.1571ms
2025-01-20 20:57:58.680 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 20:57:58.691 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:57:58.693 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 43.4728ms
2025-01-20 20:57:58.717 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 20:57:58.721 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:57:58.724 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 20:57:58.767 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 20:57:58.773 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 20:57:58.808 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 20:57:58.818 +02:00 [INF] Fetching all donators.
2025-01-20 20:57:58.823 +02:00 [INF] Fetching all donators.
2025-01-20 20:57:58.838 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 20:57:58.867 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 20:57:58.869 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 58.6993ms.
2025-01-20 20:57:58.872 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:57:58.893 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 117.2708ms
2025-01-20 20:57:58.896 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 20:57:58.898 +02:00 [INF] Outgoing Response: 200
2025-01-20 20:57:58.899 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 182.1466ms
2025-01-20 20:57:59.530 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 20:57:59.536 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:57:59.539 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 9.0033ms
2025-01-20 20:57:59.549 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 20:57:59.553 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:57:59.557 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:57:59.560 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:57:59.573 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 20:57:59.576 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 13.0632ms
2025-01-20 20:57:59.579 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:57:59.582 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 32.9382ms
2025-01-20 20:59:24.451 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 20:59:24.478 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 20:59:24.480 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 20:59:24.515 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 20:59:24.518 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T18:59:24.5181556Z"
2025-01-20 20:59:24.519 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T18:59:24.5197080Z"
2025-01-20 20:59:24.520 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T18:59:24.5209587Z"
2025-01-20 20:59:24.534 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 20:59:24.542 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T18:59:24.5424188Z"
2025-01-20 20:59:24.544 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T18:59:24.5443706Z"
2025-01-20 20:59:24.546 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T18:59:24.5460337Z"
2025-01-20 20:59:24.547 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.5986ms.
2025-01-20 20:59:24.551 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 20:59:24.553 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 70.1611ms
2025-01-20 20:59:24.556 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 20:59:24.558 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 107.1137ms
2025-01-20 20:59:51.233 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 20:59:51.237 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:59:51.239 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:59:51.245 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 20:59:51.250 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 6.4539ms
2025-01-20 20:59:51.252 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:59:51.255 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 21.6899ms
2025-01-20 20:59:51.982 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 20:59:51.986 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:59:51.988 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.5745ms
2025-01-20 20:59:51.996 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 20:59:51.999 +02:00 [INF] CORS policy execution successful.
2025-01-20 20:59:52.002 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:59:52.004 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 20:59:52.009 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 20:59:52.012 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.2975ms
2025-01-20 20:59:52.015 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 20:59:52.018 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 21.3718ms
2025-01-20 21:00:33.681 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 21:00:33.699 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:00:33.700 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 18.9077ms
2025-01-20 21:00:33.705 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 104
2025-01-20 21:00:33.709 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:00:33.711 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:00:33.713 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 21:00:33.761 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 21:00:33.906 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:00:33.922 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 21:00:33.930 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:00:33.942 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 21:00:33.946 +02:00 [INF] User registered successfully: rdgtf
2025-01-20 21:00:33.947 +02:00 [INF] User registered successfully.
2025-01-20 21:00:33.948 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 184.8008ms.
2025-01-20 21:00:33.950 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 21:00:33.952 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 236.6602ms
2025-01-20 21:00:33.956 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:00:33.958 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 253.4349ms
2025-01-20 21:02:49.348 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 21:02:49.367 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:02:49.369 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 20.5867ms
2025-01-20 21:02:49.390 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 101
2025-01-20 21:02:49.393 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:02:49.395 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:02:49.396 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 21:02:49.429 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 21:02:49.577 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:02:49.590 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 21:02:49.597 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:02:49.619 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 21:02:49.623 +02:00 [INF] User registered successfully: jkuhgouy
2025-01-20 21:02:49.624 +02:00 [INF] User registered successfully.
2025-01-20 21:02:49.626 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 194.2682ms.
2025-01-20 21:02:49.628 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 21:02:49.630 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 231.2922ms
2025-01-20 21:02:49.632 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:02:49.635 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 244.261ms
2025-01-20 21:04:48.496 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:04:48.517 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:04:48.518 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:04:48.560 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:04:48.562 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:04:48.5625904Z"
2025-01-20 21:04:48.563 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:04:48.5638555Z"
2025-01-20 21:04:48.565 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:04:48.5652612Z"
2025-01-20 21:04:48.577 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:04:48.581 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:04:48.5815896Z"
2025-01-20 21:04:48.582 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:04:48.5828814Z"
2025-01-20 21:04:48.584 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:04:48.5843493Z"
2025-01-20 21:04:48.587 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 24.6222ms.
2025-01-20 21:04:48.590 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:04:48.592 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 68.3796ms
2025-01-20 21:04:48.594 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:04:48.596 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 99.9406ms
2025-01-20 21:17:54.660 +02:00 [INF] Starting up the application
2025-01-20 21:17:58.324 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 21:18:00.730 +02:00 [INF] Executed DbCommand (94ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 21:18:00.893 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:18:01.330 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 21:18:01.336 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 21:18:01.338 +02:00 [INF] Hosting environment: Development
2025-01-20 21:18:01.350 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 21:18:02.405 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 21:18:02.807 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 410.7894ms
2025-01-20 21:18:02.828 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 21:18:02.837 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.6172ms
2025-01-20 21:18:03.049 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 21:18:03.429 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 379.8359ms
2025-01-20 21:19:05.249 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 21:19:05.258 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:19:05.265 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 15.7219ms
2025-01-20 21:19:05.288 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 101
2025-01-20 21:19:05.294 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:19:05.299 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 21:19:05.473 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:19:05.516 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 21:19:05.754 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 21:19:06.018 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:19:06.053 +02:00 [ERR] Registration failed: Username 'jkuhgouy' is already taken.
2025-01-20 21:19:06.221 +02:00 [ERR] Error during registration for user jkuhgouy.
System.Exception: Registration failed: Username 'jkuhgouy' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
2025-01-20 21:19:06.441 +02:00 [ERR] Registration failed.
System.Exception: Registration failed: Username 'jkuhgouy' is already taken.
   at project.Services.AuthService.RegisterAsync(Register model) in E:\פרויקט\server\project\Services\AuthService.cs:line 52
   at project.Controllers.AuthController.Register(Register model) in E:\פרויקט\server\project\Controllers\AuthController .cs:line 40
2025-01-20 21:19:06.452 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 690.8062ms.
2025-01-20 21:19:06.465 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:19:06.475 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 949.5873ms
2025-01-20 21:19:06.479 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:19:06.492 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 500 null text/plain; charset=utf-8 1204.3097ms
2025-01-20 21:19:30.106 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 21:19:30.126 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:19:30.128 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 21.4377ms
2025-01-20 21:19:30.148 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 94
2025-01-20 21:19:30.151 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:19:30.156 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:19:30.158 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 21:19:30.200 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 21:19:30.366 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:19:30.588 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 21:19:30.610 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:19:30.647 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 21:19:30.653 +02:00 [INF] User registered successfully: fff
2025-01-20 21:19:30.654 +02:00 [INF] User registered successfully.
2025-01-20 21:19:30.655 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 453.3338ms.
2025-01-20 21:19:30.658 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 21:19:30.660 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 497.5884ms
2025-01-20 21:19:30.662 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:19:30.664 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 515.7713ms
2025-01-20 21:20:11.032 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 21:20:11.079 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:11.082 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 49.8133ms
2025-01-20 21:20:11.103 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 21:20:11.106 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:11.111 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 21:20:11.119 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 21:20:11.166 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 21:20:11.198 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 21:20:11.430 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 21:20:11.503 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 21:20:11.570 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 21:20:11.588 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 419.6317ms.
2025-01-20 21:20:11.592 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 21:20:11.624 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 500.9195ms
2025-01-20 21:20:11.628 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 21:20:11.630 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 526.9587ms
2025-01-20 21:20:17.652 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:20:17.658 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:17.661 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:20:17.669 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:20:17.886 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:20:17.891 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:20:17.8907668Z"
2025-01-20 21:20:17.914 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:20:17.959 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:20:17.9592394Z"
2025-01-20 21:20:17.962 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:20:17.9619437Z"
2025-01-20 21:20:17.963 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:20:17.9633649Z"
2025-01-20 21:20:17.965 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 76.537ms.
2025-01-20 21:20:17.968 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:20:18.006 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 331.4689ms
2025-01-20 21:20:18.010 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:20:18.012 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 360.5061ms
2025-01-20 21:20:20.540 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:20:20.546 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:20.548 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:20:20.555 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:20:20.586 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:20:20.590 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:20:20.5906189Z"
2025-01-20 21:20:20.595 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:20:20.5949660Z"
2025-01-20 21:20:20.604 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:20:20.6039681Z"
2025-01-20 21:20:20.623 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:20:20.634 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:20:20.6343975Z"
2025-01-20 21:20:20.636 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:20:20.6368261Z"
2025-01-20 21:20:20.638 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.7209ms.
2025-01-20 21:20:20.641 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:20:20.646 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 86.3997ms
2025-01-20 21:20:20.649 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:20:20.652 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 112.6199ms
2025-01-20 21:20:20.660 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 21:20:20.665 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:20.668 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 7.3602ms
2025-01-20 21:20:20.673 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:20:20.679 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:20.681 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:20:20.787 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:20:20.797 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:20:20.909 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:20:20.914 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:20:20.915 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:20:20.919 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:20:20.920 +02:00 [INF] Parsing token...
2025-01-20 21:20:20.922 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:20:20.959 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:20:20.964 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:20:21.030 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:20:21.158 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 135
2025-01-20 21:20:21.163 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 252.1391ms.
2025-01-20 21:20:21.166 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:20:21.168 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 366.1374ms
2025-01-20 21:20:21.170 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:20:21.172 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:20:21.173 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 499.7266ms
2025-01-20 21:20:22.871 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 21:20:22.877 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:22.880 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 9.2245ms
2025-01-20 21:20:22.886 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 21:20:22.890 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:20:22.892 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 21:20:22.901 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:20:22.909 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 21:20:22.940 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 21:20:22.958 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 21:20:22.961 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:20:22.964 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:20:23.011 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:20:23.016 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:20:23.018 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:20:23.019 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:20:23.020 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 63.9001ms.
2025-01-20 21:20:23.022 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:20:23.033 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 120.5542ms
2025-01-20 21:20:23.037 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:20:23.039 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:20:23.040 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 154.1469ms
2025-01-20 21:21:14.024 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:21:14.032 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:14.034 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 9.5618ms
2025-01-20 21:21:14.056 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:21:14.060 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:14.063 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:14.064 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:21:14.080 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:21:14.102 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 34.8685ms
2025-01-20 21:21:14.105 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:14.108 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 51.9321ms
2025-01-20 21:21:17.130 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:21:17.133 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:17.134 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:21:17.139 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:21:17.143 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.8993ms
2025-01-20 21:21:17.145 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:17.146 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 16.6822ms
2025-01-20 21:21:17.588 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:21:17.651 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:17.654 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:17.666 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:21:17.672 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:21:17.689 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 17.972ms
2025-01-20 21:21:17.711 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:17.715 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 126.3371ms
2025-01-20 21:21:23.593 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 21:21:23.597 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:23.598 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.1249ms
2025-01-20 21:21:23.603 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 21:21:23.606 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:23.608 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 21:21:23.615 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:21:23.622 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 21:21:23.652 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 21:21:23.657 +02:00 [INF] Fetching all donators.
2025-01-20 21:21:23.659 +02:00 [INF] Fetching all donators.
2025-01-20 21:21:23.670 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 21:21:23.686 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 21:21:23.688 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.9528ms.
2025-01-20 21:21:23.690 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:23.695 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 67.5555ms
2025-01-20 21:21:23.697 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:21:23.699 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:21:23.700 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 97.4713ms
2025-01-20 21:21:25.123 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:21:25.129 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:25.131 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:21:25.137 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:21:25.167 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:21:25.171 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:25.1709890Z"
2025-01-20 21:21:25.173 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:25.1730960Z"
2025-01-20 21:21:25.177 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:25.1779362Z"
2025-01-20 21:21:25.239 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:21:25.246 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:25.2461534Z"
2025-01-20 21:21:25.247 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:25.2476033Z"
2025-01-20 21:21:25.248 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:25.2488667Z"
2025-01-20 21:21:25.250 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 80.3538ms.
2025-01-20 21:21:25.252 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:25.259 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 117.6162ms
2025-01-20 21:21:25.262 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:21:25.265 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 141.6404ms
2025-01-20 21:21:26.089 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 21:21:26.096 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:26.099 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 10.6555ms
2025-01-20 21:21:26.106 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 21:21:26.111 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:26.114 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 21:21:26.117 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:21:26.119 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 21:21:26.155 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 21:21:26.157 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 21:21:26.159 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:26.160 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:26.166 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:21:26.171 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:26.172 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:26.173 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:26.177 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 19.3255ms.
2025-01-20 21:21:26.180 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:26.182 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 60.4011ms
2025-01-20 21:21:26.184 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:21:26.186 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:21:26.188 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 81.6ms
2025-01-20 21:21:27.274 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:21:27.279 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:27.281 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:21:27.284 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:21:27.315 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:21:27.318 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:21:27.3182149Z"
2025-01-20 21:21:27.323 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:21:27.342 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:21:27.3423929Z"
2025-01-20 21:21:27.343 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:21:27.3435289Z"
2025-01-20 21:21:27.344 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:21:27.3449760Z"
2025-01-20 21:21:27.346 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 28.0204ms.
2025-01-20 21:21:27.348 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:27.350 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 63.2412ms
2025-01-20 21:21:27.352 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:21:27.354 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 79.5686ms
2025-01-20 21:21:31.274 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:21:31.281 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:31.282 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:31.283 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:21:31.311 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:21:31.315 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:21:31.3151740Z"
2025-01-20 21:21:31.316 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:21:31.3168944Z"
2025-01-20 21:21:31.318 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:21:31.3186882Z"
2025-01-20 21:21:31.324 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:21:31.331 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:21:31.3311426Z"
2025-01-20 21:21:31.333 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:21:31.3339677Z"
2025-01-20 21:21:31.335 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.6008ms.
2025-01-20 21:21:31.337 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:21:31.339 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 53.1306ms
2025-01-20 21:21:31.343 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:31.346 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 71.3131ms
2025-01-20 21:21:31.352 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 21:21:31.356 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:31.359 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.7326ms
2025-01-20 21:21:31.364 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:21:31.367 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:31.368 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:21:31.371 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:21:31.372 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:21:31.457 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:21:31.460 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:21:31.462 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:21:31.464 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:21:31.465 +02:00 [INF] Parsing token...
2025-01-20 21:21:31.467 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:21:31.477 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:21:31.482 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:21:31.547 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:21:31.662 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 135
2025-01-20 21:21:31.667 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 206.6478ms.
2025-01-20 21:21:31.670 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:21:31.672 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 293.8192ms
2025-01-20 21:21:31.674 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:21:31.677 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:21:31.679 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 314.2746ms
2025-01-20 21:21:49.779 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:21:49.784 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:49.786 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:21:49.788 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:21:49.824 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:21:49.828 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:49.8281965Z"
2025-01-20 21:21:49.830 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:49.8305888Z"
2025-01-20 21:21:49.832 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:49.8325482Z"
2025-01-20 21:21:49.846 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:21:49.850 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:49.8502553Z"
2025-01-20 21:21:49.851 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:49.8513752Z"
2025-01-20 21:21:49.852 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:49.8526519Z"
2025-01-20 21:21:49.853 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 25.7539ms.
2025-01-20 21:21:49.856 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:49.859 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 65.5711ms
2025-01-20 21:21:49.861 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:21:49.863 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 83.9142ms
2025-01-20 21:21:54.063 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 21:21:54.068 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:54.069 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.3947ms
2025-01-20 21:21:54.079 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 21:21:54.083 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:54.084 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 21:21:54.086 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:21:54.088 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 21:21:54.132 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 21:21:54.134 +02:00 [INF] Fetching all donators.
2025-01-20 21:21:54.135 +02:00 [INF] Fetching all donators.
2025-01-20 21:21:54.140 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 21:21:54.160 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 21:21:54.162 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 27.7798ms.
2025-01-20 21:21:54.164 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:54.166 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 67.7197ms
2025-01-20 21:21:54.168 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:21:54.170 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:21:54.172 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 93.3991ms
2025-01-20 21:21:56.192 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:21:56.198 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:56.200 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 7.4507ms
2025-01-20 21:21:56.208 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:21:56.213 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:56.215 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:56.216 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:21:56.220 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:21:56.224 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.539ms
2025-01-20 21:21:56.228 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:21:56.230 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 21.8501ms
2025-01-20 21:21:57.733 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:21:57.737 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:57.739 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:21:57.742 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:21:57.788 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:21:57.792 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:57.7920957Z"
2025-01-20 21:21:57.794 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:57.7941914Z"
2025-01-20 21:21:57.796 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:21:57.7965255Z"
2025-01-20 21:21:57.800 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:21:57.804 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:57.8047522Z"
2025-01-20 21:21:57.805 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:57.8059309Z"
2025-01-20 21:21:57.809 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:21:57.8099014Z"
2025-01-20 21:21:57.812 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.7282ms.
2025-01-20 21:21:57.816 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:57.818 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 69.1242ms
2025-01-20 21:21:57.820 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:21:57.823 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 90.081ms
2025-01-20 21:21:58.481 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 21:21:58.486 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:58.492 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 10.6226ms
2025-01-20 21:21:58.500 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 21:21:58.503 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:58.505 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 21:21:58.508 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:21:58.510 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 21:21:58.548 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 21:21:58.551 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 21:21:58.552 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:58.553 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:58.559 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:21:58.563 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:58.564 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:58.566 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:21:58.567 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 16.5999ms.
2025-01-20 21:21:58.569 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:58.571 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 57.4236ms
2025-01-20 21:21:58.574 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:21:58.576 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:21:58.577 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 77.2507ms
2025-01-20 21:21:59.180 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:21:59.186 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:21:59.187 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:21:59.190 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:21:59.219 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:21:59.221 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:21:59.2214619Z"
2025-01-20 21:21:59.226 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:21:59.230 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:21:59.2303200Z"
2025-01-20 21:21:59.231 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:21:59.2314660Z"
2025-01-20 21:21:59.232 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:21:59.2327387Z"
2025-01-20 21:21:59.234 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 12.5758ms.
2025-01-20 21:21:59.236 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:21:59.238 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 44.4277ms
2025-01-20 21:21:59.240 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:21:59.242 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 62.1283ms
2025-01-20 21:22:01.735 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:22:01.741 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:01.745 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 10.169ms
2025-01-20 21:22:01.750 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:22:01.753 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:01.756 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:22:01.759 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:22:01.765 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:22:01.768 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.4692ms
2025-01-20 21:22:01.770 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:22:01.772 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 22.1858ms
2025-01-20 21:22:04.295 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:22:04.298 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:22:04.300 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:22:04.304 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:22:04.306 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.0213ms
2025-01-20 21:22:04.309 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:22:04.312 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 17.2ms
2025-01-20 21:22:04.718 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:22:04.722 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:04.725 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:22:04.727 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:22:04.736 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:22:04.741 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 5.9805ms
2025-01-20 21:22:04.744 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:22:04.746 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 28.3192ms
2025-01-20 21:22:11.028 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 21:22:11.033 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:11.035 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.4032ms
2025-01-20 21:22:11.043 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 21:22:11.048 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:11.049 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 21:22:11.051 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:22:11.053 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 21:22:11.083 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 21:22:11.087 +02:00 [INF] Fetching all donators.
2025-01-20 21:22:11.088 +02:00 [INF] Fetching all donators.
2025-01-20 21:22:11.092 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 21:22:11.096 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 21:22:11.097 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.1892ms.
2025-01-20 21:22:11.100 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:22:11.102 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 45.207ms
2025-01-20 21:22:11.103 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:22:11.105 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:22:11.106 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 63.3062ms
2025-01-20 21:22:12.610 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:22:12.614 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:12.616 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:22:12.617 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:22:12.647 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:22:12.649 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:22:12.6494948Z"
2025-01-20 21:22:12.650 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:22:12.6507518Z"
2025-01-20 21:22:12.651 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:22:12.6519939Z"
2025-01-20 21:22:12.655 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:22:12.661 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:22:12.6610405Z"
2025-01-20 21:22:12.662 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:22:12.6622250Z"
2025-01-20 21:22:12.663 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:22:12.6636904Z"
2025-01-20 21:22:12.664 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.4285ms.
2025-01-20 21:22:12.667 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:22:12.669 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 48.3428ms
2025-01-20 21:22:12.671 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:22:12.672 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 62.5935ms
2025-01-20 21:22:13.178 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 21:22:13.185 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:13.187 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 9.2445ms
2025-01-20 21:22:13.195 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 21:22:13.198 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:13.200 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 21:22:13.201 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:22:13.203 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 21:22:13.235 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 21:22:13.237 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 21:22:13.238 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:22:13.241 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:22:13.245 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:22:13.249 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:22:13.250 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:22:13.252 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:22:13.254 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 16.3053ms.
2025-01-20 21:22:13.257 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:22:13.259 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 50.2987ms
2025-01-20 21:22:13.261 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:22:13.263 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:22:13.265 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 70.0368ms
2025-01-20 21:22:14.914 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:22:14.919 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:22:14.921 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:22:14.923 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:22:14.952 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:22:14.955 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:22:14.9551284Z"
2025-01-20 21:22:14.960 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:22:14.981 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:22:14.9813386Z"
2025-01-20 21:22:14.982 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:22:14.9824811Z"
2025-01-20 21:22:14.983 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:22:14.9837775Z"
2025-01-20 21:22:14.986 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 31.4733ms.
2025-01-20 21:22:14.990 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:22:14.993 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 65.1046ms
2025-01-20 21:22:14.995 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:22:14.997 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 82.5394ms
2025-01-20 21:23:50.126 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:23:50.138 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:23:50.141 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:23:50.186 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:23:50.188 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:23:50.1888770Z"
2025-01-20 21:23:50.194 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:23:50.198 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:23:50.1983287Z"
2025-01-20 21:23:50.199 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:23:50.1995335Z"
2025-01-20 21:23:50.201 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:23:50.2015074Z"
2025-01-20 21:23:50.202 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.9824ms.
2025-01-20 21:23:50.205 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:23:50.209 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 63.974ms
2025-01-20 21:23:50.211 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:23:50.214 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 87.725ms
2025-01-20 21:23:52.134 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:23:52.141 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:52.143 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 9.6238ms
2025-01-20 21:23:52.167 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:23:52.171 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:52.173 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:23:52.175 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:23:52.180 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:23:52.182 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.1688ms
2025-01-20 21:23:52.185 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:23:52.187 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 19.5323ms
2025-01-20 21:23:56.276 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:23:56.281 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:56.283 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:23:56.285 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:23:56.333 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:23:56.335 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:23:56.3357565Z"
2025-01-20 21:23:56.336 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:23:56.3369861Z"
2025-01-20 21:23:56.338 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:23:56.3381925Z"
2025-01-20 21:23:56.350 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:23:56.354 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:23:56.3542409Z"
2025-01-20 21:23:56.357 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:23:56.3574307Z"
2025-01-20 21:23:56.359 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:23:56.3595943Z"
2025-01-20 21:23:56.361 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 26.206ms.
2025-01-20 21:23:56.364 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:23:56.366 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 78.3719ms
2025-01-20 21:23:56.368 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:23:56.370 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 94.1492ms
2025-01-20 21:23:57.228 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 21:23:57.232 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:57.234 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.2055ms
2025-01-20 21:23:57.241 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 21:23:57.246 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:57.248 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 21:23:57.250 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:23:57.252 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 21:23:57.284 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 21:23:57.286 +02:00 [INF] Fetching all donators.
2025-01-20 21:23:57.288 +02:00 [INF] Fetching all donators.
2025-01-20 21:23:57.296 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 21:23:57.302 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 21:23:57.304 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.5292ms.
2025-01-20 21:23:57.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:23:57.311 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 56.0747ms
2025-01-20 21:23:57.313 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 21:23:57.316 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:23:57.321 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 79.815ms
2025-01-20 21:23:58.306 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 21:23:58.311 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:58.314 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 7.0771ms
2025-01-20 21:23:58.320 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 21:23:58.324 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:58.326 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 21:23:58.328 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:23:58.330 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 21:23:58.357 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 21:23:58.359 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 21:23:58.360 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:23:58.362 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:23:58.369 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:23:58.374 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:23:58.375 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:23:58.377 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:23:58.378 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 19.6116ms.
2025-01-20 21:23:58.382 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:23:58.384 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 51.4313ms
2025-01-20 21:23:58.388 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:23:58.391 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:23:58.393 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 72.746ms
2025-01-20 21:23:58.857 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:23:58.862 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:23:58.864 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:23:58.866 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:23:58.898 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:23:58.901 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:23:58.9014339Z"
2025-01-20 21:23:58.907 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:23:58.912 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:23:58.9120706Z"
2025-01-20 21:23:58.913 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:23:58.9135768Z"
2025-01-20 21:23:58.915 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:23:58.9152058Z"
2025-01-20 21:23:58.916 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.5064ms.
2025-01-20 21:23:58.920 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:23:58.924 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 54.3909ms
2025-01-20 21:23:58.926 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:23:58.929 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 71.7968ms
2025-01-20 21:24:20.624 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - null null
2025-01-20 21:24:20.629 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-20 21:24:20.630 +02:00 [WRN] Missing Authorization Header
2025-01-20 21:24:20.632 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 401 null null 8.1586ms
2025-01-20 21:25:04.131 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/userBasket - null null
2025-01-20 21:25:04.166 +02:00 [INF] Incoming Request: GET /api/User/userBasket
2025-01-20 21:25:04.169 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-20 21:25:04.176 +02:00 [INF] Route matched with {action = "GetUserGifts", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDTO.UserGiftDTO]] GetUserGifts() on controller project.Controllers.UserController (project).
2025-01-20 21:25:04.240 +02:00 [INF] Executing action method project.Controllers.UserController.GetUserGifts (project) - Validation state: "Valid"
2025-01-20 21:25:04.246 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:25:04.250 +02:00 [INF] Start fetching user gifts for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:25:04.259 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:25:04.265 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:25:04.266 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:25:04.268 +02:00 [INF] Executed action method project.Controllers.UserController.GetUserGifts (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 24.8708ms.
2025-01-20 21:25:04.274 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.ModelsDTO.UserGiftDTO, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:25:04.279 +02:00 [INF] Executed action project.Controllers.UserController.GetUserGifts (project) in 98.9699ms
2025-01-20 21:25:04.281 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetUserGifts (project)'
2025-01-20 21:25:04.283 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:25:04.284 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/userBasket - 200 null application/json; charset=utf-8 153.5262ms
2025-01-20 21:25:59.621 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:25:59.650 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:25:59.652 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:25:59.695 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:25:59.697 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:25:59.6979649Z"
2025-01-20 21:25:59.704 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:25:59.723 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:25:59.7236669Z"
2025-01-20 21:25:59.724 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:25:59.7249104Z"
2025-01-20 21:25:59.726 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:25:59.7262881Z"
2025-01-20 21:25:59.727 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.718ms.
2025-01-20 21:25:59.730 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:25:59.732 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 75.9305ms
2025-01-20 21:25:59.734 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:25:59.736 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 114.9898ms
2025-01-20 21:26:39.946 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:26:39.976 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:26:39.994 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:26:40.037 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:26:40.040 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:26:40.0403238Z"
2025-01-20 21:26:40.047 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:26:40.053 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:26:40.0532504Z"
2025-01-20 21:26:40.055 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:26:40.0555937Z"
2025-01-20 21:26:40.057 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:26:40.0574199Z"
2025-01-20 21:26:40.058 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.6325ms.
2025-01-20 21:26:40.062 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:26:40.064 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 65.2741ms
2025-01-20 21:26:40.066 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:26:40.068 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 121.8801ms
2025-01-20 21:26:41.841 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:26:41.847 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:26:41.849 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 8.0331ms
2025-01-20 21:26:41.873 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:26:41.876 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:26:41.877 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:26:41.879 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:26:41.883 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:26:41.886 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.2835ms
2025-01-20 21:26:41.888 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:26:41.890 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 16.831ms
2025-01-20 21:26:49.366 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:26:49.394 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:26:49.395 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:26:49.400 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:26:49.403 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.8971ms
2025-01-20 21:26:49.405 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:26:49.407 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 40.9799ms
2025-01-20 21:26:49.801 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:26:49.805 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:26:49.806 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 5.1964ms
2025-01-20 21:26:49.811 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:26:49.816 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:26:49.820 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:26:49.822 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:26:49.831 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:26:49.836 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 5.3094ms
2025-01-20 21:26:49.839 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:26:49.841 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 30.074ms
2025-01-20 21:28:22.945 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:28:22.964 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:28:22.965 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:28:22.966 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:28:23.005 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:28:23.008 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:28:23.0085343Z"
2025-01-20 21:28:23.014 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:28:23.036 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:28:23.0364175Z"
2025-01-20 21:28:23.037 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:28:23.0379660Z"
2025-01-20 21:28:23.039 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:28:23.0392517Z"
2025-01-20 21:28:23.040 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32.2226ms.
2025-01-20 21:28:23.043 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:28:23.045 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 75.9154ms
2025-01-20 21:28:23.048 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:28:23.051 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 106.796ms
2025-01-20 21:28:26.932 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:28:26.937 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:28:26.939 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:28:26.941 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:28:26.973 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:28:26.977 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:28:26.9774002Z"
2025-01-20 21:28:26.979 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:28:26.9798357Z"
2025-01-20 21:28:26.981 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:28:26.9815919Z"
2025-01-20 21:28:26.987 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:28:26.991 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:28:26.9915287Z"
2025-01-20 21:28:26.992 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:28:26.9929887Z"
2025-01-20 21:28:26.994 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.1392ms.
2025-01-20 21:28:26.996 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:28:26.998 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 54.19ms
2025-01-20 21:28:27.000 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:28:27.002 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 70.1541ms
2025-01-20 21:28:27.012 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 21:28:27.016 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:28:27.018 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.3793ms
2025-01-20 21:28:27.025 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:28:27.029 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:28:27.031 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:28:27.033 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:28:27.036 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:28:27.063 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:28:27.065 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:28:27.067 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:28:27.068 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:28:27.069 +02:00 [INF] Parsing token...
2025-01-20 21:28:27.072 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:28:27.080 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:28:27.084 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:28:27.159 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:28:27.270 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 135
2025-01-20 21:28:27.275 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 209.2136ms.
2025-01-20 21:28:27.277 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:28:27.278 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 237.5832ms
2025-01-20 21:28:27.281 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:28:27.283 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:28:27.285 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 259.9791ms
2025-01-20 21:33:05.337 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:33:05.342 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:33:05.359 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:33:05.361 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:33:05.363 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:33:05.364 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:33:05.389 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:33:05.417 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:33:05.419 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:33:05.4190524Z"
2025-01-20 21:33:05.421 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:33:05.4214851Z"
2025-01-20 21:33:05.426 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:33:05.442 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:05.4425246Z"
2025-01-20 21:33:05.444 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:05.4441096Z"
2025-01-20 21:33:05.446 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:05.4460152Z"
2025-01-20 21:33:05.453 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:33:05.453 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 33.9739ms.
2025-01-20 21:33:05.457 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:05.4569855Z"
2025-01-20 21:33:05.459 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:33:05.461 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:05.4610716Z"
2025-01-20 21:33:05.463 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 95.4578ms
2025-01-20 21:33:05.465 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:05.4656296Z"
2025-01-20 21:33:05.467 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:33:05.469 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 47.9763ms.
2025-01-20 21:33:05.471 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 133.984ms
2025-01-20 21:33:05.475 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:33:05.483 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 90.6744ms
2025-01-20 21:33:05.485 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:33:05.487 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 145.3601ms
2025-01-20 21:33:38.853 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:33:38.886 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:33:38.888 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:33:38.914 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:33:38.918 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:33:38.9180874Z"
2025-01-20 21:33:38.924 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:33:38.928 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:38.9283647Z"
2025-01-20 21:33:38.929 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:38.9296930Z"
2025-01-20 21:33:38.931 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:33:38.9310215Z"
2025-01-20 21:33:38.933 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.2284ms.
2025-01-20 21:33:38.936 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:33:38.938 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 46.6116ms
2025-01-20 21:33:38.940 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:33:38.942 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 88.4808ms
2025-01-20 21:34:01.174 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 21:34:01.180 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:34:01.182 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 8.069ms
2025-01-20 21:34:01.189 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 105
2025-01-20 21:34:01.192 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:34:01.193 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:34:01.195 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 21:34:01.256 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 21:34:01.404 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:34:01.420 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 21:34:01.427 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:34:01.445 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 21:34:01.449 +02:00 [INF] User registered successfully: aaaaa
2025-01-20 21:34:01.451 +02:00 [INF] User registered successfully.
2025-01-20 21:34:01.452 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 193.3361ms.
2025-01-20 21:34:01.458 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 21:34:01.461 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 262.9439ms
2025-01-20 21:34:01.463 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 21:34:01.466 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null text/plain; charset=utf-8 276.3814ms
2025-01-20 21:39:11.346 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 21:39:11.355 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:39:11.356 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 10.1805ms
2025-01-20 21:39:11.378 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 21:39:11.383 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:39:11.384 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 21:39:11.386 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 21:39:11.413 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 21:39:11.422 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 21:39:11.578 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 21:39:11.588 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 21:39:11.598 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 21:39:11.602 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 185.6564ms.
2025-01-20 21:39:11.604 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType18`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 21:39:11.606 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 217.4925ms
2025-01-20 21:39:11.608 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 21:39:11.610 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 231.4484ms
2025-01-20 21:39:13.645 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:39:13.651 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:39:13.652 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.859ms
2025-01-20 21:39:13.657 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:39:13.662 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:39:13.665 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:39:13.668 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:39:13.672 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 21:39:13.674 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.2605ms
2025-01-20 21:39:13.676 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:39:13.680 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 400 null application/problem+json; charset=utf-8 23.1115ms
2025-01-20 21:41:21.799 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:41:21.810 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 19:26:10', Current time (UTC): '20/01/2025 19:41:21'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 21:41:21.819 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 19:26:10', Current time (UTC): '20/01/2025 19:41:21'.
2025-01-20 21:41:21.821 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:41:21.823 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:41:21.850 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:41:21.853 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:41:21.8534329Z"
2025-01-20 21:41:21.854 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:41:21.8546596Z"
2025-01-20 21:41:21.855 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:41:21.8558985Z"
2025-01-20 21:41:21.885 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:41:21.889 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:41:21.8897797Z"
2025-01-20 21:41:21.890 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:41:21.8909158Z"
2025-01-20 21:41:21.892 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:41:21.8921641Z"
2025-01-20 21:41:21.893 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 40.2001ms.
2025-01-20 21:41:21.897 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:41:21.899 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 73.9984ms
2025-01-20 21:41:21.901 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:41:21.903 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 103.6759ms
2025-01-20 21:51:46.949 +02:00 [INF] Starting up the application
2025-01-20 21:51:51.291 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 21:51:54.774 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 21:51:54.953 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:51:55.450 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 21:51:55.459 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 21:51:55.462 +02:00 [INF] Hosting environment: Development
2025-01-20 21:51:55.463 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 21:51:57.011 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 21:51:57.498 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 495.1679ms
2025-01-20 21:51:57.534 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 21:51:57.598 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 66.3404ms
2025-01-20 21:51:57.839 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 21:51:58.310 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 471.1948ms
2025-01-20 21:52:42.418 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:52:42.431 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 21:52:42.758 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:52:42.793 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:52:43.183 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:52:43.194 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:52:43.197 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:52:43.1971467Z"
2025-01-20 21:52:43.203 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:52:43.2029066Z"
2025-01-20 21:52:43.443 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:52:43.450 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:52:43.4503256Z"
2025-01-20 21:52:43.452 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:52:43.4521955Z"
2025-01-20 21:52:43.454 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:52:43.462 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 271.2115ms.
2025-01-20 21:52:43.477 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:52:43.534 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 730.2049ms
2025-01-20 21:52:43.539 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:52:43.549 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 1131.2399ms
2025-01-20 21:52:56.856 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 21:52:56.867 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:52:56.878 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 21:52:56.925 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 21:52:56.929 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:52:56.9293206Z"
2025-01-20 21:52:56.931 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:52:56.9317603Z"
2025-01-20 21:52:56.935 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T19:52:56.9355369Z"
2025-01-20 21:52:57.013 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 21:52:57.020 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:52:57.0206806Z"
2025-01-20 21:52:57.022 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:52:57.0223385Z"
2025-01-20 21:52:57.023 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T19:52:57.0239218Z"
2025-01-20 21:52:57.025 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 97.2061ms.
2025-01-20 21:52:57.027 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:52:57.037 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 155.9805ms
2025-01-20 21:52:57.041 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 21:52:57.044 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 188.0381ms
2025-01-20 21:53:22.400 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:53:22.414 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:53:22.417 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:53:22.461 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:53:22.463 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:53:22.465 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:53:22.4651662Z"
2025-01-20 21:53:22.466 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:53:22.4665398Z"
2025-01-20 21:53:22.488 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:53:22.493 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:53:22.4935548Z"
2025-01-20 21:53:22.494 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:53:22.4948860Z"
2025-01-20 21:53:22.496 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:53:22.498 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 34.2193ms.
2025-01-20 21:53:22.501 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:53:22.504 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 82.7146ms
2025-01-20 21:53:22.505 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:53:22.507 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 107.8708ms
2025-01-20 21:53:23.391 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:53:23.400 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:23.407 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 15.6665ms
2025-01-20 21:53:23.413 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:53:23.416 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:23.419 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:53:23.422 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:53:23.474 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:53:23.478 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:53:23.479 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:53:23.4795012Z"
2025-01-20 21:53:23.481 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:53:23.4810271Z"
2025-01-20 21:53:23.492 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:53:23.498 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:53:23.4983464Z"
2025-01-20 21:53:23.499 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:53:23.4996651Z"
2025-01-20 21:53:23.501 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:53:23.503 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.1431ms.
2025-01-20 21:53:23.509 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:53:23.513 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 86.2586ms
2025-01-20 21:53:23.515 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:53:23.520 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 107.6075ms
2025-01-20 21:53:41.194 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:53:41.198 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:41.200 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:53:41.208 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:53:41.243 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:53:41.246 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:53:41.2469125Z"
2025-01-20 21:53:41.263 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:53:41.311 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:53:41.3113844Z"
2025-01-20 21:53:41.313 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:53:41.3136332Z"
2025-01-20 21:53:41.315 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:53:41.3151169Z"
2025-01-20 21:53:41.317 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 71.3964ms.
2025-01-20 21:53:41.320 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:53:41.344 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 132.0913ms
2025-01-20 21:53:41.348 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:53:41.351 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 156.1662ms
2025-01-20 21:53:42.539 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:53:42.543 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:42.546 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 7.2636ms
2025-01-20 21:53:42.557 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:53:42.560 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:42.562 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:53:42.563 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:53:42.592 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:53:42.594 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:53:42.596 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:53:42.5960770Z"
2025-01-20 21:53:42.597 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:53:42.5974308Z"
2025-01-20 21:53:42.609 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:53:42.613 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:53:42.6130411Z"
2025-01-20 21:53:42.614 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:53:42.6142661Z"
2025-01-20 21:53:42.615 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:53:42.617 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 22.5913ms.
2025-01-20 21:53:42.622 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:53:42.624 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 56.8717ms
2025-01-20 21:53:42.627 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:53:42.629 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 71.8489ms
2025-01-20 21:53:47.330 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 21:53:47.334 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:47.337 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 6.751ms
2025-01-20 21:53:47.343 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 21:53:47.348 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:47.350 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 21:53:47.389 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:53:47.395 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 21:53:47.427 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 21:53:47.434 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 21:53:47.439 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:53:47.443 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:53:47.484 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 21:53:47.489 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:53:47.490 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:53:47.492 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 21:53:47.493 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 63.6037ms.
2025-01-20 21:53:47.496 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:53:47.507 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 108.762ms
2025-01-20 21:53:47.510 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 21:53:47.513 +02:00 [INF] Outgoing Response: 200
2025-01-20 21:53:47.514 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 170.8815ms
2025-01-20 21:53:48.549 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:53:48.558 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:48.560 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:53:48.562 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:53:48.595 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:53:48.597 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:53:48.5972254Z"
2025-01-20 21:53:48.602 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:53:48.605 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:53:48.6058068Z"
2025-01-20 21:53:48.606 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:53:48.6069374Z"
2025-01-20 21:53:48.608 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:53:48.6082836Z"
2025-01-20 21:53:48.609 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 12.6058ms.
2025-01-20 21:53:48.612 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:53:48.614 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 47.8972ms
2025-01-20 21:53:48.616 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:53:48.618 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 69.1273ms
2025-01-20 21:53:50.133 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:53:50.137 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:50.139 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:53:50.152 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:53:50.194 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:53:50.198 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:53:50.1979555Z"
2025-01-20 21:53:50.203 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:53:50.2038639Z"
2025-01-20 21:53:50.209 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:53:50.2091631Z"
2025-01-20 21:53:50.226 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:53:50.231 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:53:50.2313878Z"
2025-01-20 21:53:50.233 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:53:50.2331616Z"
2025-01-20 21:53:50.235 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 38.8883ms.
2025-01-20 21:53:50.239 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:53:50.241 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 84.9643ms
2025-01-20 21:53:50.243 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:53:50.245 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 112.4089ms
2025-01-20 21:53:50.251 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 21:53:50.256 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:50.258 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.4786ms
2025-01-20 21:53:50.262 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:53:50.266 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:53:50.267 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:53:50.269 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:53:50.276 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:53:50.410 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:53:50.415 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:53:50.417 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:53:50.423 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:53:50.424 +02:00 [INF] Parsing token...
2025-01-20 21:53:50.427 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:53:50.473 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:53:50.478 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:53:50.577 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:53:50.751 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 135
2025-01-20 21:53:50.757 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 344.576ms.
2025-01-20 21:53:50.760 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:53:50.762 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 482.1036ms
2025-01-20 21:53:50.763 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:53:50.766 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:53:50.767 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 505.1934ms
2025-01-20 21:55:32.783 +02:00 [INF] Starting up the application
2025-01-20 21:55:35.954 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 21:55:38.175 +02:00 [INF] Executed DbCommand (70ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 21:55:38.354 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:55:38.762 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 21:55:38.768 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 21:55:38.770 +02:00 [INF] Hosting environment: Development
2025-01-20 21:55:38.771 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 21:55:39.725 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 21:55:40.020 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 300.3672ms
2025-01-20 21:55:40.042 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 21:55:40.051 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.0808ms
2025-01-20 21:55:40.258 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 21:55:40.593 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 334.1627ms
2025-01-20 21:56:01.219 +02:00 [INF] Starting up the application
2025-01-20 21:56:04.369 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 21:56:06.541 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 21:56:06.701 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 21:56:07.089 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 21:56:07.095 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 21:56:07.097 +02:00 [INF] Hosting environment: Development
2025-01-20 21:56:07.099 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 21:56:08.081 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 21:56:08.360 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 289.9948ms
2025-01-20 21:56:08.381 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 21:56:08.420 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 39.1941ms
2025-01-20 21:56:08.619 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 21:56:08.941 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 321.6017ms
2025-01-20 21:56:23.063 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:56:23.074 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 21:56:23.250 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:56:23.279 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:56:23.645 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:56:23.649 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:56:23.6488367Z"
2025-01-20 21:56:23.766 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:56:23.832 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:23.8319227Z"
2025-01-20 21:56:23.835 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:23.8346726Z"
2025-01-20 21:56:23.837 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:23.8371895Z"
2025-01-20 21:56:23.844 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 192.6391ms.
2025-01-20 21:56:23.859 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:56:23.936 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 647.1785ms
2025-01-20 21:56:23.939 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:56:23.948 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 884.1483ms
2025-01-20 21:56:27.782 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 21:56:27.789 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:27.794 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:27.810 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:56:27.862 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:56:27.866 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T19:56:27.8665116Z"
2025-01-20 21:56:27.870 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T19:56:27.8707388Z"
2025-01-20 21:56:27.875 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T19:56:27.8759405Z"
2025-01-20 21:56:27.918 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:56:27.923 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T19:56:27.9238877Z"
2025-01-20 21:56:27.926 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T19:56:27.9263525Z"
2025-01-20 21:56:27.928 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 63.1508ms.
2025-01-20 21:56:27.930 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:56:27.934 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 120.0631ms
2025-01-20 21:56:27.937 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:27.940 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 157.7136ms
2025-01-20 21:56:27.947 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 21:56:27.953 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:27.957 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 10.0219ms
2025-01-20 21:56:27.962 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 21:56:27.967 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:27.970 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:56:28.120 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:28.127 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:56:28.170 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:56:28.175 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 21:56:28.177 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:56:28.180 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:56:28.181 +02:00 [INF] Parsing token...
2025-01-20 21:56:28.183 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:56:28.222 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:56:28.227 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:56:28.348 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:56:28.525 +02:00 [ERR] Error occurred while adding Gift 5 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:56:28.533 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 360.884ms.
2025-01-20 21:56:28.536 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:56:28.538 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 407.5962ms
2025-01-20 21:56:28.542 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:28.544 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:56:28.546 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 500 null text/plain; charset=utf-8 583.9521ms
2025-01-20 21:56:42.989 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:56:42.994 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:56:42.996 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:56:43.032 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:56:43.036 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:56:43.0363851Z"
2025-01-20 21:56:43.043 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:56:43.047 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:43.0474390Z"
2025-01-20 21:56:43.049 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:43.0490041Z"
2025-01-20 21:56:43.051 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:43.0516558Z"
2025-01-20 21:56:43.053 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 17.5328ms.
2025-01-20 21:56:43.058 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:56:43.060 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 61.9532ms
2025-01-20 21:56:43.062 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:56:43.064 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 75.7667ms
2025-01-20 21:56:46.296 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:56:46.300 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:46.304 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:46.307 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:56:46.344 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:56:46.346 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:56:46.3466672Z"
2025-01-20 21:56:46.348 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:56:46.3483636Z"
2025-01-20 21:56:46.350 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:56:46.3505005Z"
2025-01-20 21:56:46.363 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:56:46.368 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:56:46.3679975Z"
2025-01-20 21:56:46.369 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:56:46.3697204Z"
2025-01-20 21:56:46.371 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.1969ms.
2025-01-20 21:56:46.374 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:56:46.375 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 64.897ms
2025-01-20 21:56:46.377 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:46.379 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 83.7594ms
2025-01-20 21:56:46.385 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 21:56:46.390 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:46.391 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.0436ms
2025-01-20 21:56:46.396 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:56:46.401 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:46.402 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:56:46.406 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:46.408 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:56:46.440 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:56:46.442 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:56:46.443 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:56:46.445 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:56:46.446 +02:00 [INF] Parsing token...
2025-01-20 21:56:46.447 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:56:46.457 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:56:46.461 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:56:46.533 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:56:46.658 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:56:46.663 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 220.6842ms.
2025-01-20 21:56:46.665 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:56:46.667 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 256.2337ms
2025-01-20 21:56:46.669 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:46.671 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:56:46.673 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 276.8513ms
2025-01-20 21:56:48.857 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 21:56:48.863 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:48.865 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:48.870 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:56:48.915 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:56:48.917 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T19:56:48.9176000Z"
2025-01-20 21:56:48.919 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T19:56:48.9198968Z"
2025-01-20 21:56:48.921 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T19:56:48.9218628Z"
2025-01-20 21:56:48.927 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:56:48.930 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T19:56:48.9309154Z"
2025-01-20 21:56:48.932 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T19:56:48.9323648Z"
2025-01-20 21:56:48.934 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.5541ms.
2025-01-20 21:56:48.937 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:56:48.939 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 65.1653ms
2025-01-20 21:56:48.941 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:48.943 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 85.0509ms
2025-01-20 21:56:48.947 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 21:56:48.952 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:48.954 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 6.5487ms
2025-01-20 21:56:48.958 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 21:56:48.962 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:48.963 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:56:48.968 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:48.970 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:56:49.060 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:56:49.062 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 21:56:49.064 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:56:49.066 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:56:49.067 +02:00 [INF] Parsing token...
2025-01-20 21:56:49.070 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:56:49.080 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:56:49.087 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:56:49.147 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:56:49.269 +02:00 [ERR] Error occurred while adding Gift 5 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:56:49.274 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 211.4627ms.
2025-01-20 21:56:49.277 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:56:49.280 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 306.0763ms
2025-01-20 21:56:49.283 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:49.285 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:56:49.289 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 500 null text/plain; charset=utf-8 330.2153ms
2025-01-20 21:56:50.028 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/6 - null null
2025-01-20 21:56:50.031 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:50.033 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:50.035 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:56:50.064 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:56:50.067 +02:00 [INF] Starting GetByIdAsync with ID 6 at "2025-01-20T19:56:50.0669878Z"
2025-01-20 21:56:50.069 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-20T19:56:50.0693700Z"
2025-01-20 21:56:50.071 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-20T19:56:50.0712223Z"
2025-01-20 21:56:50.077 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:56:50.081 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 6 at "2025-01-20T19:56:50.0812747Z"
2025-01-20 21:56:50.083 +02:00 [INF] GetByIdAsync completed successfully with ID 6 at "2025-01-20T19:56:50.0834366Z"
2025-01-20 21:56:50.086 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.932ms.
2025-01-20 21:56:50.090 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:56:50.093 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 54.9053ms
2025-01-20 21:56:50.096 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:56:50.099 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/6 - 200 null application/json; charset=utf-8 70.502ms
2025-01-20 21:56:50.108 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=6 - null null
2025-01-20 21:56:50.113 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:50.115 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=6 - 204 null null 7.1511ms
2025-01-20 21:56:50.121 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=6 - application/json 2
2025-01-20 21:56:50.126 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:50.127 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:56:50.129 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:50.131 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:56:50.171 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:56:50.174 +02:00 [INF] Starting AddToBasketAsync with GiftId: 6 and Quantity: 1
2025-01-20 21:56:50.176 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:56:50.178 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:56:50.180 +02:00 [INF] Parsing token...
2025-01-20 21:56:50.182 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:56:50.197 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:56:50.206 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:56:50.276 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:56:50.406 +02:00 [ERR] Error occurred while adding Gift 6 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:56:50.411 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 237.4124ms.
2025-01-20 21:56:50.416 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:56:50.418 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 281.8577ms
2025-01-20 21:56:50.421 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:56:50.423 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:56:50.426 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=6 - 500 null text/plain; charset=utf-8 304.7511ms
2025-01-20 21:56:51.808 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:56:51.818 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:51.819 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 11.1667ms
2025-01-20 21:56:51.825 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:56:51.828 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:51.831 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:56:51.839 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:56:51.874 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:56:51.878 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:56:51.880 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:56:51.8805676Z"
2025-01-20 21:56:51.884 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:56:51.8848758Z"
2025-01-20 21:56:52.002 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:56:52.006 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:56:52.0068593Z"
2025-01-20 21:56:52.008 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:56:52.0081762Z"
2025-01-20 21:56:52.010 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:56:52.011 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 134.8038ms.
2025-01-20 21:56:52.014 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:56:52.021 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 178.197ms
2025-01-20 21:56:52.024 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:56:52.025 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 200.1567ms
2025-01-20 21:56:53.723 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:56:53.727 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:56:53.729 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:56:53.730 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:56:53.769 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:56:53.772 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:56:53.7720162Z"
2025-01-20 21:56:53.778 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:56:53.782 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:53.7820505Z"
2025-01-20 21:56:53.784 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:53.7844893Z"
2025-01-20 21:56:53.786 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:56:53.7864138Z"
2025-01-20 21:56:53.788 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 16.5094ms.
2025-01-20 21:56:53.791 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:56:53.793 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 58.772ms
2025-01-20 21:56:53.795 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:56:53.797 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 73.7675ms
2025-01-20 21:57:19.775 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:57:19.779 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:57:19.781 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:57:19.815 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:57:19.818 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:57:19.8185815Z"
2025-01-20 21:57:19.824 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:57:19.828 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:57:19.8287166Z"
2025-01-20 21:57:19.830 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:57:19.8300260Z"
2025-01-20 21:57:19.831 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:57:19.8313387Z"
2025-01-20 21:57:19.832 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.3149ms.
2025-01-20 21:57:19.835 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:57:19.837 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 53.0436ms
2025-01-20 21:57:19.839 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:57:19.840 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 65.0829ms
2025-01-20 21:57:40.475 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 21:57:40.479 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:57:40.482 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 21:57:40.512 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 21:57:40.514 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T19:57:40.5147814Z"
2025-01-20 21:57:40.520 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 21:57:40.524 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:57:40.5245909Z"
2025-01-20 21:57:40.525 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:57:40.5258536Z"
2025-01-20 21:57:40.527 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T19:57:40.5272820Z"
2025-01-20 21:57:40.529 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.6528ms.
2025-01-20 21:57:40.534 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:57:40.539 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 53.5029ms
2025-01-20 21:57:40.541 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 21:57:40.544 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 69.0182ms
2025-01-20 21:57:54.220 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:57:54.226 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:57:54.227 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:57:54.228 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:57:54.256 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:57:54.259 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:57:54.2593950Z"
2025-01-20 21:57:54.261 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:57:54.2611130Z"
2025-01-20 21:57:54.262 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:57:54.2626199Z"
2025-01-20 21:57:54.268 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:57:54.272 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:57:54.2728320Z"
2025-01-20 21:57:54.274 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:57:54.2742225Z"
2025-01-20 21:57:54.275 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.3724ms.
2025-01-20 21:57:54.278 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:57:54.279 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 48.0584ms
2025-01-20 21:57:54.282 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:57:54.285 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 64.2579ms
2025-01-20 21:57:54.292 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 21:57:54.297 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:57:54.314 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.8527ms
2025-01-20 21:57:54.342 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:57:54.345 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:57:54.346 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:57:54.347 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:57:54.349 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:57:54.378 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:57:54.380 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:57:54.382 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:57:54.383 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:57:54.385 +02:00 [INF] Parsing token...
2025-01-20 21:57:54.386 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:57:54.395 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:57:54.401 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:57:54.477 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:57:54.604 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:57:54.609 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 229.6584ms.
2025-01-20 21:57:54.612 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:57:54.613 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 260.9876ms
2025-01-20 21:57:54.616 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:57:54.617 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:57:54.619 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 276.7095ms
2025-01-20 21:57:56.391 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 21:57:56.395 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:57:56.396 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:57:56.397 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:57:56.442 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:57:56.445 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T19:57:56.4456012Z"
2025-01-20 21:57:56.447 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:57:56.4470982Z"
2025-01-20 21:57:56.448 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T19:57:56.4489349Z"
2025-01-20 21:57:56.456 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:57:56.461 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T19:57:56.4610708Z"
2025-01-20 21:57:56.462 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T19:57:56.4624948Z"
2025-01-20 21:57:56.464 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.45ms.
2025-01-20 21:57:56.468 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:57:56.471 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 68.4089ms
2025-01-20 21:57:56.474 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:57:56.477 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 85.8175ms
2025-01-20 21:57:56.485 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 21:57:56.490 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:57:56.491 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:57:56.493 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:57:56.495 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:57:56.616 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:57:56.619 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 21:57:56.620 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:57:56.622 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:57:56.623 +02:00 [INF] Parsing token...
2025-01-20 21:57:56.625 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:57:56.634 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:57:56.639 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:57:56.708 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:57:56.872 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:57:56.879 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 260.0013ms.
2025-01-20 21:57:56.885 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:57:56.888 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 389.9769ms
2025-01-20 21:57:56.891 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:57:56.893 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:57:56.895 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 410.1358ms
2025-01-20 21:58:14.087 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 21:58:14.091 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:14.093 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:58:14.094 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 21:58:14.123 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 21:58:14.126 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T19:58:14.1263352Z"
2025-01-20 21:58:14.127 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T19:58:14.1278151Z"
2025-01-20 21:58:14.129 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T19:58:14.1293271Z"
2025-01-20 21:58:14.135 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 21:58:14.139 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T19:58:14.1395738Z"
2025-01-20 21:58:14.141 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T19:58:14.1413266Z"
2025-01-20 21:58:14.142 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.6144ms.
2025-01-20 21:58:14.145 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 21:58:14.147 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 49.8574ms
2025-01-20 21:58:14.150 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 21:58:14.153 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 65.4856ms
2025-01-20 21:58:14.159 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 21:58:14.163 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:14.165 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 6.0634ms
2025-01-20 21:58:14.171 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 21:58:14.174 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:14.176 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 21:58:14.177 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:58:14.179 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 21:58:14.210 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 21:58:14.213 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 21:58:14.214 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 21:58:14.216 +02:00 [INF] Received request to fetch user by token.
2025-01-20 21:58:14.218 +02:00 [INF] Parsing token...
2025-01-20 21:58:14.220 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 21:58:14.231 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 21:58:14.238 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 21:58:14.310 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 21:58:14.452 +02:00 [ERR] Error occurred while adding Gift 5 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 21:58:14.457 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 244.4917ms.
2025-01-20 21:58:14.459 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 21:58:14.461 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 279.0039ms
2025-01-20 21:58:14.463 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 21:58:14.466 +02:00 [INF] Outgoing Response: 500
2025-01-20 21:58:14.468 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 500 null text/plain; charset=utf-8 297.3008ms
2025-01-20 21:58:16.106 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:58:16.110 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:16.113 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 7.1227ms
2025-01-20 21:58:16.124 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:58:16.129 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:16.132 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:58:16.134 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:58:16.161 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:58:16.163 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:58:16.164 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:58:16.1646423Z"
2025-01-20 21:58:16.166 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:58:16.1660923Z"
2025-01-20 21:58:16.179 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:58:16.183 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:58:16.1830002Z"
2025-01-20 21:58:16.184 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:58:16.1841333Z"
2025-01-20 21:58:16.185 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:58:16.186 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.3765ms.
2025-01-20 21:58:16.189 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:58:16.191 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 52.4495ms
2025-01-20 21:58:16.192 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:58:16.194 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 69.9985ms
2025-01-20 21:58:18.237 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/5/buyers - null null
2025-01-20 21:58:18.242 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:18.244 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/5/buyers - 204 null null 7.3499ms
2025-01-20 21:58:18.250 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/5/buyers - application/json null
2025-01-20 21:58:18.254 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:18.256 +02:00 [INF] Incoming Request: GET /api/User/5/buyers
2025-01-20 21:58:18.258 +02:00 [INF] Outgoing Response: 404
2025-01-20 21:58:18.259 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/5/buyers - 404 0 null 9.4117ms
2025-01-20 21:58:18.270 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/5/buyers, Response status code: 404
2025-01-20 21:58:24.586 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/5/buyers - null null
2025-01-20 21:58:24.590 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:24.593 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/5/buyers - 204 null null 7.0082ms
2025-01-20 21:58:24.598 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/5/buyers - application/json null
2025-01-20 21:58:24.602 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:24.604 +02:00 [INF] Incoming Request: GET /api/User/5/buyers
2025-01-20 21:58:24.606 +02:00 [INF] Outgoing Response: 404
2025-01-20 21:58:24.607 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/5/buyers - 404 0 null 8.8214ms
2025-01-20 21:58:24.613 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/5/buyers, Response status code: 404
2025-01-20 21:58:26.906 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - null null
2025-01-20 21:58:26.912 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:26.915 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - 204 null null 8.2027ms
2025-01-20 21:58:26.922 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - application/json null
2025-01-20 21:58:26.926 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:26.927 +02:00 [INF] Incoming Request: GET /api/User/4/buyers
2025-01-20 21:58:26.929 +02:00 [INF] Outgoing Response: 404
2025-01-20 21:58:26.931 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - 404 0 null 8.6638ms
2025-01-20 21:58:26.938 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/4/buyers, Response status code: 404
2025-01-20 21:58:28.578 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - application/json null
2025-01-20 21:58:28.585 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:58:28.586 +02:00 [INF] Incoming Request: GET /api/User/4/buyers
2025-01-20 21:58:28.592 +02:00 [INF] Outgoing Response: 404
2025-01-20 21:58:28.593 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - 404 0 null 15.5202ms
2025-01-20 21:58:28.602 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/4/buyers, Response status code: 404
2025-01-20 21:59:46.978 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:59:47.001 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:59:47.003 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:59:47.055 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:59:47.057 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:59:47.059 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:59:47.0590523Z"
2025-01-20 21:59:47.060 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:59:47.0604664Z"
2025-01-20 21:59:47.073 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:59:47.078 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:59:47.0782175Z"
2025-01-20 21:59:47.079 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:59:47.0798013Z"
2025-01-20 21:59:47.081 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:59:47.083 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.7636ms.
2025-01-20 21:59:47.085 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:59:47.087 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 80.2423ms
2025-01-20 21:59:47.089 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:59:47.091 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 112.1514ms
2025-01-20 21:59:47.653 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:59:47.729 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:59:47.734 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 81.2602ms
2025-01-20 21:59:47.742 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 21:59:47.748 +02:00 [INF] CORS policy execution successful.
2025-01-20 21:59:47.752 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:59:47.755 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:59:47.886 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:59:47.952 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:59:47.955 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:59:47.9552898Z"
2025-01-20 21:59:47.967 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:59:47.9673301Z"
2025-01-20 21:59:48.047 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:59:48.064 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:59:48.0644896Z"
2025-01-20 21:59:48.066 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:59:48.0668715Z"
2025-01-20 21:59:48.069 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:59:48.073 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 121.0363ms.
2025-01-20 21:59:48.106 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:59:48.134 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 373.9843ms
2025-01-20 21:59:48.146 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:59:48.185 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 443.1659ms
2025-01-20 21:59:59.627 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 21:59:59.631 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:59:59.633 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 21:59:59.665 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 21:59:59.669 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 21:59:59.670 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:59:59.6705924Z"
2025-01-20 21:59:59.671 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T19:59:59.6718699Z"
2025-01-20 21:59:59.681 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 21:59:59.687 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:59:59.6873997Z"
2025-01-20 21:59:59.689 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T19:59:59.6893292Z"
2025-01-20 21:59:59.690 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 21:59:59.692 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.2625ms.
2025-01-20 21:59:59.695 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 21:59:59.697 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 60.4769ms
2025-01-20 21:59:59.701 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 21:59:59.704 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 77.1246ms
2025-01-20 22:00:00.250 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:00:00.255 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:00.261 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 10.3875ms
2025-01-20 22:00:00.271 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:00:00.286 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:00.293 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:00:00.297 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:00:00.443 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:00:00.447 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:00:00.450 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:00:00.4505925Z"
2025-01-20 22:00:00.454 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:00:00.4540177Z"
2025-01-20 22:00:00.473 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:00:00.479 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:00:00.4791660Z"
2025-01-20 22:00:00.481 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:00:00.4814326Z"
2025-01-20 22:00:00.483 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:00:00.484 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.8492ms.
2025-01-20 22:00:00.488 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:00:00.493 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 174.4747ms
2025-01-20 22:00:00.499 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:00:00.508 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 236.1643ms
2025-01-20 22:00:10.241 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:00:10.245 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:00:10.248 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:00:10.278 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:00:10.281 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:00:10.283 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:00:10.2834029Z"
2025-01-20 22:00:10.285 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:00:10.2849933Z"
2025-01-20 22:00:10.296 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:00:10.301 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:00:10.3010157Z"
2025-01-20 22:00:10.302 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:00:10.3029004Z"
2025-01-20 22:00:10.304 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:00:10.305 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.401ms.
2025-01-20 22:00:10.308 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:00:10.310 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 57.2793ms
2025-01-20 22:00:10.313 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:00:10.316 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 75.431ms
2025-01-20 22:00:10.804 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:00:10.855 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:10.858 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 53.6987ms
2025-01-20 22:00:10.866 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:00:10.871 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:10.873 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:00:10.875 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:00:10.938 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:00:10.941 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:00:10.942 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:00:10.9427963Z"
2025-01-20 22:00:10.944 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:00:10.9448002Z"
2025-01-20 22:00:10.967 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:00:10.976 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:00:10.9765866Z"
2025-01-20 22:00:10.978 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:00:10.9781119Z"
2025-01-20 22:00:10.979 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:00:10.981 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 40.7855ms.
2025-01-20 22:00:10.986 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:00:10.989 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 106.3958ms
2025-01-20 22:00:10.991 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:00:10.993 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 127.7496ms
2025-01-20 22:00:17.128 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 22:00:17.133 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:17.134 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 6.3728ms
2025-01-20 22:00:17.138 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 22:00:17.141 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:17.143 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 22:00:17.150 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 22:00:17.232 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 22:00:17.260 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 22:00:17.483 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 22:00:17.513 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 22:00:17.544 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 22:00:17.567 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 332.2601ms.
2025-01-20 22:00:17.570 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:00:17.586 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 432.186ms
2025-01-20 22:00:17.590 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 22:00:17.592 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 454.1361ms
2025-01-20 22:00:20.193 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:00:20.200 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:20.202 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:00:20.204 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:00:20.232 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:00:20.236 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:00:20.2361201Z"
2025-01-20 22:00:20.242 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:00:20.246 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:00:20.2467182Z"
2025-01-20 22:00:20.248 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:00:20.2480260Z"
2025-01-20 22:00:20.249 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:00:20.2496166Z"
2025-01-20 22:00:20.251 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.9063ms.
2025-01-20 22:00:20.253 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:00:20.256 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 48.2429ms
2025-01-20 22:00:20.258 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:00:20.261 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 67.9692ms
2025-01-20 22:00:23.272 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 22:00:23.275 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:23.277 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:00:23.278 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:00:23.330 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:00:23.333 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T20:00:23.3333380Z"
2025-01-20 22:00:23.335 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:00:23.3355705Z"
2025-01-20 22:00:23.337 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:00:23.3374914Z"
2025-01-20 22:00:23.343 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:00:23.348 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T20:00:23.3483758Z"
2025-01-20 22:00:23.350 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T20:00:23.3507177Z"
2025-01-20 22:00:23.352 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.634ms.
2025-01-20 22:00:23.355 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:00:23.357 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 71.8932ms
2025-01-20 22:00:23.359 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:00:23.360 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 88.7528ms
2025-01-20 22:00:23.381 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 22:00:23.385 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:23.387 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.0745ms
2025-01-20 22:00:23.391 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 22:00:23.394 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:00:23.396 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:00:23.398 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:00:23.400 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:00:23.426 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:00:23.428 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 22:00:23.430 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:00:23.431 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:00:23.432 +02:00 [INF] Parsing token...
2025-01-20 22:00:23.434 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:00:23.442 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:00:23.446 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:00:23.533 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:00:23.647 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:00:23.652 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 223.9756ms.
2025-01-20 22:00:23.654 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 22:00:23.656 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 252.947ms
2025-01-20 22:00:23.658 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:00:23.661 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:00:23.662 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 271.0305ms
2025-01-20 22:01:42.108 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 22:01:42.127 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:42.128 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 20.2357ms
2025-01-20 22:01:42.183 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 22:01:42.186 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:42.189 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 22:01:42.190 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 22:01:42.239 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 22:01:42.250 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 22:01:42.417 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 22:01:42.425 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 22:01:42.432 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 22:01:42.436 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 194.4213ms.
2025-01-20 22:01:42.439 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:01:42.441 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 247.5864ms
2025-01-20 22:01:42.443 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 22:01:42.445 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 262.6226ms
2025-01-20 22:01:45.958 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:01:45.968 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:45.977 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:01:45.979 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:01:46.004 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:01:46.006 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:01:46.0064587Z"
2025-01-20 22:01:46.010 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:01:46.014 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:01:46.0147187Z"
2025-01-20 22:01:46.016 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:01:46.0162151Z"
2025-01-20 22:01:46.017 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:01:46.0177552Z"
2025-01-20 22:01:46.019 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 12.7164ms.
2025-01-20 22:01:46.022 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:01:46.024 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 41.585ms
2025-01-20 22:01:46.027 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:01:46.030 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 71.4531ms
2025-01-20 22:01:47.610 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 22:01:47.616 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:47.618 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:01:47.621 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:01:47.653 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:01:47.656 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T20:01:47.6561201Z"
2025-01-20 22:01:47.658 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T20:01:47.6580892Z"
2025-01-20 22:01:47.659 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T20:01:47.6599006Z"
2025-01-20 22:01:47.665 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:01:47.670 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T20:01:47.6701312Z"
2025-01-20 22:01:47.671 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T20:01:47.6719019Z"
2025-01-20 22:01:47.673 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.6867ms.
2025-01-20 22:01:47.676 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:01:47.678 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 53.2416ms
2025-01-20 22:01:47.680 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:01:47.683 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 72.6743ms
2025-01-20 22:01:47.690 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 22:01:47.694 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:47.696 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 5.7488ms
2025-01-20 22:01:47.701 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 22:01:47.704 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:47.705 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:01:47.707 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:01:47.708 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:01:47.784 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:01:47.787 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 22:01:47.788 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:01:47.790 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:01:47.791 +02:00 [INF] Parsing token...
2025-01-20 22:01:47.792 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:01:47.804 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:01:47.809 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:01:47.883 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:01:47.997 +02:00 [ERR] Error occurred while adding Gift 5 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:01:48.003 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 216.311ms.
2025-01-20 22:01:48.006 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 22:01:48.009 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 297.737ms
2025-01-20 22:01:48.011 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:01:48.014 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:01:48.015 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 500 null text/plain; charset=utf-8 314.8285ms
2025-01-20 22:01:57.423 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 22:01:57.430 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:57.432 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:01:57.434 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:01:57.467 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:01:57.471 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T20:01:57.4710844Z"
2025-01-20 22:01:57.473 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:01:57.4737055Z"
2025-01-20 22:01:57.475 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:01:57.4757048Z"
2025-01-20 22:01:57.482 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:01:57.487 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T20:01:57.4875011Z"
2025-01-20 22:01:57.488 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T20:01:57.4889389Z"
2025-01-20 22:01:57.490 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.4388ms.
2025-01-20 22:01:57.492 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:01:57.494 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 55.7649ms
2025-01-20 22:01:57.499 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:01:57.502 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 78.075ms
2025-01-20 22:01:57.508 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 22:01:57.513 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:57.515 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 7.0443ms
2025-01-20 22:01:57.520 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 22:01:57.523 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:01:57.524 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:01:57.526 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:01:57.527 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:01:57.592 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:01:57.594 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 22:01:57.597 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:01:57.599 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:01:57.601 +02:00 [INF] Parsing token...
2025-01-20 22:01:57.602 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:01:57.610 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:01:57.617 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:01:57.685 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:01:57.800 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:01:57.804 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 209.9664ms.
2025-01-20 22:01:57.807 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 22:01:57.808 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 276.4253ms
2025-01-20 22:01:57.811 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:01:57.813 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:01:57.815 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 294.8333ms
2025-01-20 22:02:20.907 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=category&order=desc - null null
2025-01-20 22:02:20.923 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:02:20.924 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=category&order=desc - 204 null null 17.7633ms
2025-01-20 22:02:20.933 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=category&order=desc - application/json null
2025-01-20 22:02:20.938 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:02:20.939 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:02:20.941 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:02:20.956 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:02:20.989 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 45.8516ms
2025-01-20 22:02:20.992 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:02:20.994 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=category&order=desc - 400 null application/problem+json; charset=utf-8 60.6755ms
2025-01-20 22:02:24.626 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=category&order=desc - application/json null
2025-01-20 22:02:24.632 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:02:24.634 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:02:24.636 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:02:24.640 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:02:24.642 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.0306ms
2025-01-20 22:02:24.644 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:02:24.647 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=category&order=desc - 400 null application/problem+json; charset=utf-8 20.9341ms
2025-01-20 22:03:54.190 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 22:03:54.203 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:03:54.204 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 25.968ms
2025-01-20 22:03:54.224 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 22:03:54.228 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:03:54.229 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 22:03:54.231 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:03:54.237 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 22:03:54.270 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 22:03:54.274 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 22:03:54.281 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:03:54.285 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:03:54.337 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 22:03:54.406 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:03:54.408 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:03:54.410 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:03:54.412 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 139.0937ms.
2025-01-20 22:03:54.414 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:03:54.425 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 185.7261ms
2025-01-20 22:03:54.428 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:03:54.432 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:03:54.434 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 210.3794ms
2025-01-20 22:03:57.301 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:03:57.305 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:03:57.306 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:03:57.313 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:03:57.348 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:03:57.352 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:03:57.3528809Z"
2025-01-20 22:03:57.357 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:03:57.3575086Z"
2025-01-20 22:03:57.364 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:03:57.3642324Z"
2025-01-20 22:03:57.406 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:03:57.411 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:03:57.4113054Z"
2025-01-20 22:03:57.413 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:03:57.4136960Z"
2025-01-20 22:03:57.415 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:03:57.4155433Z"
2025-01-20 22:03:57.417 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 65.9042ms.
2025-01-20 22:03:57.419 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:03:57.422 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 103.9527ms
2025-01-20 22:03:57.423 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:03:57.425 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 124.1187ms
2025-01-20 22:04:06.529 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:04:06.533 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:04:06.535 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.047ms
2025-01-20 22:04:06.540 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:04:06.546 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:04:06.548 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:04:06.552 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:04:06.559 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:04:06.588 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:04:06.597 +02:00 [INF] Fetching all donators.
2025-01-20 22:04:06.599 +02:00 [INF] Fetching all donators.
2025-01-20 22:04:06.611 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:04:06.654 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:04:06.655 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.213ms.
2025-01-20 22:04:06.657 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:04:06.662 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 98.9422ms
2025-01-20 22:04:06.665 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:04:06.666 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:04:06.668 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 128.158ms
2025-01-20 22:04:17.752 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:04:17.758 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:04:17.760 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.7527ms
2025-01-20 22:04:17.766 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:04:17.771 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:04:17.772 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:04:17.774 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:04:17.776 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:04:17.806 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:04:17.809 +02:00 [INF] Fetching all donators.
2025-01-20 22:04:17.810 +02:00 [INF] Fetching all donators.
2025-01-20 22:04:17.815 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:04:17.819 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:04:17.820 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.0736ms.
2025-01-20 22:04:17.822 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:04:17.824 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 44.9364ms
2025-01-20 22:04:17.827 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:04:17.830 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:04:17.831 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 65.4675ms
2025-01-20 22:04:22.840 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:04:22.844 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:04:22.846 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.672ms
2025-01-20 22:04:22.852 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:04:22.856 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:04:22.858 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:04:22.861 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:04:22.863 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:04:22.891 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:04:22.894 +02:00 [INF] Fetching all donators.
2025-01-20 22:04:22.896 +02:00 [INF] Fetching all donators.
2025-01-20 22:04:22.899 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:04:22.903 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:04:22.904 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.3077ms.
2025-01-20 22:04:22.907 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:04:22.910 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 42.2255ms
2025-01-20 22:04:22.912 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:04:22.915 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:04:22.916 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 64.2708ms
2025-01-20 22:05:28.633 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:05:28.653 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:05:28.654 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:05:28.655 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 21.7015ms
2025-01-20 22:05:29.145 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:05:29.150 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:05:29.151 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.4095ms
2025-01-20 22:05:29.157 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:05:29.165 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:05:29.167 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:05:29.171 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:05:29.183 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:05:29.237 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:05:29.247 +02:00 [INF] Fetching all donators.
2025-01-20 22:05:29.249 +02:00 [INF] Fetching all donators.
2025-01-20 22:05:29.266 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:05:29.336 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:05:29.337 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 90.0163ms.
2025-01-20 22:05:29.348 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:05:29.355 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 160.1111ms
2025-01-20 22:05:29.358 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:05:29.364 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:05:29.367 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 209.4576ms
2025-01-20 22:08:12.665 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:08:12.689 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:08:12.690 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:08:12.692 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 26.2856ms
2025-01-20 22:08:13.319 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:08:13.326 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:08:13.328 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 9.0707ms
2025-01-20 22:08:13.334 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:08:13.338 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:08:13.340 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:08:13.345 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:08:13.347 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:08:13.392 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:08:13.395 +02:00 [INF] Fetching all donators.
2025-01-20 22:08:13.396 +02:00 [INF] Fetching all donators.
2025-01-20 22:08:13.402 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:08:13.407 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:08:13.409 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.6607ms.
2025-01-20 22:08:13.413 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:08:13.416 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 64.7442ms
2025-01-20 22:08:13.419 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:08:13.421 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:08:13.423 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 89.3535ms
2025-01-20 22:08:24.681 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:08:24.699 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:08:24.700 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:08:24.701 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 20.1713ms
2025-01-20 22:08:25.247 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:08:25.252 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:08:25.257 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 10.1189ms
2025-01-20 22:08:25.266 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:08:25.270 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:08:25.272 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:08:25.276 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:08:25.279 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:08:25.320 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:08:25.323 +02:00 [INF] Fetching all donators.
2025-01-20 22:08:25.324 +02:00 [INF] Fetching all donators.
2025-01-20 22:08:25.329 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:08:25.334 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:08:25.335 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.6742ms.
2025-01-20 22:08:25.339 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:08:25.343 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 58.1641ms
2025-01-20 22:08:25.345 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:08:25.347 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:08:25.349 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 83.1035ms
2025-01-20 22:09:52.750 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:09:52.772 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:09:52.773 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:09:52.776 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 25.6097ms
2025-01-20 22:09:53.449 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:09:53.454 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:09:53.456 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.3666ms
2025-01-20 22:09:53.461 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:09:53.466 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:09:53.468 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:09:53.470 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:09:53.472 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:09:53.570 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:09:53.578 +02:00 [INF] Fetching all donators.
2025-01-20 22:09:53.579 +02:00 [INF] Fetching all donators.
2025-01-20 22:09:53.586 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:09:53.594 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:09:53.597 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.8563ms.
2025-01-20 22:09:53.603 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:09:53.610 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 134.2443ms
2025-01-20 22:09:53.614 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:09:53.616 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:09:53.618 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 157.0409ms
2025-01-20 22:09:55.644 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:09:55.651 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:09:55.653 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:09:55.654 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 10.2414ms
2025-01-20 22:09:57.083 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:09:57.088 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:09:57.090 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:09:57.095 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:09:57.097 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:09:57.149 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:09:57.153 +02:00 [INF] Fetching all donators.
2025-01-20 22:09:57.154 +02:00 [INF] Fetching all donators.
2025-01-20 22:09:57.168 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:09:57.201 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:09:57.202 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 49.8213ms.
2025-01-20 22:09:57.206 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:09:57.210 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 107.383ms
2025-01-20 22:09:57.212 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:09:57.214 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:09:57.216 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 132.4623ms
2025-01-20 22:09:58.415 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:09:58.420 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:09:58.421 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:09:58.424 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 8.1318ms
2025-01-20 22:09:58.894 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:09:58.906 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:09:58.908 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 13.7002ms
2025-01-20 22:09:58.915 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:09:58.920 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:09:58.922 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:09:58.925 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:09:58.927 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:09:58.974 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:09:58.977 +02:00 [INF] Fetching all donators.
2025-01-20 22:09:58.978 +02:00 [INF] Fetching all donators.
2025-01-20 22:09:58.987 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:09:59.011 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:09:59.014 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 37.6668ms.
2025-01-20 22:09:59.025 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:09:59.028 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 95.5437ms
2025-01-20 22:09:59.031 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:09:59.033 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:09:59.035 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 119.6897ms
2025-01-20 22:10:16.048 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - null null
2025-01-20 22:10:16.052 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:10:16.054 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - 204 null null 6.2773ms
2025-01-20 22:10:16.061 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/1 - application/json null
2025-01-20 22:10:16.065 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:10:16.066 +02:00 [INF] Incoming Request: GET /api/Donator/1
2025-01-20 22:10:16.069 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-20 22:10:16.078 +02:00 [INF] Route matched with {action = "GetById", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByIdAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:10:16.105 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:10:16.112 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:10:16.118 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:10:16.140 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:10:16.146 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 38.7823ms.
2025-01-20 22:10:16.150 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Donator'.
2025-01-20 22:10:16.153 +02:00 [INF] Executed action project.Controllers.DonatorController.GetByIdAsync (project) in 71.6745ms
2025-01-20 22:10:16.157 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-20 22:10:16.160 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:10:16.162 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/1 - 200 null application/json; charset=utf-8 101.0083ms
2025-01-20 22:10:18.680 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:10:18.685 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:10:18.686 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.9336ms
2025-01-20 22:10:18.693 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Donator - application/json 80
2025-01-20 22:10:18.698 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:10:18.700 +02:00 [INF] Incoming Request: PUT /api/Donator
2025-01-20 22:10:18.703 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-20 22:10:18.712 +02:00 [INF] Route matched with {action = "UpdateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-20 22:10:18.759 +02:00 [INF] Executing action method project.Controllers.DonatorController.UpdateDonatorAsync (project) - Validation state: "Valid"
2025-01-20 22:10:18.764 +02:00 [INF] Updating donator with ID: 1
2025-01-20 22:10:18.766 +02:00 [INF] Updating donator with ID: 1
2025-01-20 22:10:18.931 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Donators] SET [Email] = @p0, [Name] = @p1, [Phone] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-01-20 22:10:18.982 +02:00 [INF] Successfully updated donator with ID: 1
2025-01-20 22:10:18.984 +02:00 [INF] Donator with ID 1 updated successfully.
2025-01-20 22:10:18.985 +02:00 [INF] Executed action method project.Controllers.DonatorController.UpdateDonatorAsync (project), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 222.6513ms.
2025-01-20 22:10:18.992 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-01-20 22:10:18.994 +02:00 [INF] Executed action project.Controllers.DonatorController.UpdateDonatorAsync (project) in 277.7687ms
2025-01-20 22:10:18.996 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-20 22:10:18.997 +02:00 [INF] Outgoing Response: 204
2025-01-20 22:10:18.999 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Donator - 204 null null 305.9304ms
2025-01-20 22:11:03.052 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:11:03.056 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:11:03.058 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:11:03.066 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 13.9345ms
2025-01-20 22:11:03.137 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:11:03.141 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:11:03.143 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:11:03.145 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 7.6923ms
2025-01-20 22:11:03.674 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:11:03.685 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:03.687 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 12.8132ms
2025-01-20 22:11:03.696 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:11:03.700 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:03.702 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:11:03.704 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:11:03.707 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:11:03.748 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:11:03.751 +02:00 [INF] Fetching all donators.
2025-01-20 22:11:03.752 +02:00 [INF] Fetching all donators.
2025-01-20 22:11:03.758 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:11:03.786 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:11:03.788 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 37.0483ms.
2025-01-20 22:11:03.792 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:11:03.795 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 81.1525ms
2025-01-20 22:11:03.797 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:11:03.799 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:11:03.803 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 106.5496ms
2025-01-20 22:11:18.386 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:11:18.398 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:11:18.402 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:11:18.410 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 23.267ms
2025-01-20 22:11:18.952 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:11:18.959 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:18.967 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 15.4475ms
2025-01-20 22:11:18.978 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:11:18.982 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:18.985 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:11:18.994 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:11:19.005 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:11:19.089 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:11:19.097 +02:00 [INF] Fetching all donators.
2025-01-20 22:11:19.099 +02:00 [INF] Fetching all donators.
2025-01-20 22:11:19.112 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:11:19.119 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:11:19.121 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.012ms.
2025-01-20 22:11:19.127 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:11:19.131 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 103.651ms
2025-01-20 22:11:19.133 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:11:19.136 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:11:19.140 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 162.6025ms
2025-01-20 22:11:21.929 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - null null
2025-01-20 22:11:21.934 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:21.935 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/1 - 204 null null 5.8964ms
2025-01-20 22:11:21.940 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/1 - application/json null
2025-01-20 22:11:21.944 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:21.946 +02:00 [INF] Incoming Request: GET /api/Donator/1
2025-01-20 22:11:21.948 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-20 22:11:21.950 +02:00 [INF] Route matched with {action = "GetById", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByIdAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:11:21.977 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:11:21.980 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:11:21.981 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:11:21.986 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:11:21.992 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.0547ms.
2025-01-20 22:11:21.996 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Donator'.
2025-01-20 22:11:21.999 +02:00 [INF] Executed action project.Controllers.DonatorController.GetByIdAsync (project) in 45.0258ms
2025-01-20 22:11:22.003 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-20 22:11:22.006 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:11:22.008 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/1 - 200 null application/json; charset=utf-8 68.1784ms
2025-01-20 22:11:23.413 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:11:23.417 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:23.419 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.0831ms
2025-01-20 22:11:23.426 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Donator - application/json 80
2025-01-20 22:11:23.430 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:23.432 +02:00 [INF] Incoming Request: PUT /api/Donator
2025-01-20 22:11:23.434 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-20 22:11:23.435 +02:00 [INF] Route matched with {action = "UpdateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-20 22:11:23.463 +02:00 [INF] Executing action method project.Controllers.DonatorController.UpdateDonatorAsync (project) - Validation state: "Valid"
2025-01-20 22:11:23.466 +02:00 [INF] Updating donator with ID: 1
2025-01-20 22:11:23.467 +02:00 [INF] Updating donator with ID: 1
2025-01-20 22:11:23.479 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Donators] SET [Email] = @p0, [Name] = @p1, [Phone] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-01-20 22:11:23.483 +02:00 [INF] Successfully updated donator with ID: 1
2025-01-20 22:11:23.485 +02:00 [INF] Donator with ID 1 updated successfully.
2025-01-20 22:11:23.486 +02:00 [INF] Executed action method project.Controllers.DonatorController.UpdateDonatorAsync (project), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 19.9828ms.
2025-01-20 22:11:23.489 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-01-20 22:11:23.491 +02:00 [INF] Executed action project.Controllers.DonatorController.UpdateDonatorAsync (project) in 52.6912ms
2025-01-20 22:11:23.494 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-20 22:11:23.496 +02:00 [INF] Outgoing Response: 204
2025-01-20 22:11:23.498 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Donator - 204 null null 71.5466ms
2025-01-20 22:11:25.138 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:11:25.143 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:25.145 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:11:25.147 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:11:25.149 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:11:25.173 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:11:25.177 +02:00 [INF] Fetching all donators.
2025-01-20 22:11:25.178 +02:00 [INF] Fetching all donators.
2025-01-20 22:11:25.182 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:11:25.186 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:11:25.187 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.3485ms.
2025-01-20 22:11:25.192 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:11:25.197 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 44.2992ms
2025-01-20 22:11:25.200 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:11:25.202 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:11:25.204 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 65.3379ms
2025-01-20 22:11:30.469 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - null null
2025-01-20 22:11:30.475 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:30.477 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - 204 null null 7.3251ms
2025-01-20 22:11:30.481 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - application/json null
2025-01-20 22:11:30.484 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:11:30.486 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/1
2025-01-20 22:11:30.489 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:11:30.497 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:11:30.533 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:11:30.538 +02:00 [INF] Fetching donator with gifts for ID: 1
2025-01-20 22:11:30.540 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:11:30.544 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:11:30.550 +02:00 [INF] Fetching gifts for donator ID: 1
2025-01-20 22:11:30.563 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-20 22:11:30.579 +02:00 [INF] Successfully fetched 4 gifts for donator ID: 1
2025-01-20 22:11:30.581 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 45.9756ms.
2025-01-20 22:11:30.583 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:11:30.592 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 91.0056ms
2025-01-20 22:11:30.594 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:11:30.596 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:11:30.598 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - 200 null application/json; charset=utf-8 116.5281ms
2025-01-20 22:12:13.046 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - null null
2025-01-20 22:12:13.051 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:13.052 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/register - 204 null null 6.029ms
2025-01-20 22:12:13.075 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/register - application/json 106
2025-01-20 22:12:13.078 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:13.079 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 22:12:13.085 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(project.Models.Register) on controller project.Controllers.AuthController (project).
2025-01-20 22:12:13.127 +02:00 [INF] Executing action method project.Controllers.AuthController.Register (project) - Validation state: "Valid"
2025-01-20 22:12:13.286 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 22:12:13.374 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 13), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
2025-01-20 22:12:13.382 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 22:12:13.421 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@userId='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
UPDATE AspNetUsers SET Discriminator = 'User' WHERE Id = @userId
2025-01-20 22:12:13.428 +02:00 [INF] User registered successfully: dgs
2025-01-20 22:12:13.429 +02:00 [INF] User registered successfully.
2025-01-20 22:12:13.431 +02:00 [INF] Executed action method project.Controllers.AuthController.Register (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 302.1849ms.
2025-01-20 22:12:13.434 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:12:13.438 +02:00 [INF] Executed action project.Controllers.AuthController.Register (project) in 349.067ms
2025-01-20 22:12:13.440 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Register (project)'
2025-01-20 22:12:13.442 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/register - 200 null application/json; charset=utf-8 367.8458ms
2025-01-20 22:12:29.431 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 22:12:29.435 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:29.437 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 5.8798ms
2025-01-20 22:12:29.442 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 22:12:29.445 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:29.447 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 22:12:29.448 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 22:12:29.472 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 22:12:29.481 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 22:12:29.629 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 22:12:29.637 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 22:12:29.645 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 22:12:29.649 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 174.7865ms.
2025-01-20 22:12:29.651 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:12:29.653 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 202.7633ms
2025-01-20 22:12:29.658 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 22:12:29.660 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 217.5432ms
2025-01-20 22:12:31.262 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:12:31.267 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:31.270 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:12:31.273 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:12:31.299 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:12:31.301 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:12:31.3016999Z"
2025-01-20 22:12:31.306 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:12:31.310 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:12:31.3102137Z"
2025-01-20 22:12:31.311 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:12:31.3113302Z"
2025-01-20 22:12:31.312 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:12:31.3126047Z"
2025-01-20 22:12:31.313 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 12.161ms.
2025-01-20 22:12:31.316 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:12:31.318 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 40.5341ms
2025-01-20 22:12:31.320 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:12:31.322 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 59.3252ms
2025-01-20 22:12:32.962 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 22:12:32.967 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:32.968 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:12:32.970 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:12:33.002 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:12:33.006 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T20:12:33.0062625Z"
2025-01-20 22:12:33.009 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:12:33.0091483Z"
2025-01-20 22:12:33.012 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:12:33.0122562Z"
2025-01-20 22:12:33.018 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:12:33.022 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T20:12:33.0222964Z"
2025-01-20 22:12:33.024 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T20:12:33.0247798Z"
2025-01-20 22:12:33.027 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.8511ms.
2025-01-20 22:12:33.031 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:12:33.032 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 58.1254ms
2025-01-20 22:12:33.035 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:12:33.037 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 74.6426ms
2025-01-20 22:12:33.043 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 22:12:33.047 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:33.049 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 6.3289ms
2025-01-20 22:12:33.055 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 22:12:33.059 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:12:33.060 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:12:33.062 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:12:33.064 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:12:33.133 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:12:33.135 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 22:12:33.137 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:12:33.138 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:12:33.140 +02:00 [INF] Parsing token...
2025-01-20 22:12:33.142 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:12:33.149 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:12:33.154 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:12:33.208 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:12:33.313 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:12:33.318 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 182.9901ms.
2025-01-20 22:12:33.321 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 22:12:33.323 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 256.2929ms
2025-01-20 22:12:33.325 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:12:33.327 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:12:33.329 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null text/plain; charset=utf-8 273.8578ms
2025-01-20 22:14:14.470 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:14:14.477 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:14.479 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 8.404ms
2025-01-20 22:14:14.505 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:14:14.510 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:14.512 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:14:14.513 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:14:14.547 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:14:14.549 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:14:14.550 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:14:14.5503582Z"
2025-01-20 22:14:14.551 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:14:14.5516175Z"
2025-01-20 22:14:14.561 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:14:14.565 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:14:14.5651044Z"
2025-01-20 22:14:14.566 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:14:14.5664187Z"
2025-01-20 22:14:14.568 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:14:14.570 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.0969ms.
2025-01-20 22:14:14.574 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:14:14.576 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 58.9723ms
2025-01-20 22:14:14.578 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:14:14.581 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 76.3405ms
2025-01-20 22:14:21.028 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - null null
2025-01-20 22:14:21.033 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:21.035 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 204 null null 6.8678ms
2025-01-20 22:14:21.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - application/json null
2025-01-20 22:14:21.059 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:21.061 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:21.062 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:14:21.066 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:14:21.068 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 2.9014ms
2025-01-20 22:14:21.071 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:21.074 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 400 null application/problem+json; charset=utf-8 18.3898ms
2025-01-20 22:14:21.934 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - application/json null
2025-01-20 22:14:21.940 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:21.941 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:21.942 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:14:21.946 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:14:21.948 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.126ms
2025-01-20 22:14:21.950 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:21.954 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 400 null application/problem+json; charset=utf-8 19.4862ms
2025-01-20 22:14:23.203 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - null null
2025-01-20 22:14:23.208 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:23.209 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 204 null null 6.3826ms
2025-01-20 22:14:23.214 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 22:14:23.217 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:23.218 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:23.221 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:14:23.226 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:14:23.228 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.2971ms
2025-01-20 22:14:23.230 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:23.232 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 18.5177ms
2025-01-20 22:14:24.453 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 22:14:24.459 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:24.461 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:24.463 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:14:24.466 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:14:24.468 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 2.7332ms
2025-01-20 22:14:24.472 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:24.474 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 21.2003ms
2025-01-20 22:14:26.585 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - null null
2025-01-20 22:14:26.591 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:26.592 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 204 null null 6.788ms
2025-01-20 22:14:26.597 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - application/json null
2025-01-20 22:14:26.600 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:14:26.603 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:26.605 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:14:26.610 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:14:26.613 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.4759ms
2025-01-20 22:14:26.616 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:14:26.618 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 400 null application/problem+json; charset=utf-8 21.002ms
2025-01-20 22:16:56.648 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:16:56.657 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:16:56.659 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:16:56.706 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:16:56.709 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:16:56.710 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:16:56.7104686Z"
2025-01-20 22:16:56.711 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:16:56.7117659Z"
2025-01-20 22:16:56.736 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:16:56.743 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:16:56.7430142Z"
2025-01-20 22:16:56.745 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:16:56.7452751Z"
2025-01-20 22:16:56.747 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:16:56.750 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 40.6879ms.
2025-01-20 22:16:56.754 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:16:56.757 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 94.8661ms
2025-01-20 22:16:56.759 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:16:56.761 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 113.8384ms
2025-01-20 22:16:57.138 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:16:57.198 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:16:57.201 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 62.1471ms
2025-01-20 22:16:57.212 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:16:57.216 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:16:57.237 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:16:57.239 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:16:57.405 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:16:57.429 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:16:57.431 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:16:57.4313680Z"
2025-01-20 22:16:57.433 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:16:57.4330498Z"
2025-01-20 22:16:57.439 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:16:57.483 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:16:57.4839346Z"
2025-01-20 22:16:57.486 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:16:57.4868655Z"
2025-01-20 22:16:57.488 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:16:57.491 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 61.8169ms.
2025-01-20 22:16:57.495 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:16:57.498 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 220.3249ms
2025-01-20 22:16:57.501 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:16:57.504 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 291.3111ms
2025-01-20 22:17:19.940 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - null null
2025-01-20 22:17:19.944 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:17:19.946 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - 204 null null 5.9628ms
2025-01-20 22:17:19.951 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - application/json null
2025-01-20 22:17:19.955 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:17:19.956 +02:00 [INF] Incoming Request: GET /api/User/4/buyers
2025-01-20 22:17:19.959 +02:00 [INF] Outgoing Response: 404
2025-01-20 22:17:19.961 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - 404 0 null 9.5505ms
2025-01-20 22:17:19.966 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/4/buyers, Response status code: 404
2025-01-20 22:17:24.954 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/3/buyers - null null
2025-01-20 22:17:24.959 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:17:24.961 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/3/buyers - 204 null null 7.3834ms
2025-01-20 22:17:24.967 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/3/buyers - application/json null
2025-01-20 22:17:24.970 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:17:24.971 +02:00 [INF] Incoming Request: GET /api/User/3/buyers
2025-01-20 22:17:24.973 +02:00 [INF] Outgoing Response: 404
2025-01-20 22:17:24.974 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/3/buyers - 404 0 null 7.214ms
2025-01-20 22:17:24.979 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/3/buyers, Response status code: 404
2025-01-20 22:17:30.891 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - null null
2025-01-20 22:17:30.896 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:17:30.898 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/4/buyers - 204 null null 6.7908ms
2025-01-20 22:17:30.904 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - application/json null
2025-01-20 22:17:30.907 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:17:30.908 +02:00 [INF] Incoming Request: GET /api/User/4/buyers
2025-01-20 22:17:30.910 +02:00 [INF] Outgoing Response: 404
2025-01-20 22:17:30.911 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/4/buyers - 404 0 null 7.0681ms
2025-01-20 22:17:30.917 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/User/4/buyers, Response status code: 404
2025-01-20 22:18:05.107 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:18:05.128 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:05.130 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 23.2612ms
2025-01-20 22:18:05.150 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:18:05.154 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:05.155 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:18:05.157 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:18:05.158 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:18:05.180 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:18:05.182 +02:00 [INF] Fetching all donators.
2025-01-20 22:18:05.183 +02:00 [INF] Fetching all donators.
2025-01-20 22:18:05.188 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:18:05.207 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:18:05.208 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 26.5904ms.
2025-01-20 22:18:05.211 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:18:05.213 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 52.5042ms
2025-01-20 22:18:05.216 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:18:05.217 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:18:05.219 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 68.7856ms
2025-01-20 22:18:11.492 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - null null
2025-01-20 22:18:11.497 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:11.499 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - 204 null null 7.0507ms
2025-01-20 22:18:11.506 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - application/json null
2025-01-20 22:18:11.510 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:11.511 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/1
2025-01-20 22:18:11.514 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:11.515 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:18:11.544 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:18:11.546 +02:00 [INF] Fetching donator with gifts for ID: 1
2025-01-20 22:18:11.547 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:18:11.553 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:18:11.557 +02:00 [INF] Fetching gifts for donator ID: 1
2025-01-20 22:18:11.561 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-20 22:18:11.564 +02:00 [INF] Successfully fetched 4 gifts for donator ID: 1
2025-01-20 22:18:11.565 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 19.5207ms.
2025-01-20 22:18:11.569 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:18:11.572 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 52.5172ms
2025-01-20 22:18:11.573 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:11.575 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:18:11.576 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - 200 null application/json; charset=utf-8 70.6826ms
2025-01-20 22:18:37.883 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/3 - null null
2025-01-20 22:18:37.905 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:37.907 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/3 - 204 null null 23.312ms
2025-01-20 22:18:37.930 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/3 - application/json null
2025-01-20 22:18:37.933 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:37.934 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/3
2025-01-20 22:18:37.936 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:37.938 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:18:37.962 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:18:37.964 +02:00 [INF] Fetching donator with gifts for ID: 3
2025-01-20 22:18:37.965 +02:00 [INF] Fetching donator with ID: 3
2025-01-20 22:18:37.970 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:18:37.991 +02:00 [INF] Fetching gifts for donator ID: 3
2025-01-20 22:18:37.994 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-20 22:18:37.997 +02:00 [WRN] No gifts found for donator ID: 3
2025-01-20 22:18:37.998 +02:00 [INF] Successfully fetched 0 gifts for donator ID: 3
2025-01-20 22:18:37.999 +02:00 [WRN] No gifts found for donator with ID 3.
2025-01-20 22:18:38.001 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.2693ms.
2025-01-20 22:18:38.004 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:18:38.008 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 67.773ms
2025-01-20 22:18:38.010 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:38.012 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:18:38.013 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/3 - 200 null application/json; charset=utf-8 83.3713ms
2025-01-20 22:18:42.206 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - null null
2025-01-20 22:18:42.209 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:42.211 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/1 - 204 null null 5.395ms
2025-01-20 22:18:42.216 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - application/json null
2025-01-20 22:18:42.222 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:42.223 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/1
2025-01-20 22:18:42.225 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:42.227 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:18:42.250 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:18:42.255 +02:00 [INF] Fetching donator with gifts for ID: 1
2025-01-20 22:18:42.256 +02:00 [INF] Fetching donator with ID: 1
2025-01-20 22:18:42.261 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:18:42.265 +02:00 [INF] Fetching gifts for donator ID: 1
2025-01-20 22:18:42.270 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-20 22:18:42.276 +02:00 [INF] Successfully fetched 4 gifts for donator ID: 1
2025-01-20 22:18:42.278 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.7364ms.
2025-01-20 22:18:42.281 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:18:42.285 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 54.7147ms
2025-01-20 22:18:42.288 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:42.290 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:18:42.292 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/1 - 200 null application/json; charset=utf-8 75.4403ms
2025-01-20 22:18:45.161 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/2 - null null
2025-01-20 22:18:45.165 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:45.169 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/2 - 204 null null 8.3617ms
2025-01-20 22:18:45.176 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/2 - application/json null
2025-01-20 22:18:45.180 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:18:45.181 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/2
2025-01-20 22:18:45.182 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:45.184 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:18:45.216 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:18:45.220 +02:00 [INF] Fetching donator with gifts for ID: 2
2025-01-20 22:18:45.221 +02:00 [INF] Fetching donator with ID: 2
2025-01-20 22:18:45.226 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:18:45.230 +02:00 [INF] Fetching gifts for donator ID: 2
2025-01-20 22:18:45.236 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-20 22:18:45.241 +02:00 [WRN] No gifts found for donator ID: 2
2025-01-20 22:18:45.243 +02:00 [INF] Successfully fetched 0 gifts for donator ID: 2
2025-01-20 22:18:45.244 +02:00 [WRN] No gifts found for donator with ID 2.
2025-01-20 22:18:45.246 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 25.7989ms.
2025-01-20 22:18:45.248 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:18:45.254 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 65.9147ms
2025-01-20 22:18:45.257 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:18:45.259 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:18:45.261 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/2 - 200 null application/json; charset=utf-8 85.0262ms
2025-01-20 22:20:35.524 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:20:35.545 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:20:35.546 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:20:35.548 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 23.3513ms
2025-01-20 22:20:36.019 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:20:36.023 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:20:36.024 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 4.7397ms
2025-01-20 22:20:36.046 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:20:36.052 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:20:36.054 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:20:36.056 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:20:36.059 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:20:36.085 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:20:36.087 +02:00 [INF] Fetching all donators.
2025-01-20 22:20:36.088 +02:00 [INF] Fetching all donators.
2025-01-20 22:20:36.093 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:20:36.096 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:20:36.097 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.9292ms.
2025-01-20 22:20:36.100 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:20:36.102 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 40.2434ms
2025-01-20 22:20:36.104 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:20:36.105 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:20:36.107 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 60.5181ms
2025-01-20 22:20:45.394 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:20:45.400 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:20:45.403 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:20:45.405 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 10.6278ms
2025-01-20 22:20:45.727 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:20:45.731 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:20:45.732 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.454ms
2025-01-20 22:20:45.738 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:20:45.742 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:20:45.744 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:20:45.746 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:20:45.748 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:20:45.787 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:20:45.790 +02:00 [INF] Fetching all donators.
2025-01-20 22:20:45.792 +02:00 [INF] Fetching all donators.
2025-01-20 22:20:45.800 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:20:45.806 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:20:45.807 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.7336ms.
2025-01-20 22:20:45.813 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:20:45.816 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 62.9459ms
2025-01-20 22:20:45.822 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:20:45.825 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:20:45.829 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 90.7698ms
2025-01-20 22:21:02.434 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:21:02.438 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:21:02.439 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:21:02.442 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 7.9888ms
2025-01-20 22:21:02.806 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:21:02.810 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:21:02.811 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 4.6523ms
2025-01-20 22:21:02.815 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:21:02.820 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:21:02.822 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:21:02.824 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:21:02.826 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:21:02.854 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:21:02.857 +02:00 [INF] Fetching all donators.
2025-01-20 22:21:02.858 +02:00 [INF] Fetching all donators.
2025-01-20 22:21:02.862 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:21:02.866 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:21:02.868 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.756ms.
2025-01-20 22:21:02.872 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:21:02.876 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 44.7207ms
2025-01-20 22:21:02.879 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:21:02.883 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:21:02.887 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 71.2777ms
2025-01-20 22:21:26.562 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:21:26.566 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:21:26.568 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:21:26.570 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 7.1798ms
2025-01-20 22:21:26.851 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:21:26.854 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:21:26.855 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 4.4588ms
2025-01-20 22:21:26.876 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:21:26.880 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:21:26.882 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:21:26.884 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:21:26.886 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:21:26.910 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:21:26.913 +02:00 [INF] Fetching all donators.
2025-01-20 22:21:26.914 +02:00 [INF] Fetching all donators.
2025-01-20 22:21:26.918 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:21:26.922 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:21:26.923 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 10.8061ms.
2025-01-20 22:21:26.926 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:21:26.928 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 38.0801ms
2025-01-20 22:21:26.930 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:21:26.933 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:21:26.935 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 58.5852ms
2025-01-20 22:21:36.484 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:21:36.488 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:21:36.490 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:21:36.491 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 7.4138ms
2025-01-20 22:21:36.812 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:21:36.816 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:21:36.817 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 4.672ms
2025-01-20 22:21:36.821 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:21:36.825 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:21:36.826 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:21:36.828 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:21:36.830 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:21:36.869 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:21:36.871 +02:00 [INF] Fetching all donators.
2025-01-20 22:21:36.872 +02:00 [INF] Fetching all donators.
2025-01-20 22:21:36.876 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:21:36.881 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:21:36.884 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.3436ms.
2025-01-20 22:21:36.887 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:21:36.889 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 52.2912ms
2025-01-20 22:21:36.892 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:21:36.894 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:21:36.896 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 74.9201ms
2025-01-20 22:24:53.966 +02:00 [INF] Starting up the application
2025-01-20 22:24:57.255 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 22:24:59.552 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 22:24:59.713 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 22:25:00.115 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 22:25:00.122 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 22:25:00.125 +02:00 [INF] Hosting environment: Development
2025-01-20 22:25:00.126 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 22:25:01.247 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 22:25:01.794 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 554.0693ms
2025-01-20 22:25:01.820 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 22:25:01.831 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.9452ms
2025-01-20 22:25:02.139 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 22:25:02.484 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 344.6919ms
2025-01-20 22:25:05.795 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:25:05.804 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 22:25:05.843 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:25:05.845 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:25:05.848 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 53.6893ms
2025-01-20 22:25:06.061 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:25:06.068 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:25:06.072 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 11.0295ms
2025-01-20 22:25:06.080 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:25:06.084 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:25:06.088 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:25:06.338 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:25:06.374 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:25:06.708 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:25:06.716 +02:00 [INF] Fetching all donators.
2025-01-20 22:25:06.720 +02:00 [INF] Fetching all donators.
2025-01-20 22:25:06.818 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:25:06.851 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:25:06.861 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 144.2296ms.
2025-01-20 22:25:06.875 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:25:06.940 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 555.9288ms
2025-01-20 22:25:06.944 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:25:06.947 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:25:06.956 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 875.8754ms
2025-01-20 22:25:09.686 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:25:09.690 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:25:09.695 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:25:09.709 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:25:09.753 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:25:09.757 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:25:09.7576827Z"
2025-01-20 22:25:09.791 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:25:09.828 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:25:09.8281994Z"
2025-01-20 22:25:09.830 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:25:09.8304921Z"
2025-01-20 22:25:09.832 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:25:09.8320110Z"
2025-01-20 22:25:09.834 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 78.1982ms.
2025-01-20 22:25:09.837 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:25:09.853 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 139.5889ms
2025-01-20 22:25:09.856 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:25:09.859 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 173.3057ms
2025-01-20 22:25:15.330 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:25:15.335 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:25:15.340 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:25:15.347 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:25:15.382 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:25:15.386 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:25:15.3865467Z"
2025-01-20 22:25:15.389 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:25:15.3890003Z"
2025-01-20 22:25:15.392 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:25:15.3923582Z"
2025-01-20 22:25:15.551 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:25:15.556 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:25:15.5565931Z"
2025-01-20 22:25:15.557 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:25:15.5578408Z"
2025-01-20 22:25:15.559 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:25:15.5591083Z"
2025-01-20 22:25:15.560 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 175.1204ms.
2025-01-20 22:25:15.563 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:25:15.572 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 219.3814ms
2025-01-20 22:25:15.574 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:25:15.576 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 246.1864ms
2025-01-20 22:25:28.524 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:25:28.538 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:25:28.541 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:25:28.597 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:25:28.599 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:25:28.5999524Z"
2025-01-20 22:25:28.601 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:25:28.6019075Z"
2025-01-20 22:25:28.603 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:25:28.6035046Z"
2025-01-20 22:25:28.623 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:25:28.627 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:25:28.6278145Z"
2025-01-20 22:25:28.629 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:25:28.6292391Z"
2025-01-20 22:25:28.630 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:25:28.6309022Z"
2025-01-20 22:25:28.632 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32.7742ms.
2025-01-20 22:25:28.635 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:25:28.638 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 84.4486ms
2025-01-20 22:25:28.640 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:25:28.642 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 118.26ms
2025-01-20 22:27:06.967 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:27:06.975 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:27:06.976 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:27:06.978 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:27:07.005 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:27:07.008 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:27:07.0084434Z"
2025-01-20 22:27:07.016 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:27:07.066 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:27:07.0662939Z"
2025-01-20 22:27:07.067 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:27:07.0674350Z"
2025-01-20 22:27:07.068 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:27:07.0687008Z"
2025-01-20 22:27:07.070 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 61.711ms.
2025-01-20 22:27:07.072 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:27:07.075 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 94.4376ms
2025-01-20 22:27:07.077 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:27:07.079 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 112.3471ms
2025-01-20 22:27:08.936 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 22:27:08.940 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:27:08.941 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:27:08.963 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:27:09.014 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:27:09.020 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T20:27:09.0200156Z"
2025-01-20 22:27:09.030 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:27:09.0305533Z"
2025-01-20 22:27:09.035 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:27:09.0356281Z"
2025-01-20 22:27:09.053 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:27:09.057 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T20:27:09.0573766Z"
2025-01-20 22:27:09.058 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T20:27:09.0588705Z"
2025-01-20 22:27:09.060 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.322ms.
2025-01-20 22:27:09.064 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:27:09.067 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 99.3736ms
2025-01-20 22:27:09.069 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:27:09.071 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 134.4376ms
2025-01-20 22:27:09.075 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 22:27:09.079 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:27:09.081 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 5.5171ms
2025-01-20 22:27:09.086 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 22:27:09.089 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:27:09.090 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:27:09.097 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:27:09.104 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:27:09.237 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:27:09.245 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 22:27:09.247 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:27:09.250 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:27:09.251 +02:00 [INF] Parsing token...
2025-01-20 22:27:09.253 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:27:09.292 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:27:09.297 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:27:09.393 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:27:09.583 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:27:09.589 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 349.254ms.
2025-01-20 22:27:09.592 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:27:09.607 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 499.8639ms
2025-01-20 22:27:09.610 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:27:09.612 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:27:09.613 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null application/json; charset=utf-8 527.6949ms
2025-01-20 22:30:08.733 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 22:30:08.737 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:08.739 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:30:08.740 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:30:08.778 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:30:08.780 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T20:30:08.7807855Z"
2025-01-20 22:30:08.783 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T20:30:08.7831840Z"
2025-01-20 22:30:08.784 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T20:30:08.7848270Z"
2025-01-20 22:30:08.791 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:30:08.797 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T20:30:08.7971401Z"
2025-01-20 22:30:08.799 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T20:30:08.7991556Z"
2025-01-20 22:30:08.800 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 20.0813ms.
2025-01-20 22:30:08.803 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:30:08.804 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 60.8461ms
2025-01-20 22:30:08.807 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:30:08.810 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 76.3682ms
2025-01-20 22:30:08.816 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 22:30:08.820 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:08.821 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 5.5001ms
2025-01-20 22:30:08.843 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 22:30:08.848 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:08.849 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:30:08.853 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:30:08.855 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:30:08.886 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:30:08.904 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 22:30:08.905 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:30:08.907 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:30:08.908 +02:00 [INF] Parsing token...
2025-01-20 22:30:08.910 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:30:08.922 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:30:08.928 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:30:08.996 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:30:09.114 +02:00 [ERR] Error occurred while adding Gift 5 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:30:09.120 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 215.974ms.
2025-01-20 22:30:09.123 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:30:09.126 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 268.7978ms
2025-01-20 22:30:09.129 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:30:09.131 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:30:09.133 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 500 null application/json; charset=utf-8 289.676ms
2025-01-20 22:30:38.183 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 22:30:38.192 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:38.194 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 10.8664ms
2025-01-20 22:30:38.215 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 22:30:38.218 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:38.220 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 22:30:38.222 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:30:38.228 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 22:30:38.262 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 22:30:38.266 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 22:30:38.275 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:38.279 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:38.314 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 22:30:38.319 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:38.320 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:38.321 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:38.322 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 57.5165ms.
2025-01-20 22:30:38.325 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:30:38.335 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 103.4853ms
2025-01-20 22:30:38.339 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:30:38.341 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:30:38.343 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 128.1012ms
2025-01-20 22:30:39.978 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:30:39.983 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:39.984 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:30:39.986 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:30:40.018 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:30:40.020 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:30:40.0201463Z"
2025-01-20 22:30:40.050 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:30:40.054 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:30:40.0542595Z"
2025-01-20 22:30:40.055 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:30:40.0554621Z"
2025-01-20 22:30:40.056 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:30:40.0569135Z"
2025-01-20 22:30:40.058 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 38.2916ms.
2025-01-20 22:30:40.061 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:30:40.064 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 74.6678ms
2025-01-20 22:30:40.066 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:30:40.068 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 90.1337ms
2025-01-20 22:30:42.528 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 22:30:42.539 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:42.545 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 22:30:42.549 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:30:42.551 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 22:30:42.585 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 22:30:42.587 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 22:30:42.589 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:42.590 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:42.598 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 22:30:42.602 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:42.603 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:42.604 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:42.606 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.4207ms.
2025-01-20 22:30:42.609 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:30:42.611 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 54.3633ms
2025-01-20 22:30:42.614 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:30:42.616 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:30:42.617 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 89.3599ms
2025-01-20 22:30:44.846 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:30:44.852 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:44.853 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 6.9495ms
2025-01-20 22:30:44.861 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:30:44.865 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:44.867 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:30:44.875 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:30:44.907 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:30:44.910 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:30:44.912 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:30:44.9126267Z"
2025-01-20 22:30:44.915 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:30:44.9154269Z"
2025-01-20 22:30:44.937 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:30:44.941 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:30:44.9419364Z"
2025-01-20 22:30:44.943 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:30:44.9432811Z"
2025-01-20 22:30:44.944 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:30:44.946 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.5343ms.
2025-01-20 22:30:44.948 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:30:44.950 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 69.9471ms
2025-01-20 22:30:44.952 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:30:44.954 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 93.1516ms
2025-01-20 22:30:50.207 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 22:30:50.216 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:50.218 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 10.8803ms
2025-01-20 22:30:50.224 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 22:30:50.230 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:50.232 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 22:30:50.234 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:30:50.236 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 22:30:50.267 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 22:30:50.268 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 22:30:50.269 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:50.271 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:50.277 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 22:30:50.281 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:50.282 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:50.283 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:30:50.284 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.9291ms.
2025-01-20 22:30:50.287 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:30:50.288 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 49.6145ms
2025-01-20 22:30:50.290 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:30:50.292 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:30:50.293 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 69.2369ms
2025-01-20 22:30:51.718 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:30:51.722 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:51.725 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:30:51.727 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:30:51.755 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:30:51.758 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:30:51.7586067Z"
2025-01-20 22:30:51.764 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:30:51.768 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:30:51.7683213Z"
2025-01-20 22:30:51.769 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:30:51.7696221Z"
2025-01-20 22:30:51.770 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:30:51.7708736Z"
2025-01-20 22:30:51.772 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.542ms.
2025-01-20 22:30:51.774 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:30:51.778 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 48.1435ms
2025-01-20 22:30:51.780 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:30:51.783 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 64.9512ms
2025-01-20 22:30:53.655 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/5 - null null
2025-01-20 22:30:53.659 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:53.661 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:30:53.662 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:30:53.689 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:30:53.692 +02:00 [INF] Starting GetByIdAsync with ID 5 at "2025-01-20T20:30:53.6920774Z"
2025-01-20 22:30:53.694 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T20:30:53.6943083Z"
2025-01-20 22:30:53.696 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T20:30:53.6967498Z"
2025-01-20 22:30:53.702 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:30:53.706 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 5 at "2025-01-20T20:30:53.7064159Z"
2025-01-20 22:30:53.707 +02:00 [INF] GetByIdAsync completed successfully with ID 5 at "2025-01-20T20:30:53.7078147Z"
2025-01-20 22:30:53.709 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.6132ms.
2025-01-20 22:30:53.714 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:30:53.716 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 51.0052ms
2025-01-20 22:30:53.718 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:30:53.720 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 65.237ms
2025-01-20 22:30:53.726 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - null null
2025-01-20 22:30:53.730 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:53.732 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=5 - 204 null null 6.314ms
2025-01-20 22:30:53.737 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - application/json 2
2025-01-20 22:30:53.740 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:30:53.741 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:30:53.745 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:30:53.747 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:30:53.836 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:30:53.839 +02:00 [INF] Starting AddToBasketAsync with GiftId: 5 and Quantity: 1
2025-01-20 22:30:53.841 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:30:53.842 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:30:53.846 +02:00 [INF] Parsing token...
2025-01-20 22:30:53.848 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:30:53.857 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:30:53.864 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:30:53.930 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:30:54.058 +02:00 [ERR] Error occurred while adding Gift 5 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:30:54.065 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 225.5733ms.
2025-01-20 22:30:54.067 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:30:54.069 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 319.6267ms
2025-01-20 22:30:54.072 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:30:54.084 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:30:54.086 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=5 - 500 null application/json; charset=utf-8 348.738ms
2025-01-20 22:31:17.194 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:31:17.203 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:17.206 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 11.3314ms
2025-01-20 22:31:17.215 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:31:17.218 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:17.221 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:31:17.223 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:31:17.269 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:31:17.271 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:31:17.273 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:31:17.2730901Z"
2025-01-20 22:31:17.274 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:31:17.2745564Z"
2025-01-20 22:31:17.287 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:31:17.291 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:31:17.2913050Z"
2025-01-20 22:31:17.292 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:31:17.2925644Z"
2025-01-20 22:31:17.293 +02:00 [INF] Successfully retrieved 4 gifts with purchases.
2025-01-20 22:31:17.295 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 23.5933ms.
2025-01-20 22:31:17.297 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:31:17.299 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 71.6649ms
2025-01-20 22:31:17.301 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:31:17.304 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 88.6081ms
2025-01-20 22:31:20.800 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:31:20.804 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:20.806 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.994ms
2025-01-20 22:31:20.814 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:31:20.819 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:20.821 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:31:20.824 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:31:20.827 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:31:20.863 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:31:20.865 +02:00 [INF] Fetching all donators.
2025-01-20 22:31:20.866 +02:00 [INF] Fetching all donators.
2025-01-20 22:31:20.871 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:31:20.876 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:31:20.877 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.666ms.
2025-01-20 22:31:20.881 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:31:20.883 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 51.8553ms
2025-01-20 22:31:20.886 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:31:20.888 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:31:20.889 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 74.9738ms
2025-01-20 22:31:23.700 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/2 - null null
2025-01-20 22:31:23.709 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:23.711 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/giftsByDonator/2 - 204 null null 10.3356ms
2025-01-20 22:31:23.717 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/2 - application/json null
2025-01-20 22:31:23.720 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:23.723 +02:00 [INF] Incoming Request: GET /api/Donator/giftsByDonator/2
2025-01-20 22:31:23.728 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:31:23.735 +02:00 [INF] Route matched with {action = "GetDonatorWithGifts", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorWithGiftsAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 22:31:23.776 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:31:23.785 +02:00 [INF] Fetching donator with gifts for ID: 2
2025-01-20 22:31:23.790 +02:00 [INF] Fetching donator with ID: 2
2025-01-20 22:31:23.810 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 22:31:23.818 +02:00 [INF] Fetching gifts for donator ID: 2
2025-01-20 22:31:23.832 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__donatorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[DonatorId] = @__donatorId_0
2025-01-20 22:31:23.837 +02:00 [WRN] No gifts found for donator ID: 2
2025-01-20 22:31:23.838 +02:00 [INF] Successfully fetched 0 gifts for donator ID: 2
2025-01-20 22:31:23.841 +02:00 [WRN] No gifts found for donator with ID 2.
2025-01-20 22:31:23.846 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 66.0215ms.
2025-01-20 22:31:23.849 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType20`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[<>f__AnonymousType21`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:31:23.856 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project) in 117.4553ms
2025-01-20 22:31:23.858 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorWithGiftsAsync (project)'
2025-01-20 22:31:23.861 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:31:23.863 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/giftsByDonator/2 - 200 null application/json; charset=utf-8 146.673ms
2025-01-20 22:31:28.789 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:31:28.794 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:31:28.796 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:31:28.798 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:31:28.837 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:31:28.839 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:31:28.8394485Z"
2025-01-20 22:31:28.840 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:31:28.8407601Z"
2025-01-20 22:31:28.843 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:31:28.8435886Z"
2025-01-20 22:31:28.854 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:31:28.861 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:31:28.8614545Z"
2025-01-20 22:31:28.862 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:31:28.8628548Z"
2025-01-20 22:31:28.864 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:31:28.8641235Z"
2025-01-20 22:31:28.865 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 25.9816ms.
2025-01-20 22:31:28.867 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:31:28.869 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 67.8563ms
2025-01-20 22:31:28.871 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:31:28.873 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 84.42ms
2025-01-20 22:31:44.488 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:31:44.493 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:31:44.494 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:31:44.523 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:31:44.525 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:31:44.5255326Z"
2025-01-20 22:31:44.527 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:31:44.5275605Z"
2025-01-20 22:31:44.528 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:31:44.5287917Z"
2025-01-20 22:31:44.538 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:31:44.543 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:31:44.5438406Z"
2025-01-20 22:31:44.545 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:31:44.5450008Z"
2025-01-20 22:31:44.546 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:31:44.5463214Z"
2025-01-20 22:31:44.547 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 22.1415ms.
2025-01-20 22:31:44.550 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:31:44.552 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 54.6774ms
2025-01-20 22:31:44.554 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:31:44.556 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 68.3331ms
2025-01-20 22:35:02.391 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:35:02.411 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:02.412 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:35:02.414 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:35:02.453 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:35:02.456 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:35:02.4564161Z"
2025-01-20 22:35:02.462 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:35:02.482 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:35:02.4821869Z"
2025-01-20 22:35:02.483 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:35:02.4839733Z"
2025-01-20 22:35:02.485 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:35:02.4853427Z"
2025-01-20 22:35:02.487 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 30.7754ms.
2025-01-20 22:35:02.489 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:35:02.494 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 74.7059ms
2025-01-20 22:35:02.497 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:35:02.500 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 109.1968ms
2025-01-20 22:35:05.006 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:35:05.012 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:05.014 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:35:05.016 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:35:05.047 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:35:05.049 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:35:05.0493718Z"
2025-01-20 22:35:05.050 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:35:05.0505803Z"
2025-01-20 22:35:05.051 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:35:05.0518932Z"
2025-01-20 22:35:05.065 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:35:05.069 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:35:05.0699251Z"
2025-01-20 22:35:05.071 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:35:05.0710591Z"
2025-01-20 22:35:05.073 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:35:05.0737348Z"
2025-01-20 22:35:05.076 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 26.762ms.
2025-01-20 22:35:05.079 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:35:05.082 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 63.2746ms
2025-01-20 22:35:05.084 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:35:05.087 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 80.7758ms
2025-01-20 22:35:07.089 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:35:07.095 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 22:35:07.095 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:07.100 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:07.102 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 13.1255ms
2025-01-20 22:35:07.104 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 22:35:07.110 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:35:07.115 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:07.116 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 22:35:07.116 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:35:07.149 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 22:35:07.150 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:35:07.154 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:35:07.184 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:35:07.187 +02:00 [INF] Fetching all donators.
2025-01-20 22:35:07.188 +02:00 [INF] Fetching all donators.
2025-01-20 22:35:07.196 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:35:07.265 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:35:07.266 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.6822ms.
2025-01-20 22:35:07.269 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:35:07.273 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 114.8118ms
2025-01-20 22:35:07.286 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:35:07.287 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 22:35:07.288 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:35:07.296 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 185.9781ms
2025-01-20 22:35:07.304 +02:00 [INF] Successfully retrieved categories.
2025-01-20 22:35:07.306 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 153.0871ms.
2025-01-20 22:35:07.311 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:35:07.316 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 196.5558ms
2025-01-20 22:35:07.319 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 22:35:07.322 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 226.9009ms
2025-01-20 22:35:20.391 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 22:35:20.396 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:20.398 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 6.2414ms
2025-01-20 22:35:20.404 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 154
2025-01-20 22:35:20.409 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:20.411 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:35:20.417 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:35:20.495 +02:00 [INF] Executing action method project.Controllers.GiftController.CreateGiftAsync (project) - Validation state: "Valid"
2025-01-20 22:35:20.499 +02:00 [INF] Starting CreateGiftAsync at "2025-01-20T20:35:20.4997864Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 22:35:20.502 +02:00 [INF] Starting CreateGiftAsync for GiftDto: cfcf at "2025-01-20T20:35:20.5028380Z"
2025-01-20 22:35:20.507 +02:00 [INF] Fetching donator by name: miri
2025-01-20 22:35:20.520 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-20 22:35:20.541 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-20 22:35:20.546 +02:00 [INF] Successfully retrieved category with name: aנa
2025-01-20 22:35:20.559 +02:00 [INF] Starting CreateGiftAsync for Gift: cfcf at "2025-01-20T20:35:20.5592685Z"
2025-01-20 22:35:20.798 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-20 22:35:20.840 +02:00 [INF] CreateGiftAsync completed successfully for Gift: cfcf at "2025-01-20T20:35:20.8402377Z"
2025-01-20 22:35:20.842 +02:00 [INF] CreateGiftAsync completed successfully for Gift: cfcf at "2025-01-20T20:35:20.8426357Z"
2025-01-20 22:35:20.844 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-20T20:35:20.8443179Z"
2025-01-20 22:35:20.845 +02:00 [INF] Executed action method project.Controllers.GiftController.CreateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 347.187ms.
2025-01-20 22:35:20.847 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 22:35:20.849 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 427.0824ms
2025-01-20 22:35:20.852 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:35:20.854 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null text/plain; charset=utf-8 450.1696ms
2025-01-20 22:35:45.219 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 22:35:45.244 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:45.245 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 26.3611ms
2025-01-20 22:35:45.277 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 154
2025-01-20 22:35:45.281 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:45.283 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:35:45.285 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:35:45.318 +02:00 [INF] Executing action method project.Controllers.GiftController.CreateGiftAsync (project) - Validation state: "Valid"
2025-01-20 22:35:45.320 +02:00 [INF] Starting CreateGiftAsync at "2025-01-20T20:35:45.3202098Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 22:35:45.322 +02:00 [INF] Starting CreateGiftAsync for GiftDto: cfcf at "2025-01-20T20:35:45.3221922Z"
2025-01-20 22:35:45.324 +02:00 [INF] Fetching donator by name: miri
2025-01-20 22:35:45.331 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-20 22:35:45.336 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-20 22:35:45.341 +02:00 [INF] Successfully retrieved category with name: aנa
2025-01-20 22:35:45.343 +02:00 [INF] Starting CreateGiftAsync for Gift: cfcf at "2025-01-20T20:35:45.3435419Z"
2025-01-20 22:35:45.350 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-20 22:35:45.355 +02:00 [INF] CreateGiftAsync completed successfully for Gift: cfcf at "2025-01-20T20:35:45.3550449Z"
2025-01-20 22:35:45.357 +02:00 [INF] CreateGiftAsync completed successfully for Gift: cfcf at "2025-01-20T20:35:45.3572021Z"
2025-01-20 22:35:45.359 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-20T20:35:45.3594683Z"
2025-01-20 22:35:45.361 +02:00 [INF] Executed action method project.Controllers.GiftController.CreateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 41.7021ms.
2025-01-20 22:35:45.364 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 22:35:45.367 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 77.1955ms
2025-01-20 22:35:45.369 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:35:45.371 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null text/plain; charset=utf-8 94.2781ms
2025-01-20 22:35:50.306 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:35:50.310 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:35:50.312 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:35:50.345 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:35:50.347 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:35:50.3471986Z"
2025-01-20 22:35:50.348 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:35:50.3484269Z"
2025-01-20 22:35:50.349 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:35:50.3496786Z"
2025-01-20 22:35:50.361 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:35:50.365 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:35:50.3654810Z"
2025-01-20 22:35:50.366 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:35:50.3665860Z"
2025-01-20 22:35:50.367 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:35:50.3678313Z"
2025-01-20 22:35:50.369 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21.9194ms.
2025-01-20 22:35:50.373 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:35:50.375 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 59.5337ms
2025-01-20 22:35:50.377 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:35:50.380 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 73.9378ms
2025-01-20 22:35:55.252 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/9 - null null
2025-01-20 22:35:55.259 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:55.260 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/9 - 204 null null 7.9447ms
2025-01-20 22:35:55.265 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/9 - null null
2025-01-20 22:35:55.268 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:35:55.271 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 22:35:55.279 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:35:55.311 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 22:35:55.315 +02:00 [INF] Starting DeleteGiftAsync with ID 9 at "2025-01-20T20:35:55.3150828Z"
2025-01-20 22:35:55.317 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 9 at "2025-01-20T20:35:55.3179318Z"
2025-01-20 22:35:55.321 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 9 at "2025-01-20T20:35:55.3219594Z"
2025-01-20 22:35:55.324 +02:00 [INF] Starting GetByIdAsync for Gift ID 9 at "2025-01-20T20:35:55.3240188Z"
2025-01-20 22:35:55.330 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:35:55.361 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 22:35:55.375 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 9 at "2025-01-20T20:35:55.3755414Z"
2025-01-20 22:35:55.379 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 9 at "2025-01-20T20:35:55.3796209Z"
2025-01-20 22:35:55.381 +02:00 [INF] DeleteGiftAsync completed successfully with ID 9 at "2025-01-20T20:35:55.3818033Z"
2025-01-20 22:35:55.383 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.5215ms.
2025-01-20 22:35:55.385 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 22:35:55.387 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 102.9611ms
2025-01-20 22:35:55.389 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 22:35:55.391 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/9 - 200 null text/plain; charset=utf-8 125.7989ms
2025-01-20 22:36:58.898 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:36:58.925 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:36:58.927 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:36:58.965 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:36:58.967 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:36:58.9678044Z"
2025-01-20 22:36:58.969 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:36:58.9690930Z"
2025-01-20 22:36:58.970 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:36:58.9705751Z"
2025-01-20 22:36:58.986 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:36:58.992 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:36:58.9927846Z"
2025-01-20 22:36:58.994 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:36:58.9940673Z"
2025-01-20 22:36:58.995 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:36:58.9958013Z"
2025-01-20 22:36:58.997 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.4673ms.
2025-01-20 22:36:58.999 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:36:59.001 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 70.3316ms
2025-01-20 22:36:59.004 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:36:59.007 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 108.8163ms
2025-01-20 22:37:21.564 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:37:21.569 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:37:21.571 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:37:21.574 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:37:21.615 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:37:21.618 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:37:21.6180856Z"
2025-01-20 22:37:21.623 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:37:21.627 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:37:21.6276597Z"
2025-01-20 22:37:21.630 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:37:21.6300516Z"
2025-01-20 22:37:21.631 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:37:21.6313404Z"
2025-01-20 22:37:21.632 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.5135ms.
2025-01-20 22:37:21.635 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:37:21.637 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 59.598ms
2025-01-20 22:37:21.639 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:37:21.641 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 76.965ms
2025-01-20 22:37:32.029 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - null null
2025-01-20 22:37:32.040 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:37:32.045 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 204 null null 15.0642ms
2025-01-20 22:37:32.052 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 22:37:32.057 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:37:32.059 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:37:32.061 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:37:32.073 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:37:32.102 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 37.0651ms
2025-01-20 22:37:32.106 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:37:32.110 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 58.2556ms
2025-01-20 22:40:04.696 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:40:04.716 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:40:04.718 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:40:04.761 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:40:04.763 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:40:04.7636657Z"
2025-01-20 22:40:04.768 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:40:04.773 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:04.7732838Z"
2025-01-20 22:40:04.776 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:04.7762034Z"
2025-01-20 22:40:04.778 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:04.7782622Z"
2025-01-20 22:40:04.780 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 16.4752ms.
2025-01-20 22:40:04.782 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:40:04.784 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 62.4277ms
2025-01-20 22:40:04.787 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:40:04.791 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 95.4038ms
2025-01-20 22:40:10.069 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 22:40:10.082 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:10.083 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 14.5966ms
2025-01-20 22:40:10.092 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 22:40:10.096 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:10.097 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 22:40:10.099 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:40:10.101 +02:00 [INF] Route matched with {action = "GetBasketByUser", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.UserGift]] GetBasketByUserAsync() on controller project.Controllers.UserController (project).
2025-01-20 22:40:10.136 +02:00 [INF] Executing action method project.Controllers.UserController.GetBasketByUserAsync (project) - Validation state: "Valid"
2025-01-20 22:40:10.138 +02:00 [INF] Starting GetBasketByUserAsync
2025-01-20 22:40:10.139 +02:00 [INF] Received request to get basket for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:40:10.140 +02:00 [INF] Starting to fetch basket for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:40:10.146 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [UserGifts] AS [u]
INNER JOIN [Gifts] AS [g] ON [u].[GiftId] = [g].[Id]
WHERE [u].[UserId] = @__userId_0
2025-01-20 22:40:10.150 +02:00 [WRN] No gifts found for userId: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:40:10.152 +02:00 [INF] No gifts found for user: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:40:10.154 +02:00 [INF] Completed GetBasketByUserAsync for User: 1d8e9ca4-bac9-4755-b51a-a48c531ff799
2025-01-20 22:40:10.155 +02:00 [INF] Executed action method project.Controllers.UserController.GetBasketByUserAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 17.1623ms.
2025-01-20 22:40:10.157 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Linq.EmptyPartition`1[[project.Models.UserGift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:40:10.160 +02:00 [INF] Executed action project.Controllers.UserController.GetBasketByUserAsync (project) in 55.4175ms
2025-01-20 22:40:10.162 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.GetBasketByUserAsync (project)'
2025-01-20 22:40:10.173 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:40:10.174 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 200 null application/json; charset=utf-8 82.0914ms
2025-01-20 22:40:11.588 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:40:11.595 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:11.597 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:40:11.600 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:40:11.634 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:40:11.637 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:40:11.6375428Z"
2025-01-20 22:40:11.644 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:40:11.648 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:11.6480944Z"
2025-01-20 22:40:11.649 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:11.6493038Z"
2025-01-20 22:40:11.650 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:11.6508903Z"
2025-01-20 22:40:11.652 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.0328ms.
2025-01-20 22:40:11.654 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:40:11.658 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 52.6289ms
2025-01-20 22:40:11.660 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:40:11.663 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 74.4663ms
2025-01-20 22:40:12.863 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 22:40:12.868 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:12.871 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:40:12.873 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:40:12.901 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:40:12.906 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T20:40:12.9063465Z"
2025-01-20 22:40:12.911 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:40:12.9115869Z"
2025-01-20 22:40:12.914 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:40:12.9140332Z"
2025-01-20 22:40:12.922 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:40:12.928 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T20:40:12.9281096Z"
2025-01-20 22:40:12.929 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T20:40:12.9295438Z"
2025-01-20 22:40:12.931 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 24.8845ms.
2025-01-20 22:40:12.933 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:40:12.936 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 59.3704ms
2025-01-20 22:40:12.939 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:40:12.941 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 77.9291ms
2025-01-20 22:40:12.947 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - null null
2025-01-20 22:40:12.950 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:12.952 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User?giftId=3 - 204 null null 5.0415ms
2025-01-20 22:40:12.957 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - application/json 2
2025-01-20 22:40:12.961 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:12.962 +02:00 [INF] Incoming Request: POST /api/User
2025-01-20 22:40:12.964 +02:00 [INF] Executing endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:40:12.965 +02:00 [INF] Route matched with {action = "AddToBasket", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddToBasketAsync(Int32, Int32) on controller project.Controllers.UserController (project).
2025-01-20 22:40:12.994 +02:00 [INF] Executing action method project.Controllers.UserController.AddToBasketAsync (project) - Validation state: "Valid"
2025-01-20 22:40:12.996 +02:00 [INF] Starting AddToBasketAsync with GiftId: 3 and Quantity: 1
2025-01-20 22:40:12.998 +02:00 [INF] Authorization token received, attempting to retrieve user.
2025-01-20 22:40:12.999 +02:00 [INF] Received request to fetch user by token.
2025-01-20 22:40:13.000 +02:00 [INF] Parsing token...
2025-01-20 22:40:13.002 +02:00 [INF] Attempting to retrieve user with username: manager1 and email: manager1@example.com
2025-01-20 22:40:13.015 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[p0='?' (Size = 4000), p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[AccessFailedCount], [m].[ConcurrencyStamp], [m].[Discriminator], [m].[Email], [m].[EmailConfirmed], [m].[LockoutEnabled], [m].[LockoutEnd], [m].[NormalizedEmail], [m].[NormalizedUserName], [m].[PasswordHash], [m].[PhoneNumber], [m].[PhoneNumberConfirmed], [m].[SecurityStamp], [m].[TwoFactorEnabled], [m].[UserName]
FROM (
    SELECT * FROM AspNetUsers WHERE NormalizedUserName = @p0 AND Email = @p1 AND Discriminator = 'User'
) AS [m]
WHERE [m].[Discriminator] = N'User'
2025-01-20 22:40:13.021 +02:00 [ERR] User not found with username: manager1 and email: manager1@example.com
2025-01-20 22:40:13.118 +02:00 [ERR] An error occurred while fetching user by token.
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
2025-01-20 22:40:13.271 +02:00 [ERR] Error occurred while adding Gift 3 to User null's basket
System.Exception: User not found.
   at project.Controllers.UserController.GetUserByTokenAsync(String token) in E:\פרויקט\server\project\Controllers\UserController.cs:line 83
   at project.Controllers.UserController.AddToBasketAsync(Int32 giftId, Int32 quantity) in E:\פרויקט\server\project\Controllers\UserController.cs:line 136
2025-01-20 22:40:13.275 +02:00 [INF] Executed action method project.Controllers.UserController.AddToBasketAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 278.5282ms.
2025-01-20 22:40:13.277 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 22:40:13.279 +02:00 [INF] Executed action project.Controllers.UserController.AddToBasketAsync (project) in 310.8793ms
2025-01-20 22:40:13.281 +02:00 [INF] Executed endpoint 'project.Controllers.UserController.AddToBasketAsync (project)'
2025-01-20 22:40:13.283 +02:00 [INF] Outgoing Response: 500
2025-01-20 22:40:13.284 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/User?giftId=3 - 500 null application/json; charset=utf-8 327.008ms
2025-01-20 22:40:40.048 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:40:40.051 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:40:40.054 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:40:40.086 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:40:40.089 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:40:40.0896046Z"
2025-01-20 22:40:40.095 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:40:40.099 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:40.0991594Z"
2025-01-20 22:40:40.100 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:40.1002425Z"
2025-01-20 22:40:40.102 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:40:40.1022763Z"
2025-01-20 22:40:40.104 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 14.8829ms.
2025-01-20 22:40:40.108 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:40:40.111 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 53.152ms
2025-01-20 22:40:40.113 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:40:40.115 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 67.4076ms
2025-01-20 22:40:42.572 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:40:42.578 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:42.579 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:40:42.581 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:40:42.615 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:40:42.619 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:40:42.6191274Z"
2025-01-20 22:40:42.621 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:40:42.6215708Z"
2025-01-20 22:40:42.624 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:40:42.6240798Z"
2025-01-20 22:40:42.642 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:40:42.647 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:40:42.6472565Z"
2025-01-20 22:40:42.648 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:40:42.6483924Z"
2025-01-20 22:40:42.649 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:40:42.6496359Z"
2025-01-20 22:40:42.650 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 31.7995ms.
2025-01-20 22:40:42.655 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:40:42.661 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 76.4738ms
2025-01-20 22:40:42.663 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:40:42.666 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 93.8843ms
2025-01-20 22:40:50.862 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - null null
2025-01-20 22:40:50.867 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:50.869 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - 204 null null 6.9699ms
2025-01-20 22:40:50.873 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - application/json null
2025-01-20 22:40:50.876 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:40:50.878 +02:00 [INF] Incoming Request: GET /api/Reports/excel/winners
2025-01-20 22:40:50.880 +02:00 [INF] Outgoing Response: 404
2025-01-20 22:40:50.881 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - 404 0 null 8.1044ms
2025-01-20 22:40:50.888 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/Reports/excel/winners, Response status code: 404
2025-01-20 22:40:59.355 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:40:59.360 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:40:59.362 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:40:59.392 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:40:59.395 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:40:59.3951661Z"
2025-01-20 22:40:59.396 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:40:59.3966278Z"
2025-01-20 22:40:59.397 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:40:59.3978638Z"
2025-01-20 22:40:59.408 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:40:59.413 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:40:59.4134202Z"
2025-01-20 22:40:59.414 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:40:59.4145508Z"
2025-01-20 22:40:59.415 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:40:59.4158367Z"
2025-01-20 22:40:59.417 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21.9812ms.
2025-01-20 22:40:59.420 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:40:59.422 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 57.7063ms
2025-01-20 22:40:59.424 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:40:59.426 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 70.8712ms
2025-01-20 22:41:05.415 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:41:05.419 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 22:41:05.421 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:05.424 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:05.425 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 10.1203ms
2025-01-20 22:41:05.427 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 22:41:05.432 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:41:05.435 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 22:41:05.440 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:05.483 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:41:05.483 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 22:41:05.485 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:41:05.491 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:41:05.498 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 22:41:05.565 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:41:05.571 +02:00 [INF] Successfully retrieved categories.
2025-01-20 22:41:05.573 +02:00 [INF] Fetching all donators.
2025-01-20 22:41:05.578 +02:00 [INF] Fetching all donators.
2025-01-20 22:41:05.575 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 86.8963ms.
2025-01-20 22:41:05.616 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:41:05.616 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:05.624 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:41:05.628 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 184.1839ms
2025-01-20 22:41:05.630 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 56.4927ms.
2025-01-20 22:41:05.633 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 22:41:05.638 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:05.640 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 221.3718ms
2025-01-20 22:41:05.657 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 157.42ms
2025-01-20 22:41:05.666 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:41:05.670 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:41:05.673 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 240.2741ms
2025-01-20 22:41:18.008 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 22:41:18.014 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:18.016 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 7.8956ms
2025-01-20 22:41:18.023 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 154
2025-01-20 22:41:18.026 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:18.029 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:41:18.033 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:41:18.071 +02:00 [INF] Executing action method project.Controllers.GiftController.CreateGiftAsync (project) - Validation state: "Valid"
2025-01-20 22:41:18.074 +02:00 [INF] Starting CreateGiftAsync at "2025-01-20T20:41:18.0741997Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 22:41:18.075 +02:00 [INF] Starting CreateGiftAsync for GiftDto: wrw at "2025-01-20T20:41:18.0758361Z"
2025-01-20 22:41:18.078 +02:00 [INF] Fetching donator by name: miri
2025-01-20 22:41:18.084 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-20 22:41:18.094 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-20 22:41:18.098 +02:00 [INF] Successfully retrieved category with name: aנa
2025-01-20 22:41:18.100 +02:00 [INF] Starting CreateGiftAsync for Gift: wrw at "2025-01-20T20:41:18.1004727Z"
2025-01-20 22:41:18.114 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-20 22:41:18.119 +02:00 [INF] CreateGiftAsync completed successfully for Gift: wrw at "2025-01-20T20:41:18.1192867Z"
2025-01-20 22:41:18.121 +02:00 [INF] CreateGiftAsync completed successfully for Gift: wrw at "2025-01-20T20:41:18.1210763Z"
2025-01-20 22:41:18.122 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-20T20:41:18.1227545Z"
2025-01-20 22:41:18.124 +02:00 [INF] Executed action method project.Controllers.GiftController.CreateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 50.4757ms.
2025-01-20 22:41:18.128 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 22:41:18.130 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 92.33ms
2025-01-20 22:41:18.132 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:41:18.134 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null text/plain; charset=utf-8 111.5232ms
2025-01-20 22:41:32.447 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:41:32.451 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:41:32.454 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:41:32.481 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:41:32.483 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:32.4836968Z"
2025-01-20 22:41:32.485 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:32.4855257Z"
2025-01-20 22:41:32.487 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:32.4870613Z"
2025-01-20 22:41:32.496 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:41:32.503 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:32.5032842Z"
2025-01-20 22:41:32.504 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:32.5048255Z"
2025-01-20 22:41:32.506 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:32.5063180Z"
2025-01-20 22:41:32.507 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 24.0861ms.
2025-01-20 22:41:32.510 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:32.512 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 55.6961ms
2025-01-20 22:41:32.514 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:41:32.516 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 68.529ms
2025-01-20 22:41:43.080 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:41:43.085 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:43.087 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.8488ms
2025-01-20 22:41:43.093 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:41:43.098 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:43.100 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:41:43.103 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:41:43.105 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:41:43.132 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:41:43.135 +02:00 [INF] Fetching all donators.
2025-01-20 22:41:43.136 +02:00 [INF] Fetching all donators.
2025-01-20 22:41:43.142 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:41:43.145 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:41:43.146 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.2628ms.
2025-01-20 22:41:43.148 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:43.150 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 41.7032ms
2025-01-20 22:41:43.152 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:41:43.155 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:41:43.156 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 63.3214ms
2025-01-20 22:41:44.728 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:41:44.736 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:44.738 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:41:44.740 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:41:44.773 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:41:44.776 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:44.7765776Z"
2025-01-20 22:41:44.778 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:44.7780620Z"
2025-01-20 22:41:44.779 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:44.7793006Z"
2025-01-20 22:41:44.792 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:41:44.796 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:44.7969837Z"
2025-01-20 22:41:44.798 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:44.7981097Z"
2025-01-20 22:41:44.800 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:44.8000607Z"
2025-01-20 22:41:44.802 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 26.3726ms.
2025-01-20 22:41:44.805 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:44.807 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 60.4995ms
2025-01-20 22:41:44.809 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:41:44.811 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 83.1706ms
2025-01-20 22:41:45.859 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:41:45.861 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 22:41:45.864 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/10 - null null
2025-01-20 22:41:45.864 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:45.869 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:45.872 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:45.874 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:41:45.875 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 22:41:45.876 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:41:45.878 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:41:45.879 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 22:41:45.880 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:41:45.882 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:41:45.915 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 22:41:45.945 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:41:45.986 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:41:45.995 +02:00 [INF] Starting GetByIdAsync with ID 10 at "2025-01-20T20:41:45.9953752Z"
2025-01-20 22:41:46.011 +02:00 [INF] Starting GetByIdAsync for Gift ID 10 at "2025-01-20T20:41:46.0112488Z"
2025-01-20 22:41:46.000 +02:00 [INF] Fetching all donators.
2025-01-20 22:41:45.998 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 22:41:46.014 +02:00 [INF] Starting GetByIdAsync for Gift ID 10 at "2025-01-20T20:41:46.0139821Z"
2025-01-20 22:41:46.015 +02:00 [INF] Fetching all donators.
2025-01-20 22:41:46.030 +02:00 [INF] Successfully retrieved categories.
2025-01-20 22:41:46.044 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:41:46.045 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 55.5466ms.
2025-01-20 22:41:46.072 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 10 at "2025-01-20T20:41:46.0727973Z"
2025-01-20 22:41:46.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:46.088 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:41:46.101 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:41:46.094 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 207.917ms
2025-01-20 22:41:46.090 +02:00 [INF] GetByIdAsync completed successfully with ID 10 at "2025-01-20T20:41:46.0907866Z"
2025-01-20 22:41:46.109 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 114.6136ms.
2025-01-20 22:41:46.106 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 22:41:46.103 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 103.7993ms.
2025-01-20 22:41:46.117 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:41:46.122 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 261.4054ms
2025-01-20 22:41:46.127 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:46.131 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 215.255ms
2025-01-20 22:41:46.145 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 196.4261ms
2025-01-20 22:41:46.155 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:41:46.159 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:41:46.163 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/10 - 200 null application/json; charset=utf-8 298.8105ms
2025-01-20 22:41:46.166 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:41:46.177 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 317.6769ms
2025-01-20 22:41:51.602 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 22:41:51.608 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:51.610 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 7.542ms
2025-01-20 22:41:51.616 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 167
2025-01-20 22:41:51.621 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:41:51.624 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:41:51.631 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:41:51.660 +02:00 [INF] Executing action method project.Controllers.GiftController.UpdateGiftAsync (project) - Validation state: "Valid"
2025-01-20 22:41:51.665 +02:00 [INF] Starting UpdateGiftAsync at "2025-01-20T20:41:51.6655857Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 22:41:51.669 +02:00 [INF] Starting UpdateGiftAsync for Gift ID 10 at "2025-01-20T20:41:51.6690442Z"
2025-01-20 22:41:51.673 +02:00 [INF] Starting UpdateGiftAsync for Gift ID 10 at "2025-01-20T20:41:51.6738900Z"
2025-01-20 22:41:51.707 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p8='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [CategoryId] = @p0, [DonatorId] = @p1, [IsLotteryCompleted] = @p2, [Name] = @p3, [Price] = @p4, [Status] = @p5, [WinningId] = @p6, [image] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2025-01-20 22:41:51.712 +02:00 [INF] UpdateGiftAsync completed successfully for Gift ID 10 at "2025-01-20T20:41:51.7124101Z"
2025-01-20 22:41:51.713 +02:00 [INF] UpdateGiftAsync completed successfully for Gift ID 10 at "2025-01-20T20:41:51.7138877Z"
2025-01-20 22:41:51.715 +02:00 [INF] UpdateGiftAsync completed successfully at "2025-01-20T20:41:51.7154042Z"
2025-01-20 22:41:51.716 +02:00 [INF] Executed action method project.Controllers.GiftController.UpdateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 52.4574ms.
2025-01-20 22:41:51.719 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 22:41:51.721 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 85.8709ms
2025-01-20 22:41:51.723 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:41:51.725 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 200 null text/plain; charset=utf-8 109.378ms
2025-01-20 22:41:59.179 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:41:59.187 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:41:59.190 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:41:59.225 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:41:59.227 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:59.2278032Z"
2025-01-20 22:41:59.229 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:59.2290465Z"
2025-01-20 22:41:59.230 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:41:59.2304983Z"
2025-01-20 22:41:59.243 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:41:59.247 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:59.2470042Z"
2025-01-20 22:41:59.248 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:59.2486785Z"
2025-01-20 22:41:59.249 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:41:59.2499499Z"
2025-01-20 22:41:59.251 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.7014ms.
2025-01-20 22:41:59.254 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:41:59.257 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 60.6169ms
2025-01-20 22:41:59.259 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:41:59.261 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 82.0995ms
2025-01-20 22:42:11.968 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:42:11.974 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:11.977 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 8.8095ms
2025-01-20 22:42:11.984 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:42:11.991 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:11.993 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:42:11.995 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:11.997 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:42:12.028 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:42:12.031 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:12.033 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:12.039 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:42:12.042 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:42:12.044 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.2713ms.
2025-01-20 22:42:12.046 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:42:12.048 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 46.2728ms
2025-01-20 22:42:12.050 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:12.052 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:42:12.053 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 69.6723ms
2025-01-20 22:42:15.278 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:42:15.284 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:15.287 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:42:15.289 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:15.291 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:42:15.320 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:42:15.323 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:15.326 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:15.332 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:42:15.339 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:42:15.341 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 17.1645ms.
2025-01-20 22:42:15.345 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:42:15.349 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 53.3173ms
2025-01-20 22:42:15.354 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:15.358 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:42:15.361 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 82.5103ms
2025-01-20 22:42:19.909 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:42:19.913 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:19.914 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.6437ms
2025-01-20 22:42:19.920 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:42:19.924 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:19.926 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:42:19.928 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:19.930 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:42:19.966 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:42:19.971 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:19.973 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:19.978 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:42:19.982 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:42:19.985 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.7063ms.
2025-01-20 22:42:19.990 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:42:19.992 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 58.7655ms
2025-01-20 22:42:19.996 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:19.997 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:42:19.999 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 78.5962ms
2025-01-20 22:42:23.742 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:42:23.747 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:23.750 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:42:23.753 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:23.755 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:42:23.791 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:42:23.795 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:23.796 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:23.808 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:42:23.813 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:42:23.816 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 21.0611ms.
2025-01-20 22:42:23.823 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:42:23.826 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 66.021ms
2025-01-20 22:42:23.828 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:23.830 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:42:23.831 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 89.3476ms
2025-01-20 22:42:27.003 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:42:27.009 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:27.011 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.3556ms
2025-01-20 22:42:27.017 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:42:27.023 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:27.036 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:42:27.044 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:27.046 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 22:42:27.086 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 22:42:27.090 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:27.091 +02:00 [INF] Fetching all donators.
2025-01-20 22:42:27.098 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 22:42:27.107 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 22:42:27.109 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.9062ms.
2025-01-20 22:42:27.113 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:42:27.115 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 64.4417ms
2025-01-20 22:42:27.123 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 22:42:27.125 +02:00 [INF] Outgoing Response: 200
2025-01-20 22:42:27.128 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 110.65ms
2025-01-20 22:42:30.172 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:42:30.177 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:42:30.179 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:42:30.248 +02:00 [WRN] Invalid Token
2025-01-20 22:42:30.249 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 77.1858ms
2025-01-20 22:43:00.707 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:43:00.719 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:00.723 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 15.9969ms
2025-01-20 22:43:00.751 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Donator - application/json 67
2025-01-20 22:43:00.755 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:00.757 +02:00 [INF] Incoming Request: POST /api/Donator
2025-01-20 22:43:00.800 +02:00 [WRN] Invalid Token
2025-01-20 22:43:00.802 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Donator - 401 null null 51.0628ms
2025-01-20 22:43:07.256 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:43:07.260 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:07.262 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.4708ms
2025-01-20 22:43:07.267 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Donator - application/json 67
2025-01-20 22:43:07.271 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:07.273 +02:00 [INF] Incoming Request: POST /api/Donator
2025-01-20 22:43:07.327 +02:00 [WRN] Invalid Token
2025-01-20 22:43:07.329 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Donator - 401 null null 61.7922ms
2025-01-20 22:43:09.154 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 22:43:09.160 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:43:09.162 +02:00 [WRN] Missing Authorization Header
2025-01-20 22:43:09.164 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 10.3416ms
2025-01-20 22:43:09.892 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:43:09.898 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:09.901 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:43:10.119 +02:00 [WRN] Invalid Token
2025-01-20 22:43:10.161 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 269.0428ms
2025-01-20 22:43:13.330 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:43:13.335 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:13.337 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:43:13.338 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:43:13.377 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:43:13.380 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:43:13.3805553Z"
2025-01-20 22:43:13.382 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:43:13.3822711Z"
2025-01-20 22:43:13.386 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:43:13.3867978Z"
2025-01-20 22:43:13.403 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:43:13.407 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:43:13.4071706Z"
2025-01-20 22:43:13.408 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:43:13.4084058Z"
2025-01-20 22:43:13.410 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:43:13.4107657Z"
2025-01-20 22:43:13.412 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 31.8487ms.
2025-01-20 22:43:13.414 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:13.418 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 76.5538ms
2025-01-20 22:43:13.420 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:43:13.423 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 93.3623ms
2025-01-20 22:43:15.281 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:43:15.286 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:43:15.288 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:43:15.323 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:43:15.326 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:43:15.3261235Z"
2025-01-20 22:43:15.327 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:43:15.3273426Z"
2025-01-20 22:43:15.328 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:43:15.3285799Z"
2025-01-20 22:43:15.335 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:43:15.377 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:43:15.3779331Z"
2025-01-20 22:43:15.380 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:43:15.3806535Z"
2025-01-20 22:43:15.382 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:43:15.3823619Z"
2025-01-20 22:43:15.384 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 58.0878ms.
2025-01-20 22:43:15.389 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:15.393 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 102.0007ms
2025-01-20 22:43:15.395 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:43:15.397 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 115.784ms
2025-01-20 22:43:17.828 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 22:43:17.833 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:17.835 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 6.6858ms
2025-01-20 22:43:17.843 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 22:43:17.848 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:17.849 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 22:43:17.894 +02:00 [WRN] Invalid Token
2025-01-20 22:43:17.896 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 53.4015ms
2025-01-20 22:43:23.651 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:43:23.657 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:23.659 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 7.8996ms
2025-01-20 22:43:23.668 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:43:23.673 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:23.675 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:43:23.677 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:43:23.702 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:43:23.705 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:43:23.706 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:43:23.7065073Z"
2025-01-20 22:43:23.707 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:43:23.7077778Z"
2025-01-20 22:43:23.715 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:43:23.719 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:43:23.7196209Z"
2025-01-20 22:43:23.720 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:43:23.7208124Z"
2025-01-20 22:43:23.722 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-20 22:43:23.723 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 18.5285ms.
2025-01-20 22:43:23.725 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:23.728 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 48.6452ms
2025-01-20 22:43:23.731 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:43:23.733 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 64.6384ms
2025-01-20 22:43:28.440 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - null null
2025-01-20 22:43:28.445 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:28.447 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 204 null null 6.5547ms
2025-01-20 22:43:28.452 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - application/json null
2025-01-20 22:43:28.455 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:28.456 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:43:28.457 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:43:28.463 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:43:28.466 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 3.1553ms
2025-01-20 22:43:28.468 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:43:28.471 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=price&order=desc - 400 null application/problem+json; charset=utf-8 19.1988ms
2025-01-20 22:43:31.236 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - null null
2025-01-20 22:43:31.242 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:31.245 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 204 null null 8.2407ms
2025-01-20 22:43:31.253 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - application/json null
2025-01-20 22:43:31.261 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:31.262 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:43:31.264 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:43:31.269 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:43:31.272 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 4.1877ms
2025-01-20 22:43:31.275 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:43:31.278 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/sortBy?sortBy=purchases&order=desc - 400 null application/problem+json; charset=utf-8 24.7686ms
2025-01-20 22:43:35.077 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:43:35.080 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:43:35.082 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:43:35.126 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:43:35.129 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:43:35.130 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:43:35.1307926Z"
2025-01-20 22:43:35.132 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:43:35.1320966Z"
2025-01-20 22:43:35.137 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:43:35.141 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:43:35.1414346Z"
2025-01-20 22:43:35.142 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:43:35.1425601Z"
2025-01-20 22:43:35.144 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-20 22:43:35.145 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.0506ms.
2025-01-20 22:43:35.147 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:35.150 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 64.2083ms
2025-01-20 22:43:35.154 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:43:35.156 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 79.4671ms
2025-01-20 22:43:35.914 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - null null
2025-01-20 22:43:35.923 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:35.930 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithPurchases - 204 null null 15.5936ms
2025-01-20 22:43:35.965 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - application/json null
2025-01-20 22:43:35.972 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:43:35.978 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:43:35.981 +02:00 [INF] Route matched with {action = "GetGiftsWithPurchases", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]]] GetGiftsWithPurchases() on controller project.Controllers.GiftController (project).
2025-01-20 22:43:36.067 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithPurchases (project) - Validation state: "Valid"
2025-01-20 22:43:36.072 +02:00 [INF] Received request to get gifts with purchases.
2025-01-20 22:43:36.074 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:43:36.0743440Z"
2025-01-20 22:43:36.076 +02:00 [INF] Starting GetGiftsWithPurchasesAsync at "2025-01-20T20:43:36.0760997Z"
2025-01-20 22:43:36.103 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], (
    SELECT COALESCE(SUM([u].[Quantity]), 0)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId] AND [u].[GiftStatus] = N'Purchased') AS [Purchases]
FROM [Gifts] AS [g]
2025-01-20 22:43:36.110 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:43:36.1109654Z"
2025-01-20 22:43:36.115 +02:00 [INF] GetGiftsWithPurchasesAsync completed successfully at "2025-01-20T20:43:36.1151321Z"
2025-01-20 22:43:36.119 +02:00 [INF] Successfully retrieved 6 gifts with purchases.
2025-01-20 22:43:36.127 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithPurchases (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 54.9945ms.
2025-01-20 22:43:36.134 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:43:36.167 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithPurchases (project) in 175.5884ms
2025-01-20 22:43:36.217 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithPurchases (project)'
2025-01-20 22:43:36.222 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithPurchases - 200 null application/json; charset=utf-8 256.5252ms
2025-01-20 22:47:58.781 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:47:58.818 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:47:58'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:47:58.826 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:47:58'.
2025-01-20 22:47:58.827 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:47:58.829 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:47:58.872 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:47:58.874 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:47:58.8746684Z"
2025-01-20 22:47:58.876 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:47:58.8764244Z"
2025-01-20 22:47:58.877 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:47:58.8776962Z"
2025-01-20 22:47:58.917 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:47:58.921 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:47:58.9217264Z"
2025-01-20 22:47:58.923 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:47:58.9231611Z"
2025-01-20 22:47:58.924 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:47:58.9244202Z"
2025-01-20 22:47:58.925 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 51.0406ms.
2025-01-20 22:47:58.929 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:47:58.932 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 99.0567ms
2025-01-20 22:47:58.934 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:47:58.936 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 155.5631ms
2025-01-20 22:48:35.898 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:48:35.921 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:48:35'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:48:35.929 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:48:35'.
2025-01-20 22:48:35.933 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:48:35.935 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:48:35.973 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:48:35.976 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:48:35.9761532Z"
2025-01-20 22:48:35.982 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:48:35.988 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:48:35.9886561Z"
2025-01-20 22:48:35.990 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:48:35.9902402Z"
2025-01-20 22:48:35.992 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:48:35.9927068Z"
2025-01-20 22:48:35.994 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.3226ms.
2025-01-20 22:48:35.999 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:48:36.003 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 62.4632ms
2025-01-20 22:48:36.005 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:48:36.008 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 109.7061ms
2025-01-20 22:49:18.330 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 257
2025-01-20 22:49:18.363 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:49:18.365 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:49:18.367 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:49:18'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:49:18.373 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:49:18'.
2025-01-20 22:49:18.375 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:49:18.376 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:49:18.394 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:49:18.396 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 16.3803ms
2025-01-20 22:49:18.398 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:49:18.400 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 69.4695ms
2025-01-20 22:49:22.132 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 257
2025-01-20 22:49:22.137 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:49:22.138 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:49:22.141 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:49:22'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:49:22.147 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:49:22'.
2025-01-20 22:49:22.149 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:49:22.150 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:49:22.155 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:49:22.157 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 4.2071ms
2025-01-20 22:49:22.160 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:49:22.162 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 29.6958ms
2025-01-20 22:49:34.754 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 257
2025-01-20 22:49:34.759 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:49:34.760 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:49:34.762 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:49:34'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:49:34.768 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:49:34'.
2025-01-20 22:49:34.769 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:49:34.771 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:49:34.775 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:49:34.777 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 4.0774ms
2025-01-20 22:49:34.781 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:49:34.783 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 28.2884ms
2025-01-20 22:50:28.475 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 254
2025-01-20 22:50:28.499 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:50:28.502 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:50:28.505 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:50:28'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:50:28.512 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:50:28'.
2025-01-20 22:50:28.514 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:50:28.517 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:50:28.522 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:50:28.524 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 4.5651ms
2025-01-20 22:50:28.546 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:50:28.548 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 73.5074ms
2025-01-20 22:50:46.356 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 251
2025-01-20 22:50:46.361 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:50:46.362 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:50:46.379 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:50:46'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:50:46.389 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:50:46'.
2025-01-20 22:50:46.391 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:50:46.393 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:50:46.400 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:50:46.403 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 4.9754ms
2025-01-20 22:50:46.407 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:50:46.409 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 52.3994ms
2025-01-20 22:51:09.599 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 255
2025-01-20 22:51:09.620 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:51:09.622 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:51:09.624 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:51:09'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:51:09.629 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:51:09'.
2025-01-20 22:51:09.630 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:51:09.633 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:51:09.637 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:51:09.639 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 3.7495ms
2025-01-20 22:51:09.641 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:51:09.643 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 44.5276ms
2025-01-20 22:51:25.576 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:51:25.582 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:51:25'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:51:25.587 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:51:25'.
2025-01-20 22:51:25.589 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:51:25.591 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:51:25.618 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:51:25.621 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:51:25.6210656Z"
2025-01-20 22:51:25.629 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:51:25.634 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:51:25.6347803Z"
2025-01-20 22:51:25.635 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:51:25.6359206Z"
2025-01-20 22:51:25.637 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:51:25.6373530Z"
2025-01-20 22:51:25.638 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 17.5738ms.
2025-01-20 22:51:25.640 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:51:25.642 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 45.87ms
2025-01-20 22:51:25.646 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:51:25.648 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 71.6204ms
2025-01-20 22:51:38.042 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:51:38.047 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:51:38'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:51:38.053 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:51:38'.
2025-01-20 22:51:38.055 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:51:38.056 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:51:38.081 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:51:38.085 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:51:38.0851927Z"
2025-01-20 22:51:38.086 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:51:38.0866774Z"
2025-01-20 22:51:38.088 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:51:38.0884297Z"
2025-01-20 22:51:38.098 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:51:38.103 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:51:38.1033314Z"
2025-01-20 22:51:38.104 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:51:38.1044473Z"
2025-01-20 22:51:38.105 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:51:38.1056741Z"
2025-01-20 22:51:38.106 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21.7531ms.
2025-01-20 22:51:38.109 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:51:38.112 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 52.5513ms
2025-01-20 22:51:38.115 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:51:38.116 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 74.4586ms
2025-01-20 22:52:24.154 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 218
2025-01-20 22:52:24.182 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:52:24.183 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:52:24.186 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:52:24'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:52:24.190 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:52:24'.
2025-01-20 22:52:24.192 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:52:24.195 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:52:24.201 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:52:24.203 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 3.5969ms
2025-01-20 22:52:24.204 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:52:24.206 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 51.9957ms
2025-01-20 22:52:41.457 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 218
2025-01-20 22:52:41.461 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:52:41.463 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:52:41.465 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:52:41'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:52:41.472 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:52:41'.
2025-01-20 22:52:41.474 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:52:41.475 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:52:41.480 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:52:41.482 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 3.4563ms
2025-01-20 22:52:41.484 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:52:41.486 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 29.2845ms
2025-01-20 22:52:55.666 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 218
2025-01-20 22:52:55.670 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:52:55.671 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:52:55.674 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:52:55'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:52:55.683 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:52:55'.
2025-01-20 22:52:55.685 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:52:55.686 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:52:55.691 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:52:55.694 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 5.4358ms
2025-01-20 22:52:55.698 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 22:52:55.699 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 33.5856ms
2025-01-20 22:53:58.897 +02:00 [INF] Starting up the application
2025-01-20 22:54:02.531 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 22:54:04.759 +02:00 [INF] Executed DbCommand (73ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 22:54:04.924 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 22:54:05.324 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 22:54:05.333 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 22:54:05.339 +02:00 [INF] Hosting environment: Development
2025-01-20 22:54:05.341 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 22:54:06.610 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 22:54:06.926 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 323.0397ms
2025-01-20 22:54:06.949 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 22:54:06.999 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 50.4739ms
2025-01-20 22:54:07.189 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 22:54:07.686 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 496.9186ms
2025-01-20 22:55:00.748 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 22:55:00.807 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 22:55:01.074 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:55:01'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:55:01.116 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:55:01'.
2025-01-20 22:55:01.124 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:55:01.176 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 22:55:01.569 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 22:55:01.579 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T20:55:01.5786226Z"
2025-01-20 22:55:01.584 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:55:01.5841113Z"
2025-01-20 22:55:01.590 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T20:55:01.5899804Z"
2025-01-20 22:55:01.702 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 22:55:01.759 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T20:55:01.7595754Z"
2025-01-20 22:55:01.762 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T20:55:01.7625170Z"
2025-01-20 22:55:01.770 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 193.6071ms.
2025-01-20 22:55:01.781 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 22:55:01.854 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 668.1533ms
2025-01-20 22:55:01.857 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 22:55:01.868 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 1119.4596ms
2025-01-20 22:55:20.196 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 229
2025-01-20 22:55:20.206 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:55:20.208 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:55:20.217 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:55:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:55:20.224 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:55:20'.
2025-01-20 22:55:20.227 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:55:20.239 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:55:20.354 +02:00 [INF] Executing action method project.Controllers.GiftController.CreateGiftAsync (project) - Validation state: "Valid"
2025-01-20 22:55:20.358 +02:00 [INF] Starting CreateGiftAsync at "2025-01-20T20:55:20.3587965Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 22:55:20.362 +02:00 [INF] Starting CreateGiftAsync for GiftDto: car at "2025-01-20T20:55:20.3624465Z"
2025-01-20 22:55:20.365 +02:00 [INF] Fetching donator by name: 
2025-01-20 22:55:20.398 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE 0 = 1
2025-01-20 22:55:20.403 +02:00 [WRN] Donator with name  not found.
2025-01-20 22:55:20.609 +02:00 [ERR] Argument error in CreateGiftAsync at "2025-01-20T20:55:20.6088901Z"
System.ArgumentException: Donator not found.
   at project.Services.GiftService.CreateGiftAsync(GiftDto giftDto) in E:\פרויקט\server\project\Services\GiftService.cs:line 35
   at project.Controllers.GiftController.CreateGiftAsync(GiftDto gift) in E:\פרויקט\server\project\Controllers\GiftController.cs:line 103
2025-01-20 22:55:20.637 +02:00 [INF] Executed action method project.Controllers.GiftController.CreateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 281.4107ms.
2025-01-20 22:55:20.643 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-01-20 22:55:20.646 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 402.0595ms
2025-01-20 22:55:20.648 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:55:20.650 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 400 null text/plain; charset=utf-8 453.3683ms
2025-01-20 22:55:31.298 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 229
2025-01-20 22:55:31.304 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:55:31.305 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:55:31.311 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:55:31'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:55:31.317 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:55:31'.
2025-01-20 22:55:31.319 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:55:31.321 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:55:31.343 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:55:31.387 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 62.5359ms
2025-01-20 22:55:31.390 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:55:31.393 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 94.7876ms
2025-01-20 22:56:15.798 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 226
2025-01-20 22:56:15.818 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:56:15.819 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:56:15.822 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:56:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:56:15.828 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:56:15'.
2025-01-20 22:56:15.829 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:56:15.831 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:56:15.836 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:56:15.840 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 6.3998ms
2025-01-20 22:56:15.911 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:56:15.913 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 115.3709ms
2025-01-20 22:56:20.217 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 226
2025-01-20 22:56:20.222 +02:00 [INF] CORS policy execution failed.
2025-01-20 22:56:20.224 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 22:56:20.227 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:56:20'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:56:20.249 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:56:20'.
2025-01-20 22:56:20.251 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:56:20.253 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 22:56:20.258 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-20 22:56:20.260 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 4.6231ms
2025-01-20 22:56:20.262 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 22:56:20.263 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 400 null application/problem+json; charset=utf-8 45.8494ms
2025-01-20 22:57:22.696 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=car - null null
2025-01-20 22:57:22.702 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:57:22'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 22:57:22.708 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:09:11', Current time (UTC): '20/01/2025 20:57:22'.
2025-01-20 22:57:22.710 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 22:57:22.717 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchAsync(System.String) on controller project.Controllers.GiftController (project).
2025-01-20 22:57:22.757 +02:00 [INF] Executing action method project.Controllers.GiftController.SearchAsync (project) - Validation state: "Valid"
2025-01-20 22:57:22.763 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T20:57:22.7637095Z"
2025-01-20 22:57:22.767 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T20:57:22.7677562Z"
2025-01-20 22:57:22.773 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T20:57:22.7737675Z"
2025-01-20 22:57:23.028 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__text_0_contains='?' (Size = 50), @__text_0='?' (Size = 11) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u0]
    WHERE [g].[Id] = [u0].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
WHERE [g].[Name] LIKE @__text_0_contains ESCAPE N'\' OR ([d].[Id] IS NOT NULL AND [d].[Name] LIKE @__text_0_contains ESCAPE N'\') OR COALESCE(CONVERT(varchar(11), (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId])), '') = @__text_0
2025-01-20 22:57:23.036 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T20:57:23.0363656Z"
2025-01-20 22:57:23.037 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T20:57:23.0379272Z"
2025-01-20 22:57:23.040 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T20:57:23.0405699Z"
2025-01-20 22:57:23.044 +02:00 [INF] Executed action method project.Controllers.GiftController.SearchAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 283.391ms.
2025-01-20 22:57:23.049 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:57:23.056 +02:00 [INF] Executed action project.Controllers.GiftController.SearchAsync (project) in 335.722ms
2025-01-20 22:57:23.060 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 22:57:23.063 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=car - 200 null application/json; charset=utf-8 366.2238ms
2025-01-20 22:57:51.936 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 22:57:51.956 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:57:51.958 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:57:51.964 +02:00 [INF] Route matched with {action = "GetGifts", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.Gift]] GetGiftsAsync() on controller project.Controllers.GiftController (project).
2025-01-20 22:57:51.997 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsAsync (project) - Validation state: "Valid"
2025-01-20 22:57:52.001 +02:00 [INF] Starting GetGiftsAsync at "2025-01-20T20:57:52.0012416Z"
2025-01-20 22:57:52.015 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
2025-01-20 22:57:52.037 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:57:52.0373606Z"
2025-01-20 22:57:52.039 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:57:52.0395731Z"
2025-01-20 22:57:52.041 +02:00 [INF] GetGiftsAsync completed successfully at "2025-01-20T20:57:52.0416513Z"
2025-01-20 22:57:52.043 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 43.8179ms.
2025-01-20 22:57:52.046 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Gift, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:57:52.051 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsAsync (project) in 84.1212ms
2025-01-20 22:57:52.054 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsAsync (project)'
2025-01-20 22:57:52.057 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 121.6122ms
2025-01-20 22:57:58.344 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - null null
2025-01-20 22:57:58.348 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:57:58.354 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/User/basket - 204 null null 10.3795ms
2025-01-20 22:57:58.361 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/User/basket - application/json null
2025-01-20 22:57:58.364 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:57:58.366 +02:00 [INF] Incoming Request: GET /api/User/basket
2025-01-20 22:57:58.454 +02:00 [WRN] Invalid Token
2025-01-20 22:57:58.456 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/User/basket - 401 null null 95.8835ms
2025-01-20 22:57:59.609 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:57:59.613 +02:00 [INF] CORS policy execution successful.
2025-01-20 22:57:59.615 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:57:59.621 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:57:59.664 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:57:59.668 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:57:59.6687657Z"
2025-01-20 22:57:59.671 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:57:59.6711443Z"
2025-01-20 22:57:59.676 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:57:59.6762014Z"
2025-01-20 22:57:59.696 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:57:59.701 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:57:59.7012120Z"
2025-01-20 22:57:59.702 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:57:59.7024320Z"
2025-01-20 22:57:59.703 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:57:59.7037047Z"
2025-01-20 22:57:59.705 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 37.9001ms.
2025-01-20 22:57:59.709 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:57:59.714 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 88.3261ms
2025-01-20 22:57:59.715 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:57:59.717 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 107.7824ms
2025-01-20 22:59:04.712 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:59:04.751 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:59:04.762 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:04.765 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:04.767 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:59:04.769 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:59:04.832 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:59:04.868 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:59:04.869 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:04.8695511Z"
2025-01-20 22:59:04.872 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:04.8722127Z"
2025-01-20 22:59:04.874 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:04.8744129Z"
2025-01-20 22:59:04.876 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:04.8762948Z"
2025-01-20 22:59:04.878 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:04.8782182Z"
2025-01-20 22:59:04.879 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:04.8796785Z"
2025-01-20 22:59:04.928 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:59:04.950 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:04.9505609Z"
2025-01-20 22:59:04.957 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:59:04.958 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:04.9581450Z"
2025-01-20 22:59:04.961 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:04.9618638Z"
2025-01-20 22:59:04.963 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:04.9633051Z"
2025-01-20 22:59:04.964 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:04.9645347Z"
2025-01-20 22:59:04.965 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 93.7175ms.
2025-01-20 22:59:04.967 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:04.9672829Z"
2025-01-20 22:59:04.969 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:59:04.970 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 101.4197ms.
2025-01-20 22:59:04.973 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 139.1406ms
2025-01-20 22:59:04.976 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:59:04.978 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:04.981 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 209.0095ms
2025-01-20 22:59:04.983 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 231.9827ms
2025-01-20 22:59:04.986 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:04.998 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 285.8996ms
2025-01-20 22:59:06.987 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:59:07.041 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:07.050 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:59:07.097 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:59:07.099 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:07.0991866Z"
2025-01-20 22:59:07.100 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:07.1006564Z"
2025-01-20 22:59:07.101 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:07.1018988Z"
2025-01-20 22:59:07.116 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:59:07.120 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:07.1208150Z"
2025-01-20 22:59:07.124 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:07.1243166Z"
2025-01-20 22:59:07.126 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:07.1265613Z"
2025-01-20 22:59:07.128 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.6802ms.
2025-01-20 22:59:07.132 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:59:07.134 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 78.5433ms
2025-01-20 22:59:07.136 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:07.139 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 152.4276ms
2025-01-20 22:59:12.446 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:59:12.450 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:12.452 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:59:12.486 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:59:12.489 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:12.4895286Z"
2025-01-20 22:59:12.491 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:12.4916640Z"
2025-01-20 22:59:12.493 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:12.4933963Z"
2025-01-20 22:59:12.507 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:59:12.512 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:12.5129424Z"
2025-01-20 22:59:12.514 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:12.5148581Z"
2025-01-20 22:59:12.516 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:12.5166582Z"
2025-01-20 22:59:12.518 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 28.5686ms.
2025-01-20 22:59:12.520 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:59:12.523 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 67.054ms
2025-01-20 22:59:12.526 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:12.528 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 81.9317ms
2025-01-20 22:59:35.648 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:59:35.652 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:35.655 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:59:35.698 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:59:35.739 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:35.7399714Z"
2025-01-20 22:59:35.741 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:35.7413046Z"
2025-01-20 22:59:35.742 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:35.7429597Z"
2025-01-20 22:59:35.757 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:59:35.764 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:35.7646919Z"
2025-01-20 22:59:35.774 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:35.7740327Z"
2025-01-20 22:59:35.775 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:35.7759071Z"
2025-01-20 22:59:35.777 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 37.7475ms.
2025-01-20 22:59:35.781 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:59:35.784 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 125.1773ms
2025-01-20 22:59:35.787 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:35.789 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 141.683ms
2025-01-20 22:59:52.138 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 22:59:52.142 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:52.144 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 22:59:52.186 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 22:59:52.189 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:52.1892634Z"
2025-01-20 22:59:52.191 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:52.1911053Z"
2025-01-20 22:59:52.192 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T20:59:52.1926547Z"
2025-01-20 22:59:52.207 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 22:59:52.212 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:52.2123052Z"
2025-01-20 22:59:52.213 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:52.2138698Z"
2025-01-20 22:59:52.215 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T20:59:52.2155611Z"
2025-01-20 22:59:52.217 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 28.2342ms.
2025-01-20 22:59:52.220 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 22:59:52.223 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 76.4602ms
2025-01-20 22:59:52.226 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 22:59:52.229 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 90.4546ms
2025-01-20 23:00:06.766 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=rge - null null
2025-01-20 23:00:06.771 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:00:06.772 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=rge - 204 null null 6.7132ms
2025-01-20 23:00:06.779 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=rge - application/json null
2025-01-20 23:00:06.784 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:00:06.790 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:42:29', Current time (UTC): '20/01/2025 21:00:06'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 23:00:06.801 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:42:29', Current time (UTC): '20/01/2025 21:00:06'.
2025-01-20 23:00:06.803 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:00:06.806 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchAsync(System.String) on controller project.Controllers.GiftController (project).
2025-01-20 23:00:06.837 +02:00 [INF] Executing action method project.Controllers.GiftController.SearchAsync (project) - Validation state: "Valid"
2025-01-20 23:00:06.840 +02:00 [INF] Starting SearchAsync with text 'rge' at "2025-01-20T21:00:06.8405200Z"
2025-01-20 23:00:06.843 +02:00 [INF] Starting SearchAsync with text 'rge' at "2025-01-20T21:00:06.8430423Z"
2025-01-20 23:00:06.844 +02:00 [INF] Starting SearchAsync with text 'rge' at "2025-01-20T21:00:06.8448278Z"
2025-01-20 23:00:06.862 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__text_0_contains='?' (Size = 50), @__text_0='?' (Size = 11) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u0]
    WHERE [g].[Id] = [u0].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
WHERE [g].[Name] LIKE @__text_0_contains ESCAPE N'\' OR ([d].[Id] IS NOT NULL AND [d].[Name] LIKE @__text_0_contains ESCAPE N'\') OR COALESCE(CONVERT(varchar(11), (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId])), '') = @__text_0
2025-01-20 23:00:06.867 +02:00 [INF] SearchAsync completed successfully with text 'rge' at "2025-01-20T21:00:06.8672566Z"
2025-01-20 23:00:06.869 +02:00 [INF] SearchAsync completed successfully with text 'rge' at "2025-01-20T21:00:06.8692719Z"
2025-01-20 23:00:06.871 +02:00 [INF] SearchAsync completed successfully with text 'rge' at "2025-01-20T21:00:06.8713305Z"
2025-01-20 23:00:06.873 +02:00 [INF] Executed action method project.Controllers.GiftController.SearchAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 32.8413ms.
2025-01-20 23:00:06.875 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:00:06.878 +02:00 [INF] Executed action project.Controllers.GiftController.SearchAsync (project) in 67.9789ms
2025-01-20 23:00:06.880 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:00:06.882 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=rge - 200 null application/json; charset=utf-8 102.9061ms
2025-01-20 23:00:15.616 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=car - null null
2025-01-20 23:00:15.640 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:00:15.645 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=car - 204 null null 28.6677ms
2025-01-20 23:00:15.651 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=car - application/json null
2025-01-20 23:00:15.655 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:00:15.657 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:42:29', Current time (UTC): '20/01/2025 21:00:15'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-01-20 23:00:15.664 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '20/01/2025 20:42:29', Current time (UTC): '20/01/2025 21:00:15'.
2025-01-20 23:00:15.667 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:00:15.669 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchAsync(System.String) on controller project.Controllers.GiftController (project).
2025-01-20 23:00:15.714 +02:00 [INF] Executing action method project.Controllers.GiftController.SearchAsync (project) - Validation state: "Valid"
2025-01-20 23:00:15.716 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T21:00:15.7162222Z"
2025-01-20 23:00:15.717 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T21:00:15.7178791Z"
2025-01-20 23:00:15.719 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T21:00:15.7194812Z"
2025-01-20 23:00:15.735 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__text_0_contains='?' (Size = 50), @__text_0='?' (Size = 11) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u0]
    WHERE [g].[Id] = [u0].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
WHERE [g].[Name] LIKE @__text_0_contains ESCAPE N'\' OR ([d].[Id] IS NOT NULL AND [d].[Name] LIKE @__text_0_contains ESCAPE N'\') OR COALESCE(CONVERT(varchar(11), (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId])), '') = @__text_0
2025-01-20 23:00:15.741 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T21:00:15.7416418Z"
2025-01-20 23:00:15.743 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T21:00:15.7432508Z"
2025-01-20 23:00:15.744 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T21:00:15.7448128Z"
2025-01-20 23:00:15.746 +02:00 [INF] Executed action method project.Controllers.GiftController.SearchAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 30.3281ms.
2025-01-20 23:00:15.749 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:00:15.752 +02:00 [INF] Executed action project.Controllers.GiftController.SearchAsync (project) in 79.9353ms
2025-01-20 23:00:15.755 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:00:15.757 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=car - 200 null application/json; charset=utf-8 106.5242ms
2025-01-20 23:00:35.310 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - null null
2025-01-20 23:00:35.314 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:00:35.316 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - 204 null null 5.3841ms
2025-01-20 23:00:35.321 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - application/json null
2025-01-20 23:00:35.324 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:00:35.326 +02:00 [INF] Incoming Request: GET /api/Reports/excel/winners
2025-01-20 23:00:35.377 +02:00 [WRN] Invalid Token
2025-01-20 23:00:35.379 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - 401 null null 57.9072ms
2025-01-20 23:00:50.076 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:00:50.089 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:00:50.152 +02:00 [WRN] Invalid Token
2025-01-20 23:00:50.153 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 401 null null 77.4229ms
2025-01-20 23:01:24.501 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:01:24.531 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:01:24.532 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:01:24.598 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:01:24.600 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:01:24.6006411Z"
2025-01-20 23:01:24.602 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:01:24.6028263Z"
2025-01-20 23:01:24.605 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:01:24.6051776Z"
2025-01-20 23:01:24.624 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:01:24.632 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:01:24.6329035Z"
2025-01-20 23:01:24.635 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:01:24.6355459Z"
2025-01-20 23:01:24.639 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:01:24.6390979Z"
2025-01-20 23:01:24.642 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 41.6336ms.
2025-01-20 23:01:24.645 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:01:24.650 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 107.8341ms
2025-01-20 23:01:24.652 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:01:24.656 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 155.4031ms
2025-01-20 23:02:20.970 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:02:20.991 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:02:21.044 +02:00 [WRN] Invalid Token
2025-01-20 23:02:21.046 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 401 null null 75.6611ms
2025-01-20 23:02:40.735 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:02:40.739 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:02:40.794 +02:00 [WRN] Invalid Token
2025-01-20 23:02:40.796 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 401 null null 60.5162ms
2025-01-20 23:04:15.572 +02:00 [INF] Starting up the application
2025-01-20 23:04:19.468 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:04:22.128 +02:00 [INF] Executed DbCommand (87ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:04:22.326 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:04:22.740 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:04:22.746 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:04:22.748 +02:00 [INF] Hosting environment: Development
2025-01-20 23:04:22.750 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:04:23.935 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:04:24.331 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 401.6222ms
2025-01-20 23:04:24.352 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:04:24.364 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 11.1029ms
2025-01-20 23:04:24.579 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:04:24.934 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 354.7562ms
2025-01-20 23:04:58.181 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:04:58.194 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:04:58.250 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:04:58.526 +02:00 [WRN] Invalid Token
2025-01-20 23:04:58.527 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 401 null null 345.8328ms
2025-01-20 23:05:17.405 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 23:05:17.411 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:05:17.416 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 11.0476ms
2025-01-20 23:05:17.423 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 23:05:17.428 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:05:17.488 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:05:17.526 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 23:05:17.713 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 23:05:17.839 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 23:05:18.099 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 23:05:18.130 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 23:05:18.183 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 23:05:18.212 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 490.3172ms.
2025-01-20 23:05:18.227 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:05:18.267 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 732.6051ms
2025-01-20 23:05:18.271 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:05:18.280 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 856.8704ms
2025-01-20 23:05:39.512 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:05:39.517 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:05:39.605 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-20 23:05:39.612 +02:00 [INF] Route matched with {action = "ExportWinnersToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportWinnersToExcel() on controller project.Controllers.ReportController (project).
2025-01-20 23:05:39.653 +02:00 [INF] Executing action method project.Controllers.ReportController.ExportWinnersToExcel (project) - Validation state: "Valid"
2025-01-20 23:05:39.900 +02:00 [INF] Starting to fetch winners with their gifts.
2025-01-20 23:05:40.032 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image], [w].[Id], [w].[Date], [w].[LinkedUserId], [w].[Name], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Gifts] AS [g]
LEFT JOIN [Winnings] AS [w] ON [g].[WinningId] = [w].[Id]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'User'
) AS [a0] ON [w].[LinkedUserId] = [a0].[Id]
WHERE [g].[WinningId] IS NOT NULL
2025-01-20 23:05:40.130 +02:00 [INF] Successfully fetched 1 gifts for 1 winners.
2025-01-20 23:05:40.833 +02:00 [INF] Executed action method project.Controllers.ReportController.ExportWinnersToExcel (project), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 1178.0951ms.
2025-01-20 23:05:40.838 +02:00 [INF] Executing FileContentResult, sending file with download name 'WinnersReport.xlsx' ...
2025-01-20 23:05:40.852 +02:00 [INF] Executed action project.Controllers.ReportController.ExportWinnersToExcel (project) in 1235.1082ms
2025-01-20 23:05:40.854 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-20 23:05:40.855 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:05:40.857 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 200 2698 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 1345.1961ms
2025-01-20 23:05:48.769 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:05:48.774 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:05:48.780 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:05:48.787 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:05:49.007 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:05:49.011 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:05:49.0114399Z"
2025-01-20 23:05:49.019 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:05:49.0192936Z"
2025-01-20 23:05:49.025 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:05:49.0254941Z"
2025-01-20 23:05:49.083 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:05:49.090 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:05:49.0903726Z"
2025-01-20 23:05:49.091 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:05:49.0917652Z"
2025-01-20 23:05:49.093 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:05:49.0933568Z"
2025-01-20 23:05:49.095 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 85.6844ms.
2025-01-20 23:05:49.098 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:05:49.128 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 336.3538ms
2025-01-20 23:05:49.130 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:05:49.135 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 366.2272ms
2025-01-20 23:05:50.439 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - null null
2025-01-20 23:05:50.443 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:05:50.445 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - 204 null null 6.3178ms
2025-01-20 23:05:50.450 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - application/json null
2025-01-20 23:05:50.453 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:05:50.455 +02:00 [INF] Incoming Request: GET /api/Reports/excel/winners
2025-01-20 23:05:50.457 +02:00 [INF] Outgoing Response: 404
2025-01-20 23:05:50.458 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - 404 0 null 8.0407ms
2025-01-20 23:05:50.465 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/Reports/excel/winners, Response status code: 404
2025-01-20 23:07:04.246 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/revenue - null null
2025-01-20 23:07:04.257 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:07:04.258 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/revenue - 204 null null 22.8738ms
2025-01-20 23:07:04.264 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Reports/excel/revenue - application/json null
2025-01-20 23:07:04.268 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:07:04.269 +02:00 [INF] Incoming Request: GET /api/Reports/excel/revenue
2025-01-20 23:07:04.271 +02:00 [INF] Outgoing Response: 404
2025-01-20 23:07:04.272 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Reports/excel/revenue - 404 0 null 7.9259ms
2025-01-20 23:07:04.277 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/Reports/excel/revenue, Response status code: 404
2025-01-20 23:08:25.969 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:08:25.983 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:08:25.986 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:08:26.036 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:08:26.056 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:08:26.0561106Z"
2025-01-20 23:08:26.057 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:08:26.0573504Z"
2025-01-20 23:08:26.058 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:08:26.0585228Z"
2025-01-20 23:08:26.075 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:08:26.079 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:08:26.0790317Z"
2025-01-20 23:08:26.080 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:08:26.0801226Z"
2025-01-20 23:08:26.081 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:08:26.0816896Z"
2025-01-20 23:08:26.083 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 27.1002ms.
2025-01-20 23:08:26.085 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:08:26.087 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 97.3098ms
2025-01-20 23:08:26.088 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:08:26.090 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 120.4888ms
2025-01-20 23:08:44.196 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:08:44.206 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:08:44.209 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:08:44.262 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:08:44.265 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:08:44.2651367Z"
2025-01-20 23:08:44.267 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:08:44.2673444Z"
2025-01-20 23:08:44.270 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:08:44.2700746Z"
2025-01-20 23:08:44.287 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:08:44.294 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:08:44.2949548Z"
2025-01-20 23:08:44.296 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:08:44.2966829Z"
2025-01-20 23:08:44.298 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:08:44.2985897Z"
2025-01-20 23:08:44.300 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 35.5015ms.
2025-01-20 23:08:44.305 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:08:44.308 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 95.1734ms
2025-01-20 23:08:44.314 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:08:44.325 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 128.8432ms
2025-01-20 23:09:48.257 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - null null
2025-01-20 23:09:48.266 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:09:48.267 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - 204 null null 10.8014ms
2025-01-20 23:09:48.288 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - application/json null
2025-01-20 23:09:48.291 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:09:48.292 +02:00 [INF] Incoming Request: GET /api/Reports/excel/winners
2025-01-20 23:09:48.295 +02:00 [INF] Outgoing Response: 404
2025-01-20 23:09:48.296 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - 404 0 null 7.7894ms
2025-01-20 23:09:48.301 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/Reports/excel/winners, Response status code: 404
2025-01-20 23:10:36.006 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:10:36.025 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:10:36.027 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:10:36.061 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:10:36.064 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:10:36.0644978Z"
2025-01-20 23:10:36.066 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:10:36.0665831Z"
2025-01-20 23:10:36.069 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:10:36.0693825Z"
2025-01-20 23:10:36.082 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:10:36.087 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:10:36.0879733Z"
2025-01-20 23:10:36.089 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:10:36.0894457Z"
2025-01-20 23:10:36.090 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:10:36.0906922Z"
2025-01-20 23:10:36.092 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 27.5112ms.
2025-01-20 23:10:36.094 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:10:36.097 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 66.5107ms
2025-01-20 23:10:36.101 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:10:36.104 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 97.6129ms
2025-01-20 23:10:44.335 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - null null
2025-01-20 23:10:44.340 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:10:44.341 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Reports/excel/winners - 204 null null 5.9423ms
2025-01-20 23:10:44.364 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - application/json null
2025-01-20 23:10:44.367 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:10:44.368 +02:00 [INF] Incoming Request: GET /api/Reports/excel/winners
2025-01-20 23:10:44.370 +02:00 [INF] Outgoing Response: 404
2025-01-20 23:10:44.371 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Reports/excel/winners - 404 0 null 7.1885ms
2025-01-20 23:10:44.376 +02:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5062/api/Reports/excel/winners, Response status code: 404
2025-01-20 23:11:27.178 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:11:27.236 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:11:27.238 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:11:27.280 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:11:27.285 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:11:27.2830549Z"
2025-01-20 23:11:27.286 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:11:27.2869727Z"
2025-01-20 23:11:27.288 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:11:27.2886390Z"
2025-01-20 23:11:27.303 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:11:27.307 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:11:27.3074823Z"
2025-01-20 23:11:27.308 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:11:27.3087622Z"
2025-01-20 23:11:27.310 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:11:27.3109103Z"
2025-01-20 23:11:27.312 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.2573ms.
2025-01-20 23:11:27.315 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:11:27.318 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 77.4837ms
2025-01-20 23:11:27.319 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:11:27.322 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 143.6449ms
2025-01-20 23:11:29.332 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:11:29.336 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:11:29.338 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - 204 null null 6.0684ms
2025-01-20 23:11:29.343 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - application/json null
2025-01-20 23:11:29.348 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:11:29.349 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:11:29.355 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-20 23:11:29.357 +02:00 [INF] Route matched with {action = "ExportWinnersToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportWinnersToExcel() on controller project.Controllers.ReportController (project).
2025-01-20 23:11:29.403 +02:00 [INF] Executing action method project.Controllers.ReportController.ExportWinnersToExcel (project) - Validation state: "Valid"
2025-01-20 23:11:29.407 +02:00 [INF] Starting to fetch winners with their gifts.
2025-01-20 23:11:29.428 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image], [w].[Id], [w].[Date], [w].[LinkedUserId], [w].[Name], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Gifts] AS [g]
LEFT JOIN [Winnings] AS [w] ON [g].[WinningId] = [w].[Id]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'User'
) AS [a0] ON [w].[LinkedUserId] = [a0].[Id]
WHERE [g].[WinningId] IS NOT NULL
2025-01-20 23:11:29.439 +02:00 [INF] Successfully fetched 1 gifts for 1 winners.
2025-01-20 23:11:29.455 +02:00 [INF] Executed action method project.Controllers.ReportController.ExportWinnersToExcel (project), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 48.1182ms.
2025-01-20 23:11:29.457 +02:00 [INF] Executing FileContentResult, sending file with download name 'WinnersReport.xlsx' ...
2025-01-20 23:11:29.460 +02:00 [INF] Executed action project.Controllers.ReportController.ExportWinnersToExcel (project) in 98.5798ms
2025-01-20 23:11:29.463 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-20 23:11:29.467 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:11:29.471 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 200 2698 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 127.8896ms
2025-01-20 23:11:43.447 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/revenue - null null
2025-01-20 23:11:43.452 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:11:43.454 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/revenue - 204 null null 6.3325ms
2025-01-20 23:11:43.458 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/revenue - application/json null
2025-01-20 23:11:43.463 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:11:43.465 +02:00 [INF] Incoming Request: GET /api/Report/excel/revenue
2025-01-20 23:11:43.471 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportRevenueToExcel (project)'
2025-01-20 23:11:43.479 +02:00 [INF] Route matched with {action = "ExportRevenueToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportRevenueToExcel() on controller project.Controllers.ReportController (project).
2025-01-20 23:11:43.514 +02:00 [INF] Executing action method project.Controllers.ReportController.ExportRevenueToExcel (project) - Validation state: "Valid"
2025-01-20 23:11:43.522 +02:00 [INF] Calculating gift revenues.
2025-01-20 23:11:43.602 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT (
    SELECT TOP(1) [g0].[Name]
    FROM [Gifts] AS [g0]
    INNER JOIN [UserGifts] AS [u0] ON [g0].[Id] = [u0].[GiftId]
    WHERE [g].[Id] = [g0].[Id]) AS [GiftName], CAST(COALESCE(SUM([u].[Quantity] * [g].[Price]), 0) AS decimal(18,2)) AS [Revenue]
FROM [Gifts] AS [g]
INNER JOIN [UserGifts] AS [u] ON [g].[Id] = [u].[GiftId]
GROUP BY [g].[Id]
2025-01-20 23:11:43.612 +02:00 [INF] Total revenue calculated: 270.00.
2025-01-20 23:11:44.230 +02:00 [INF] Executed action method project.Controllers.ReportController.ExportRevenueToExcel (project), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 714.1854ms.
2025-01-20 23:11:44.235 +02:00 [INF] Executing FileContentResult, sending file with download name 'RevenueReport.xlsx' ...
2025-01-20 23:11:44.238 +02:00 [INF] Executed action project.Controllers.ReportController.ExportRevenueToExcel (project) in 753.6751ms
2025-01-20 23:11:44.240 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportRevenueToExcel (project)'
2025-01-20 23:11:44.242 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:11:44.244 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/revenue - 200 2836 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 785.8736ms
2025-01-20 23:12:31.855 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-20 23:12:31.867 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:31.869 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 25.659ms
2025-01-20 23:12:31.894 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:12:31.899 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:31.901 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:12:31.912 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:12:31.968 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:12:31.972 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:12:31.9724195Z"
2025-01-20 23:12:31.976 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:12:31.9760042Z"
2025-01-20 23:12:31.981 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:12:31.9816784Z"
2025-01-20 23:12:32.068 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:12:32.110 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:12:32.1103878Z"
2025-01-20 23:12:32.370 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:12:32.406 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:12:32.439 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner dfs at "2025-01-20T21:12:32.4396580Z"
2025-01-20 23:12:32.442 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:12:32.4422509Z"
2025-01-20 23:12:32.444 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 473.5867ms.
2025-01-20 23:12:32.446 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:12:32.451 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 534.6546ms
2025-01-20 23:12:32.454 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:12:32.456 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 562.3096ms
2025-01-20 23:12:42.396 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:12:42.402 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:42.405 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 8.3775ms
2025-01-20 23:12:42.411 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:12:42.415 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:42.416 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:12:42.424 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:12:42.433 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:12:42.476 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:12:42.488 +02:00 [INF] Fetching all donators.
2025-01-20 23:12:42.491 +02:00 [INF] Fetching all donators.
2025-01-20 23:12:42.509 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:12:42.529 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:12:42.531 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 51.3006ms.
2025-01-20 23:12:42.533 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:12:42.560 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 122.2093ms
2025-01-20 23:12:42.562 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:12:42.564 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:12:42.566 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 155.3258ms
2025-01-20 23:12:43.090 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:12:43.095 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:43.098 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:12:43.100 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:12:43.142 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:12:43.150 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:12:43.1501197Z"
2025-01-20 23:12:43.152 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:12:43.1519882Z"
2025-01-20 23:12:43.153 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:12:43.1538316Z"
2025-01-20 23:12:43.168 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:12:43.173 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:12:43.1730268Z"
2025-01-20 23:12:43.174 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:12:43.1744506Z"
2025-01-20 23:12:43.176 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:12:43.1765400Z"
2025-01-20 23:12:43.181 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 31.1447ms.
2025-01-20 23:12:43.184 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:12:43.186 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 83.5498ms
2025-01-20 23:12:43.189 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:12:43.191 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 101.1724ms
2025-01-20 23:12:46.999 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-20 23:12:47.003 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:47.005 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 6.1985ms
2025-01-20 23:12:47.013 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:12:47.020 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:47.022 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:12:47.024 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:12:47.061 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:12:47.064 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:12:47.0645087Z"
2025-01-20 23:12:47.066 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:12:47.0668318Z"
2025-01-20 23:12:47.069 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:12:47.0691403Z"
2025-01-20 23:12:47.089 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:12:47.097 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:12:47.0972041Z"
2025-01-20 23:12:47.110 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:12:47.119 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:12:47.124 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner dfs at "2025-01-20T21:12:47.1240590Z"
2025-01-20 23:12:47.125 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:12:47.1258138Z"
2025-01-20 23:12:47.127 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 62.9021ms.
2025-01-20 23:12:47.131 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:12:47.133 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 104.1208ms
2025-01-20 23:12:47.135 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:12:47.137 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 123.7322ms
2025-01-20 23:12:49.192 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:12:49.199 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:49.201 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 9.1946ms
2025-01-20 23:12:49.207 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:12:49.214 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:49.216 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:12:49.218 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:12:49.220 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:12:49.268 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:12:49.271 +02:00 [INF] Fetching all donators.
2025-01-20 23:12:49.273 +02:00 [INF] Fetching all donators.
2025-01-20 23:12:49.278 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:12:49.283 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:12:49.284 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 13.3302ms.
2025-01-20 23:12:49.287 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:12:49.289 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 64.7153ms
2025-01-20 23:12:49.292 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:12:49.294 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:12:49.296 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 88.5956ms
2025-01-20 23:12:49.955 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:12:49.960 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:12:49.962 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:12:49.964 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:12:50.018 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:12:50.020 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:12:50.0208302Z"
2025-01-20 23:12:50.022 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:12:50.0222022Z"
2025-01-20 23:12:50.024 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:12:50.0239791Z"
2025-01-20 23:12:50.038 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:12:50.043 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:12:50.0432707Z"
2025-01-20 23:12:50.049 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:12:50.0492269Z"
2025-01-20 23:12:50.050 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:12:50.0509394Z"
2025-01-20 23:12:50.052 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 31.6945ms.
2025-01-20 23:12:50.055 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:12:50.058 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 90.5858ms
2025-01-20 23:12:50.060 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:12:50.065 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 109.3622ms
2025-01-20 23:13:00.453 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/10 - null null
2025-01-20 23:13:00.458 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:13:00.460 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/10 - 204 null null 6.5186ms
2025-01-20 23:13:00.469 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/10 - null null
2025-01-20 23:13:00.474 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:13:00.477 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:00.488 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:13:00.541 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:13:00.545 +02:00 [INF] Starting DeleteGiftAsync with ID 10 at "2025-01-20T21:13:00.5450886Z"
2025-01-20 23:13:00.548 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 10 at "2025-01-20T21:13:00.5485265Z"
2025-01-20 23:13:00.551 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 10 at "2025-01-20T21:13:00.5512193Z"
2025-01-20 23:13:00.553 +02:00 [INF] Starting GetByIdAsync for Gift ID 10 at "2025-01-20T21:13:00.5539220Z"
2025-01-20 23:13:00.565 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:13:00.587 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:13:00.594 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 10 at "2025-01-20T21:13:00.5946543Z"
2025-01-20 23:13:00.597 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 10 at "2025-01-20T21:13:00.5975139Z"
2025-01-20 23:13:00.599 +02:00 [INF] DeleteGiftAsync completed successfully with ID 10 at "2025-01-20T21:13:00.5990982Z"
2025-01-20 23:13:00.600 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 57.1751ms.
2025-01-20 23:13:00.602 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:13:00.604 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 110.3886ms
2025-01-20 23:13:00.606 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:00.608 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/10 - 200 null text/plain; charset=utf-8 138.4859ms
2025-01-20 23:13:26.719 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/1 - null null
2025-01-20 23:13:26.724 +02:00 [INF] CORS policy execution failed.
2025-01-20 23:13:26.726 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 23:13:26.728 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:26.730 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:13:26.774 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:13:26.777 +02:00 [INF] Starting DeleteGiftAsync with ID 1 at "2025-01-20T21:13:26.7774272Z"
2025-01-20 23:13:26.779 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 1 at "2025-01-20T21:13:26.7799049Z"
2025-01-20 23:13:26.782 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 1 at "2025-01-20T21:13:26.7825563Z"
2025-01-20 23:13:26.784 +02:00 [INF] Starting GetByIdAsync for Gift ID 1 at "2025-01-20T21:13:26.7847689Z"
2025-01-20 23:13:26.789 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:13:26.793 +02:00 [WRN] Gift with ID 1 not found at "2025-01-20T21:13:26.7934920Z"
2025-01-20 23:13:26.796 +02:00 [WRN] Gift with ID 1 not found at "2025-01-20T21:13:26.7960534Z"
2025-01-20 23:13:26.969 +02:00 [ERR] Error occurred in DeleteGiftAsync for Gift ID 1 at "2025-01-20T21:13:26.9690581Z"
System.ArgumentException: Gift not found (Parameter 'id')
   at project.Repository.GiftRepository.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Repositories\GiftRepository.cs:line 50
2025-01-20 23:13:27.177 +02:00 [ERR] Error occurred in DeleteGiftAsync for Gift ID 1 at "2025-01-20T21:13:27.1774964Z"
System.Exception: An error occurred while deleting the gift.
   at project.Repository.GiftRepository.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Repositories\GiftRepository.cs:line 60
   at project.Services.GiftService.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Services\GiftService.cs:line 146
2025-01-20 23:13:27.317 +02:00 [ERR] Error occurred in DeleteGiftAsync with ID 1 at "2025-01-20T21:13:27.3175069Z"
System.Exception: An error occurred while deleting the gift.
   at project.Services.GiftService.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Services\GiftService.cs:line 152
   at project.Controllers.GiftController.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Controllers\GiftController.cs:line 156
2025-01-20 23:13:27.322 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 544.7842ms.
2025-01-20 23:13:27.324 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 23:13:27.326 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 589.8652ms
2025-01-20 23:13:27.328 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:27.331 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/1 - 500 null text/plain; charset=utf-8 612.3361ms
2025-01-20 23:13:34.076 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/10 - null null
2025-01-20 23:13:34.081 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:13:34.083 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/10 - 204 null null 6.8363ms
2025-01-20 23:13:34.087 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/10 - null null
2025-01-20 23:13:34.090 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:13:34.094 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:34.097 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:13:34.131 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:13:34.133 +02:00 [INF] Starting DeleteGiftAsync with ID 10 at "2025-01-20T21:13:34.1337105Z"
2025-01-20 23:13:34.135 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 10 at "2025-01-20T21:13:34.1352256Z"
2025-01-20 23:13:34.136 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 10 at "2025-01-20T21:13:34.1367416Z"
2025-01-20 23:13:34.138 +02:00 [INF] Starting GetByIdAsync for Gift ID 10 at "2025-01-20T21:13:34.1383445Z"
2025-01-20 23:13:34.144 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:13:34.149 +02:00 [WRN] Gift with ID 10 not found at "2025-01-20T21:13:34.1497519Z"
2025-01-20 23:13:34.151 +02:00 [WRN] Gift with ID 10 not found at "2025-01-20T21:13:34.1511993Z"
2025-01-20 23:13:34.231 +02:00 [ERR] Error occurred in DeleteGiftAsync for Gift ID 10 at "2025-01-20T21:13:34.2313829Z"
System.ArgumentException: Gift not found (Parameter 'id')
   at project.Repository.GiftRepository.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Repositories\GiftRepository.cs:line 50
2025-01-20 23:13:34.361 +02:00 [ERR] Error occurred in DeleteGiftAsync for Gift ID 10 at "2025-01-20T21:13:34.3612409Z"
System.Exception: An error occurred while deleting the gift.
   at project.Repository.GiftRepository.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Repositories\GiftRepository.cs:line 60
   at project.Services.GiftService.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Services\GiftService.cs:line 146
2025-01-20 23:13:34.492 +02:00 [ERR] Error occurred in DeleteGiftAsync with ID 10 at "2025-01-20T21:13:34.4924832Z"
System.Exception: An error occurred while deleting the gift.
   at project.Services.GiftService.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Services\GiftService.cs:line 152
   at project.Controllers.GiftController.DeleteGiftAsync(Int32 id) in E:\פרויקט\server\project\Controllers\GiftController.cs:line 156
2025-01-20 23:13:34.496 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 363.2462ms.
2025-01-20 23:13:34.499 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-01-20 23:13:34.500 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 398.7729ms
2025-01-20 23:13:34.503 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:34.505 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/10 - 500 null text/plain; charset=utf-8 418.4436ms
2025-01-20 23:13:44.587 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:13:44.592 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:13:44.593 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:13:44.634 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:13:44.636 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:13:44.6364961Z"
2025-01-20 23:13:44.637 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:13:44.6376733Z"
2025-01-20 23:13:44.638 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:13:44.6388983Z"
2025-01-20 23:13:44.690 +02:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:13:44.704 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:13:44.7047201Z"
2025-01-20 23:13:44.706 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:13:44.7068523Z"
2025-01-20 23:13:44.708 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:13:44.7088530Z"
2025-01-20 23:13:44.712 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 75.5584ms.
2025-01-20 23:13:44.715 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:13:44.718 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 119.6503ms
2025-01-20 23:13:44.720 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:13:44.722 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 134.7876ms
2025-01-20 23:13:47.703 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/6 - null null
2025-01-20 23:13:47.708 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:13:47.710 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/6 - 204 null null 6.7786ms
2025-01-20 23:13:47.717 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/6 - null null
2025-01-20 23:13:47.720 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:13:47.721 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:47.723 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:13:47.762 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:13:47.766 +02:00 [INF] Starting DeleteGiftAsync with ID 6 at "2025-01-20T21:13:47.7662993Z"
2025-01-20 23:13:47.768 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 6 at "2025-01-20T21:13:47.7684995Z"
2025-01-20 23:13:47.770 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 6 at "2025-01-20T21:13:47.7700769Z"
2025-01-20 23:13:47.771 +02:00 [INF] Starting GetByIdAsync for Gift ID 6 at "2025-01-20T21:13:47.7719421Z"
2025-01-20 23:13:47.780 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:13:47.794 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:13:47.798 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 6 at "2025-01-20T21:13:47.7984136Z"
2025-01-20 23:13:47.800 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 6 at "2025-01-20T21:13:47.8001199Z"
2025-01-20 23:13:47.801 +02:00 [INF] DeleteGiftAsync completed successfully with ID 6 at "2025-01-20T21:13:47.8019732Z"
2025-01-20 23:13:47.803 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 37.2205ms.
2025-01-20 23:13:47.805 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:13:47.807 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 78.0548ms
2025-01-20 23:13:47.810 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:13:47.812 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/6 - 200 null text/plain; charset=utf-8 95.4611ms
2025-01-20 23:13:50.991 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:13:50.997 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:13:51.000 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:13:51.041 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:13:51.044 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:13:51.0445280Z"
2025-01-20 23:13:51.046 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:13:51.0466606Z"
2025-01-20 23:13:51.049 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:13:51.0492243Z"
2025-01-20 23:13:51.059 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:13:51.065 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:13:51.0659758Z"
2025-01-20 23:13:51.067 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:13:51.0675661Z"
2025-01-20 23:13:51.069 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:13:51.0695707Z"
2025-01-20 23:13:51.071 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 27.0957ms.
2025-01-20 23:13:51.074 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:13:51.076 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 73.3531ms
2025-01-20 23:13:51.079 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:13:51.081 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 89.5698ms
2025-01-20 23:15:12.477 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:15:12.501 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:15:12.502 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:15:12.535 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:15:12.539 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:15:12.5393744Z"
2025-01-20 23:15:12.540 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:15:12.5409559Z"
2025-01-20 23:15:12.542 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:15:12.5421947Z"
2025-01-20 23:15:12.560 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:15:12.566 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:15:12.5661561Z"
2025-01-20 23:15:12.567 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:15:12.5673297Z"
2025-01-20 23:15:12.568 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:15:12.5689514Z"
2025-01-20 23:15:12.571 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32.2346ms.
2025-01-20 23:15:12.575 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:15:12.579 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 73.2025ms
2025-01-20 23:15:12.581 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:15:12.584 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 106.6667ms
2025-01-20 23:15:15.275 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/4 - null null
2025-01-20 23:15:15.300 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:15:15.301 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/4 - 204 null null 25.3586ms
2025-01-20 23:15:15.306 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/4 - null null
2025-01-20 23:15:15.311 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:15:15.313 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:15:15.315 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:15:15.353 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:15:15.356 +02:00 [INF] Starting DeleteGiftAsync with ID 4 at "2025-01-20T21:15:15.3565779Z"
2025-01-20 23:15:15.358 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 4 at "2025-01-20T21:15:15.3586165Z"
2025-01-20 23:15:15.361 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 4 at "2025-01-20T21:15:15.3612272Z"
2025-01-20 23:15:15.363 +02:00 [INF] Starting GetByIdAsync for Gift ID 4 at "2025-01-20T21:15:15.3631765Z"
2025-01-20 23:15:15.370 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:15:15.387 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:15:15.390 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 4 at "2025-01-20T21:15:15.3907505Z"
2025-01-20 23:15:15.392 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 4 at "2025-01-20T21:15:15.3921711Z"
2025-01-20 23:15:15.394 +02:00 [INF] DeleteGiftAsync completed successfully with ID 4 at "2025-01-20T21:15:15.3948084Z"
2025-01-20 23:15:15.396 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 40.059ms.
2025-01-20 23:15:15.398 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:15:15.400 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 81.0868ms
2025-01-20 23:15:15.402 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:15:15.404 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/4 - 200 null text/plain; charset=utf-8 97.8088ms
2025-01-20 23:18:46.614 +02:00 [INF] Starting up the application
2025-01-20 23:18:49.796 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:18:52.083 +02:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:18:52.247 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:18:52.676 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:18:52.682 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:18:52.684 +02:00 [INF] Hosting environment: Development
2025-01-20 23:18:52.686 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:18:53.958 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:18:54.297 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 344.6232ms
2025-01-20 23:18:54.316 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:18:54.326 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.073ms
2025-01-20 23:18:54.632 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:18:55.295 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 662.3213ms
2025-01-20 23:18:59.709 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:18:59.719 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:18:59.859 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:18:59.869 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:18:59.871 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 161.646ms
2025-01-20 23:19:00.546 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:19:00.552 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:19:00.564 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:19:00.568 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:19:00.572 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 25.8828ms
2025-01-20 23:19:03.521 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:19:03.530 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:19:03.532 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:19:03.534 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 13.0505ms
2025-01-20 23:19:04.152 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:19:04.158 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:19:04.161 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:19:04.164 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:19:04.167 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 15.2668ms
2025-01-20 23:19:11.451 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 23:19:11.455 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:19:11.460 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 8.7726ms
2025-01-20 23:19:11.467 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 23:19:11.470 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:19:11.475 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:19:11.515 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 23:19:11.736 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 23:19:11.846 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 23:19:12.184 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 23:19:12.255 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 23:19:12.317 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 23:19:12.353 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 609.3545ms.
2025-01-20 23:19:12.367 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:19:12.410 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 883.5359ms
2025-01-20 23:19:12.413 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:19:12.423 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 956.4275ms
2025-01-20 23:19:13.894 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:19:13.899 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:19:13.901 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:19:13.902 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:19:13.905 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 10.2165ms
2025-01-20 23:19:17.974 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:19:17.978 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:19:17.980 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:19:17.981 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 7.1512ms
2025-01-20 23:19:18.610 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:19:18.616 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:19:18.617 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:19:18.619 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:19:18.622 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 11.286ms
2025-01-20 23:20:04.286 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:20:04.325 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:20:04.326 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:20:04.328 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 42.0748ms
2025-01-20 23:20:04.957 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:20:04.964 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:20:04.966 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:20:04.976 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:20:04.981 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 23.5369ms
2025-01-20 23:20:20.896 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 23:20:20.901 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:20:20.902 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 6.3216ms
2025-01-20 23:20:20.907 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 23:20:20.912 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:20:20.914 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:20:20.916 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 23:20:20.962 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 23:20:20.999 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 23:20:21.166 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 23:20:21.175 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 23:20:21.184 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 23:20:21.190 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 225.8132ms.
2025-01-20 23:20:21.193 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:20:21.195 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 276.385ms
2025-01-20 23:20:21.197 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:20:21.200 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 292.4926ms
2025-01-20 23:20:25.036 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:20:25.044 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:20:25.047 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:20:25.048 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:20:25.050 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 14.6623ms
2025-01-20 23:22:13.422 +02:00 [INF] Starting up the application
2025-01-20 23:22:16.845 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:22:18.996 +02:00 [INF] Executed DbCommand (74ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:22:19.158 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:22:19.544 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:22:19.551 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:22:19.553 +02:00 [INF] Hosting environment: Development
2025-01-20 23:22:19.555 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:22:20.810 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:22:21.209 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 406.4473ms
2025-01-20 23:22:21.232 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:22:21.242 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.6737ms
2025-01-20 23:22:21.440 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:22:21.899 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 459.5385ms
2025-01-20 23:22:25.033 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:22:25.044 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:22:25.175 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:22:25.183 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:22:25.185 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 152.2981ms
2025-01-20 23:22:25.866 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:22:25.879 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:22:25.894 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:22:25.902 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:22:25.905 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 39.6289ms
2025-01-20 23:22:29.123 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:22:29.131 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:22:29.133 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:22:29.135 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 11.1465ms
2025-01-20 23:22:29.803 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:22:29.808 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:22:29.810 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:22:29.813 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:22:29.817 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 13.8804ms
2025-01-20 23:22:35.566 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:22:35.572 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:22:35.576 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 9.6513ms
2025-01-20 23:22:35.582 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:22:35.586 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:22:35.589 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:22:35.711 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:22:35.737 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:22:36.058 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:22:36.067 +02:00 [INF] Fetching all donators.
2025-01-20 23:22:36.072 +02:00 [INF] Fetching all donators.
2025-01-20 23:22:36.175 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:22:36.209 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:22:36.216 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 150.4089ms.
2025-01-20 23:22:36.231 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:22:36.299 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 553.0356ms
2025-01-20 23:22:36.302 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:22:36.305 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:22:36.313 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 731.0693ms
2025-01-20 23:22:37.411 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:22:37.416 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:22:37.418 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:22:37.421 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:22:37.423 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 11.6949ms
2025-01-20 23:23:00.578 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:23:00.622 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 23:23:00.631 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:00.635 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:00.638 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 59.8785ms
2025-01-20 23:23:00.641 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:23:00.647 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:23:00.652 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:00.653 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:23:00.655 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 23:23:00.658 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:23:00.663 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:23:00.755 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 23:23:00.755 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:23:00.765 +02:00 [INF] Fetching all donators.
2025-01-20 23:23:00.767 +02:00 [INF] Fetching all donators.
2025-01-20 23:23:00.795 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:23:00.800 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:23:00.801 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 36.8182ms.
2025-01-20 23:23:00.805 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 23:23:00.808 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:23:00.813 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 147.307ms
2025-01-20 23:23:00.816 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:23:00.818 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:23:00.819 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 172.7903ms
2025-01-20 23:23:00.826 +02:00 [INF] Successfully retrieved categories.
2025-01-20 23:23:00.828 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 69.7612ms.
2025-01-20 23:23:00.831 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:23:00.835 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 173.7939ms
2025-01-20 23:23:00.837 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:23:00.840 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 228.0762ms
2025-01-20 23:23:08.536 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 23:23:08.542 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:08.544 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 7.5238ms
2025-01-20 23:23:08.549 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift - application/json 152
2025-01-20 23:23:08.552 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:08.555 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 23:23:08.571 +02:00 [INF] Route matched with {action = "CreateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 23:23:08.655 +02:00 [INF] Executing action method project.Controllers.GiftController.CreateGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:23:08.660 +02:00 [INF] Starting CreateGiftAsync at "2025-01-20T21:23:08.6597214Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 23:23:08.664 +02:00 [INF] Starting CreateGiftAsync for GiftDto: iu at "2025-01-20T21:23:08.6641250Z"
2025-01-20 23:23:08.667 +02:00 [INF] Fetching donator by name: miri
2025-01-20 23:23:08.682 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__name_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Name] = @__name_0
2025-01-20 23:23:08.697 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__categoryName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[name]
FROM [Categories] AS [c]
WHERE [c].[name] = @__categoryName_0
2025-01-20 23:23:08.702 +02:00 [INF] Successfully retrieved category with name: aנa
2025-01-20 23:23:08.716 +02:00 [INF] Starting CreateGiftAsync for Gift: iu at "2025-01-20T21:23:08.7158945Z"
2025-01-20 23:23:08.974 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Boolean), @p3='?' (Size = 50), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Gifts] ([CategoryId], [DonatorId], [IsLotteryCompleted], [Name], [Price], [Status], [WinningId], [image])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-01-20 23:23:09.020 +02:00 [INF] CreateGiftAsync completed successfully for Gift: iu at "2025-01-20T21:23:09.0203387Z"
2025-01-20 23:23:09.023 +02:00 [INF] CreateGiftAsync completed successfully for Gift: iu at "2025-01-20T21:23:09.0230247Z"
2025-01-20 23:23:09.024 +02:00 [INF] CreateGiftAsync completed successfully at "2025-01-20T21:23:09.0248604Z"
2025-01-20 23:23:09.026 +02:00 [INF] Executed action method project.Controllers.GiftController.CreateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 368.4378ms.
2025-01-20 23:23:09.029 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:23:09.033 +02:00 [INF] Executed action project.Controllers.GiftController.CreateGiftAsync (project) in 457.2206ms
2025-01-20 23:23:09.036 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.CreateGiftAsync (project)'
2025-01-20 23:23:09.039 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift - 200 null text/plain; charset=utf-8 489.9506ms
2025-01-20 23:23:12.438 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:23:12.443 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:23:12.445 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:23:12.447 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 9.1983ms
2025-01-20 23:23:13.045 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:23:13.049 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:13.053 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:23:13.057 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:23:13.060 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 14.9591ms
2025-01-20 23:23:28.615 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:23:28.620 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:23:28.623 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:23:28.625 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 10.7787ms
2025-01-20 23:23:29.393 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:23:29.402 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:23:29.404 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:23:29.406 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:23:29.408 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 14.582ms
2025-01-20 23:24:01.397 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:24:01.418 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:24:01.478 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:24:01.487 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:24:01.493 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:24:01.500 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:24:01.519 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 100.859ms
2025-01-20 23:24:01.504 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 106.8938ms
2025-01-20 23:24:02.395 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:24:02.401 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:24:02.407 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:24:02.410 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:24:02.412 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 16.6951ms
2025-01-20 23:24:13.808 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:24:13.808 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:24:13.812 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:24:13.815 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:24:13.817 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:24:13.818 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:24:13.820 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 11.8131ms
2025-01-20 23:24:13.822 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 13.664ms
2025-01-20 23:24:14.584 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:24:14.662 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:24:14.678 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:24:14.686 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:24:14.688 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 104.587ms
2025-01-20 23:25:54.573 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:25:54.593 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:25:54.594 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:25:54.596 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 22.583ms
2025-01-20 23:28:00.778 +02:00 [INF] Starting up the application
2025-01-20 23:28:05.611 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:28:08.371 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:28:08.571 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:28:09.005 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:28:09.011 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:28:09.014 +02:00 [INF] Hosting environment: Development
2025-01-20 23:28:09.015 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:28:10.508 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:28:10.815 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 312.1239ms
2025-01-20 23:28:10.841 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:28:10.851 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 9.554ms
2025-01-20 23:28:11.079 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:28:11.504 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 424.7903ms
2025-01-20 23:29:41.327 +02:00 [INF] Starting up the application
2025-01-20 23:29:44.911 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:29:47.225 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:29:47.438 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:29:47.863 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:29:47.869 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:29:47.872 +02:00 [INF] Hosting environment: Development
2025-01-20 23:29:47.873 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:29:49.550 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:29:50.011 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 464.7815ms
2025-01-20 23:29:50.046 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:29:50.078 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 31.1651ms
2025-01-20 23:29:50.276 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:29:50.595 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 318.9624ms
2025-01-20 23:29:53.925 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:29:53.937 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:29:54.092 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:29:54.100 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:29:54.104 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 178.3458ms
2025-01-20 23:29:54.673 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:29:54.700 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:29:54.707 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 34.6352ms
2025-01-20 23:29:54.714 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:29:54.722 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:29:54.982 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:29:55.042 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:29:55.531 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:29:55.541 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:29:55.5408017Z"
2025-01-20 23:29:55.545 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:29:55.5454435Z"
2025-01-20 23:29:55.550 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:29:55.5502089Z"
2025-01-20 23:29:55.824 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:29:55.834 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:29:55.8343974Z"
2025-01-20 23:29:55.837 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:29:55.8369576Z"
2025-01-20 23:29:55.840 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:29:55.8399877Z"
2025-01-20 23:29:55.851 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 309.3439ms.
2025-01-20 23:29:55.867 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:29:55.945 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 891.8864ms
2025-01-20 23:29:55.948 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:29:55.962 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 1247.3847ms
2025-01-20 23:30:07.524 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=car - null null
2025-01-20 23:30:07.528 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:07.529 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=car - 204 null null 5.1624ms
2025-01-20 23:30:07.535 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=car - application/json null
2025-01-20 23:30:07.541 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:07.546 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:30:07.564 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchAsync(System.String) on controller project.Controllers.GiftController (project).
2025-01-20 23:30:07.628 +02:00 [INF] Executing action method project.Controllers.GiftController.SearchAsync (project) - Validation state: "Valid"
2025-01-20 23:30:07.632 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T21:30:07.6329042Z"
2025-01-20 23:30:07.636 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T21:30:07.6367480Z"
2025-01-20 23:30:07.645 +02:00 [INF] Starting SearchAsync with text 'car' at "2025-01-20T21:30:07.6457776Z"
2025-01-20 23:30:07.733 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__text_0_contains='?' (Size = 50), @__text_0='?' (Size = 11) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u0]
    WHERE [g].[Id] = [u0].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
WHERE [g].[Name] LIKE @__text_0_contains ESCAPE N'\' OR ([d].[Id] IS NOT NULL AND [d].[Name] LIKE @__text_0_contains ESCAPE N'\') OR COALESCE(CONVERT(varchar(11), (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId])), '') = @__text_0
2025-01-20 23:30:07.739 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T21:30:07.7395445Z"
2025-01-20 23:30:07.741 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T21:30:07.7410735Z"
2025-01-20 23:30:07.742 +02:00 [INF] SearchAsync completed successfully with text 'car' at "2025-01-20T21:30:07.7426081Z"
2025-01-20 23:30:07.745 +02:00 [INF] Executed action method project.Controllers.GiftController.SearchAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.9243ms.
2025-01-20 23:30:07.747 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:30:07.752 +02:00 [INF] Executed action project.Controllers.GiftController.SearchAsync (project) in 182.5557ms
2025-01-20 23:30:07.754 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:30:07.758 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=car - 200 null application/json; charset=utf-8 222.7524ms
2025-01-20 23:30:13.328 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:30:13.333 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:13.336 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 7.6171ms
2025-01-20 23:30:13.341 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:30:13.345 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:13.346 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:30:13.348 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:30:13.385 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:30:13.388 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:30:13.3883125Z"
2025-01-20 23:30:13.389 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:30:13.3896736Z"
2025-01-20 23:30:13.390 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:30:13.3908590Z"
2025-01-20 23:30:13.407 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:30:13.412 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:30:13.4127475Z"
2025-01-20 23:30:13.413 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:30:13.4139097Z"
2025-01-20 23:30:13.415 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:30:13.4152191Z"
2025-01-20 23:30:13.417 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.3702ms.
2025-01-20 23:30:13.421 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:30:13.423 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 68.6528ms
2025-01-20 23:30:13.425 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:30:13.426 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 85.1378ms
2025-01-20 23:30:16.638 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - null null
2025-01-20 23:30:16.642 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:16.643 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Report/excel/winners - 204 null null 5.0645ms
2025-01-20 23:30:16.647 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - application/json null
2025-01-20 23:30:16.651 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:16.653 +02:00 [INF] Incoming Request: GET /api/Report/excel/winners
2025-01-20 23:30:16.679 +02:00 [INF] Executing endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-20 23:30:16.686 +02:00 [INF] Route matched with {action = "ExportWinnersToExcel", controller = "Report"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ExportWinnersToExcel() on controller project.Controllers.ReportController (project).
2025-01-20 23:30:16.714 +02:00 [INF] Executing action method project.Controllers.ReportController.ExportWinnersToExcel (project) - Validation state: "Valid"
2025-01-20 23:30:16.850 +02:00 [INF] Starting to fetch winners with their gifts.
2025-01-20 23:30:16.916 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image], [w].[Id], [w].[Date], [w].[LinkedUserId], [w].[Name], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Gifts] AS [g]
LEFT JOIN [Winnings] AS [w] ON [g].[WinningId] = [w].[Id]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [AspNetUsers] AS [a]
    WHERE [a].[Discriminator] = N'User'
) AS [a0] ON [w].[LinkedUserId] = [a0].[Id]
WHERE [g].[WinningId] IS NOT NULL
2025-01-20 23:30:17.033 +02:00 [INF] Successfully fetched 1 gifts for 1 winners.
2025-01-20 23:30:17.640 +02:00 [INF] Executed action method project.Controllers.ReportController.ExportWinnersToExcel (project), returned result Microsoft.AspNetCore.Mvc.FileContentResult in 923.6948ms.
2025-01-20 23:30:17.644 +02:00 [INF] Executing FileContentResult, sending file with download name 'WinnersReport.xlsx' ...
2025-01-20 23:30:17.653 +02:00 [INF] Executed action project.Controllers.ReportController.ExportWinnersToExcel (project) in 963.2782ms
2025-01-20 23:30:17.656 +02:00 [INF] Executed endpoint 'project.Controllers.ReportController.ExportWinnersToExcel (project)'
2025-01-20 23:30:17.658 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:30:17.660 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Report/excel/winners - 200 2700 application/vnd.openxmlformats-officedocument.spreadsheetml.sheet 1012.5728ms
2025-01-20 23:30:22.250 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-20 23:30:22.255 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:22.257 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 7.2664ms
2025-01-20 23:30:22.261 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:30:22.264 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:22.266 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:30:22.273 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:30:22.321 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:30:22.326 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:30:22.3260314Z"
2025-01-20 23:30:22.330 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:30:22.3306317Z"
2025-01-20 23:30:22.335 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:30:22.3352053Z"
2025-01-20 23:30:22.406 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:30:22.456 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:30:22.4561597Z"
2025-01-20 23:30:22.701 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:30:22.735 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:30:22.768 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner asd at "2025-01-20T21:30:22.7682483Z"
2025-01-20 23:30:22.771 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:30:22.7710318Z"
2025-01-20 23:30:22.772 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 448.546ms.
2025-01-20 23:30:22.775 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:30:22.789 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 512.7257ms
2025-01-20 23:30:22.792 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:30:22.794 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 532.4681ms
2025-01-20 23:30:41.763 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-20 23:30:41.768 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:41.770 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 7.6843ms
2025-01-20 23:30:41.776 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:30:41.782 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:30:41.785 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:30:41.786 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:30:41.822 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:30:41.825 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:30:41.8250116Z"
2025-01-20 23:30:41.827 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:30:41.8271532Z"
2025-01-20 23:30:41.830 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:30:41.8304124Z"
2025-01-20 23:30:41.854 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:30:41.865 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:30:41.8650315Z"
2025-01-20 23:30:41.874 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:30:41.882 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:30:41.889 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner dfs at "2025-01-20T21:30:41.8891244Z"
2025-01-20 23:30:41.890 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:30:41.8908749Z"
2025-01-20 23:30:41.892 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 67.7035ms.
2025-01-20 23:30:41.894 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:30:41.896 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 106.9422ms
2025-01-20 23:30:41.898 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:30:41.901 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 125.228ms
2025-01-20 23:31:45.607 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:31:45.631 +02:00 [INF] CORS policy execution failed.
2025-01-20 23:31:45.633 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 23:31:45.635 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:31:45.637 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:31:45.638 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 401 0 null 31.2992ms
2025-01-20 23:32:03.859 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:32:03.863 +02:00 [INF] CORS policy execution failed.
2025-01-20 23:32:03.865 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 23:32:03.867 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:32:03.869 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:32:03.907 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:32:03.909 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:32:03.9097373Z"
2025-01-20 23:32:03.911 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:32:03.9114841Z"
2025-01-20 23:32:03.913 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:32:03.9131942Z"
2025-01-20 23:32:03.938 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:32:03.946 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:32:03.9465122Z"
2025-01-20 23:32:03.956 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:32:03.964 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:32:03.971 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner dfs at "2025-01-20T21:32:03.9714199Z"
2025-01-20 23:32:03.973 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:32:03.9737187Z"
2025-01-20 23:32:03.975 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 65.6144ms.
2025-01-20 23:32:03.977 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:32:03.979 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 106.6037ms
2025-01-20 23:32:03.983 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:32:03.985 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 125.9158ms
2025-01-20 23:32:51.971 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift - null null
2025-01-20 23:32:51.979 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:32:51.981 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:32:51.983 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:32:51.985 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift - 401 0 null 14.6788ms
2025-01-20 23:32:55.647 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:32:55.653 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:32:55.655 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 8.1226ms
2025-01-20 23:32:55.690 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:32:55.695 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:32:55.698 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:32:55.701 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:32:55.773 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:32:55.776 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:32:55.7765076Z"
2025-01-20 23:32:55.778 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:32:55.7784133Z"
2025-01-20 23:32:55.781 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:32:55.7811036Z"
2025-01-20 23:32:55.793 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:32:55.799 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:32:55.7997251Z"
2025-01-20 23:32:55.802 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:32:55.8026332Z"
2025-01-20 23:32:55.804 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:32:55.8043882Z"
2025-01-20 23:32:55.805 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 29.1925ms.
2025-01-20 23:32:55.808 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:32:55.810 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 105.451ms
2025-01-20 23:32:55.812 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:32:55.815 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 124.3032ms
2025-01-20 23:34:59.402 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:34:59.411 +02:00 [INF] CORS policy execution failed.
2025-01-20 23:34:59.412 +02:00 [INF] Request origin http://localhost:5062 does not have permission to access the resource.
2025-01-20 23:34:59.415 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:34:59.418 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:34:59.460 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:34:59.463 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:34:59.4630407Z"
2025-01-20 23:34:59.465 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:34:59.4656557Z"
2025-01-20 23:34:59.468 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:34:59.4682991Z"
2025-01-20 23:34:59.490 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:34:59.498 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:34:59.4988861Z"
2025-01-20 23:34:59.506 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:34:59.532 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:34:59.538 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner dfs at "2025-01-20T21:34:59.5382843Z"
2025-01-20 23:34:59.539 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:34:59.5399886Z"
2025-01-20 23:34:59.541 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 78.5129ms.
2025-01-20 23:34:59.544 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:34:59.547 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 126.071ms
2025-01-20 23:34:59.550 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:34:59.552 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 151.086ms
2025-01-20 23:35:46.838 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/11 - null null
2025-01-20 23:35:46.862 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:35:46.864 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/11 - 204 null null 25.8802ms
2025-01-20 23:35:46.896 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/11 - null null
2025-01-20 23:35:46.900 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:35:46.902 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:35:46.903 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:35:46.904 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/11 - 401 0 null 8.6876ms
2025-01-20 23:36:03.737 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:03.765 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:36:03.767 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:36:03.768 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 31.5055ms
2025-01-20 23:36:04.057 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:04.061 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:04.063 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 5.7671ms
2025-01-20 23:36:04.068 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:36:04.072 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:04.074 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:04.075 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:36:04.120 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:36:04.122 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:04.1220135Z"
2025-01-20 23:36:04.123 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:04.1234492Z"
2025-01-20 23:36:04.124 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:04.1246741Z"
2025-01-20 23:36:04.135 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:36:04.139 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:04.1392492Z"
2025-01-20 23:36:04.140 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:04.1403523Z"
2025-01-20 23:36:04.141 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:04.1415737Z"
2025-01-20 23:36:04.142 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 20.8122ms.
2025-01-20 23:36:04.145 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:36:04.148 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 68.3635ms
2025-01-20 23:36:04.150 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:04.153 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 84.9697ms
2025-01-20 23:36:07.206 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/11 - null null
2025-01-20 23:36:07.210 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:07.212 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/11 - 204 null null 6.4379ms
2025-01-20 23:36:07.217 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/11 - null null
2025-01-20 23:36:07.220 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:07.222 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:36:07.223 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:36:07.225 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/11 - 401 0 null 7.1883ms
2025-01-20 23:36:08.834 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:08.839 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:36:08.841 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:36:08.842 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 8.3165ms
2025-01-20 23:36:09.081 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:09.086 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:09.087 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 5.7519ms
2025-01-20 23:36:09.093 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:36:09.103 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:09.105 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:09.107 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:36:09.143 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:36:09.146 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:09.1464862Z"
2025-01-20 23:36:09.148 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:09.1488518Z"
2025-01-20 23:36:09.151 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:09.1512115Z"
2025-01-20 23:36:09.155 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:36:09.159 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:09.1599265Z"
2025-01-20 23:36:09.161 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:09.1610237Z"
2025-01-20 23:36:09.162 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:09.1626921Z"
2025-01-20 23:36:09.164 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.0112ms.
2025-01-20 23:36:09.166 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:36:09.168 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 51.4918ms
2025-01-20 23:36:09.170 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:09.172 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 78.3536ms
2025-01-20 23:36:34.675 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:34.683 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:36:34.686 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:36:34.688 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 13.4095ms
2025-01-20 23:36:35.567 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:35.576 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:35.578 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 11.3983ms
2025-01-20 23:36:35.584 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:36:35.590 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:35.592 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:35.595 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:36:35.721 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:36:35.724 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:35.7246877Z"
2025-01-20 23:36:35.726 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:35.7265338Z"
2025-01-20 23:36:35.728 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:35.7287678Z"
2025-01-20 23:36:35.748 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:36:35.754 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:35.7548258Z"
2025-01-20 23:36:35.756 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:35.7563933Z"
2025-01-20 23:36:35.759 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:35.7589917Z"
2025-01-20 23:36:35.766 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 41.3348ms.
2025-01-20 23:36:35.769 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:36:35.773 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 131.6086ms
2025-01-20 23:36:35.776 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:35.779 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 195.113ms
2025-01-20 23:36:47.348 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:47.367 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:36:47.390 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:36:47.418 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 70.4223ms
2025-01-20 23:36:47.984 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:47.989 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:47.991 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 6.2974ms
2025-01-20 23:36:47.999 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:36:48.003 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:48.005 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:48.008 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:36:48.093 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:36:48.098 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:48.0982673Z"
2025-01-20 23:36:48.100 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:48.1000451Z"
2025-01-20 23:36:48.102 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:48.1020779Z"
2025-01-20 23:36:48.118 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:36:48.125 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:48.1249830Z"
2025-01-20 23:36:48.127 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:48.1267710Z"
2025-01-20 23:36:48.130 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:48.1303069Z"
2025-01-20 23:36:48.132 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 34.553ms.
2025-01-20 23:36:48.136 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:36:48.139 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 126.3697ms
2025-01-20 23:36:48.148 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:48.155 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 155.8255ms
2025-01-20 23:36:54.537 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/11 - null null
2025-01-20 23:36:54.543 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:54.546 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/11 - 204 null null 8.5121ms
2025-01-20 23:36:54.550 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/11 - application/json null
2025-01-20 23:36:54.553 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:54.556 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:36:54.564 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:36:54.597 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:36:54.601 +02:00 [INF] Starting DeleteGiftAsync with ID 11 at "2025-01-20T21:36:54.6013471Z"
2025-01-20 23:36:54.605 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 11 at "2025-01-20T21:36:54.6057238Z"
2025-01-20 23:36:54.609 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 11 at "2025-01-20T21:36:54.6090910Z"
2025-01-20 23:36:54.613 +02:00 [INF] Starting GetByIdAsync for Gift ID 11 at "2025-01-20T21:36:54.6133466Z"
2025-01-20 23:36:54.628 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:36:54.695 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:36:54.704 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 11 at "2025-01-20T21:36:54.7046462Z"
2025-01-20 23:36:54.706 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 11 at "2025-01-20T21:36:54.7068884Z"
2025-01-20 23:36:54.708 +02:00 [INF] DeleteGiftAsync completed successfully with ID 11 at "2025-01-20T21:36:54.7083662Z"
2025-01-20 23:36:54.709 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 109.9791ms.
2025-01-20 23:36:54.713 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:36:54.716 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 147.9178ms
2025-01-20 23:36:54.718 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:36:54.720 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/11 - 200 null text/plain; charset=utf-8 169.7904ms
2025-01-20 23:36:57.847 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:57.851 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:36:57.854 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:36:57.855 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 7.9402ms
2025-01-20 23:36:58.347 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:36:58.360 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:58.362 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 14.8991ms
2025-01-20 23:36:58.368 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:36:58.372 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:36:58.374 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:58.377 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:36:58.483 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:36:58.486 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:58.4861394Z"
2025-01-20 23:36:58.487 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:58.4877599Z"
2025-01-20 23:36:58.489 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:36:58.4895541Z"
2025-01-20 23:36:58.510 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:36:58.520 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:58.5201828Z"
2025-01-20 23:36:58.522 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:58.5220735Z"
2025-01-20 23:36:58.524 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:36:58.5244972Z"
2025-01-20 23:36:58.526 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 40.3335ms.
2025-01-20 23:36:58.532 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:36:58.535 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 152.3051ms
2025-01-20 23:36:58.541 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:36:58.546 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 178.5954ms
2025-01-20 23:37:26.801 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:37:26.848 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:37:26.859 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:37:26.869 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:37:26.871 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:37:26.874 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:37:26.876 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 74.7282ms
2025-01-20 23:37:26.878 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 30.1548ms
2025-01-20 23:37:27.498 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:37:27.664 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:37:27.678 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 179.9232ms
2025-01-20 23:37:27.686 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:37:27.700 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:37:27.703 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:37:27.765 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:37:27.832 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:37:27.835 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:37:27.8351366Z"
2025-01-20 23:37:27.836 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:37:27.8369679Z"
2025-01-20 23:37:27.838 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:37:27.8388199Z"
2025-01-20 23:37:27.859 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:37:27.865 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:37:27.8654145Z"
2025-01-20 23:37:27.866 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:37:27.8669367Z"
2025-01-20 23:37:27.868 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:37:27.8688854Z"
2025-01-20 23:37:27.870 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 35.7967ms.
2025-01-20 23:37:27.874 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:37:27.878 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 97.0685ms
2025-01-20 23:37:27.881 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:37:27.884 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 198.45ms
2025-01-20 23:37:34.973 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/8 - null null
2025-01-20 23:37:34.979 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:37:34.980 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/8 - 204 null null 7.5493ms
2025-01-20 23:37:34.986 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/8 - application/json null
2025-01-20 23:37:34.990 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:37:34.991 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:37:34.992 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:37:35.035 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:37:35.037 +02:00 [INF] Starting DeleteGiftAsync with ID 8 at "2025-01-20T21:37:35.0375345Z"
2025-01-20 23:37:35.039 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 8 at "2025-01-20T21:37:35.0390873Z"
2025-01-20 23:37:35.040 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 8 at "2025-01-20T21:37:35.0405187Z"
2025-01-20 23:37:35.042 +02:00 [INF] Starting GetByIdAsync for Gift ID 8 at "2025-01-20T21:37:35.0420100Z"
2025-01-20 23:37:35.048 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:37:35.062 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:37:35.067 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 8 at "2025-01-20T21:37:35.0675070Z"
2025-01-20 23:37:35.068 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 8 at "2025-01-20T21:37:35.0689478Z"
2025-01-20 23:37:35.070 +02:00 [INF] DeleteGiftAsync completed successfully with ID 8 at "2025-01-20T21:37:35.0709909Z"
2025-01-20 23:37:35.073 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 35.5266ms.
2025-01-20 23:37:35.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:37:35.079 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 80.0702ms
2025-01-20 23:37:35.082 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:37:35.084 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/8 - 200 null text/plain; charset=utf-8 97.8465ms
2025-01-20 23:44:09.353 +02:00 [INF] Starting up the application
2025-01-20 23:44:12.736 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:44:15.226 +02:00 [INF] Executed DbCommand (80ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:44:15.415 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:44:15.867 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:44:15.874 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:44:15.876 +02:00 [INF] Hosting environment: Development
2025-01-20 23:44:15.878 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:44:17.055 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:44:17.464 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 458.8623ms
2025-01-20 23:44:17.486 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:44:17.497 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.9468ms
2025-01-20 23:44:17.733 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:44:18.138 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 405.6154ms
2025-01-20 23:44:22.046 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:44:22.055 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:44:22.195 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:44:22.202 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:44:22.204 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 158.2879ms
2025-01-20 23:44:22.794 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:44:22.890 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:44:22.899 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 104.8576ms
2025-01-20 23:44:22.910 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:44:22.922 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:44:23.233 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:44:23.272 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:44:23.659 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:44:23.668 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:44:23.6682452Z"
2025-01-20 23:44:23.674 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:44:23.6743660Z"
2025-01-20 23:44:23.681 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:44:23.6809210Z"
2025-01-20 23:44:23.975 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:44:23.984 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:44:23.9848539Z"
2025-01-20 23:44:23.987 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:44:23.9875135Z"
2025-01-20 23:44:23.989 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:44:23.9895654Z"
2025-01-20 23:44:24.002 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 333.9001ms.
2025-01-20 23:44:24.021 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:44:24.116 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 832.4451ms
2025-01-20 23:44:24.119 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:44:24.131 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 1221.2625ms
2025-01-20 23:44:27.383 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:44:27.391 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 23:44:27.392 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - null null
2025-01-20 23:44:27.396 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:44:27.401 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:44:27.407 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:44:27.409 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 25.4061ms
2025-01-20 23:44:27.413 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:44:27.417 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:44:27.420 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:44:27.426 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:44:27.430 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:44:27.432 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 401 0 null 39.9556ms
2025-01-20 23:44:27.433 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 23:44:27.434 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:44:27.516 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 23:44:27.564 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:44:27.578 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:44:27.588 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 23:44:27.680 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:44:27.693 +02:00 [INF] Fetching all donators.
2025-01-20 23:44:27.699 +02:00 [INF] Fetching all donators.
2025-01-20 23:44:27.751 +02:00 [INF] Successfully retrieved categories.
2025-01-20 23:44:27.754 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 234.7466ms.
2025-01-20 23:44:27.768 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:44:27.769 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:44:27.781 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 334.1843ms
2025-01-20 23:44:27.784 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:44:27.786 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 394.6646ms
2025-01-20 23:44:27.803 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:44:27.805 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 119.72ms.
2025-01-20 23:44:27.808 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:44:27.835 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 249.6886ms
2025-01-20 23:44:27.837 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:44:27.840 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:44:27.845 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 423.8445ms
2025-01-20 23:45:00.611 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:00.623 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:45:00.625 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:45:00.627 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 15.6416ms
2025-01-20 23:45:01.317 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:01.326 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:01.335 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 18.7513ms
2025-01-20 23:45:01.387 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:45:01.394 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:01.397 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:01.401 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:45:01.456 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:45:01.461 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:01.4613557Z"
2025-01-20 23:45:01.463 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:01.4636287Z"
2025-01-20 23:45:01.465 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:01.4653475Z"
2025-01-20 23:45:01.504 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:45:01.517 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:01.5172326Z"
2025-01-20 23:45:01.526 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:01.5264113Z"
2025-01-20 23:45:01.529 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:01.5296139Z"
2025-01-20 23:45:01.533 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 72.5268ms.
2025-01-20 23:45:01.537 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:01.543 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 139.0841ms
2025-01-20 23:45:01.546 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:01.549 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 162.3599ms
2025-01-20 23:45:04.441 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:04.445 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:45:04.447 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:45:04.449 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 8.6227ms
2025-01-20 23:45:05.074 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:45:05.079 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:05.081 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:05.083 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:45:05.142 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:45:05.145 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:05.1453915Z"
2025-01-20 23:45:05.147 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:05.1473947Z"
2025-01-20 23:45:05.149 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:05.1498868Z"
2025-01-20 23:45:05.168 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:45:05.175 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:05.1757781Z"
2025-01-20 23:45:05.177 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:05.1778143Z"
2025-01-20 23:45:05.180 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:05.1808256Z"
2025-01-20 23:45:05.183 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 37.808ms.
2025-01-20 23:45:05.187 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:05.192 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 104.231ms
2025-01-20 23:45:05.194 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:05.196 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 122.2358ms
2025-01-20 23:45:15.801 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:15.809 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:45:15.811 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:45:15.813 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 11.8612ms
2025-01-20 23:45:16.580 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:16.585 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:16.587 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 6.6297ms
2025-01-20 23:45:16.594 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:45:16.599 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:16.602 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:16.604 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:45:16.659 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:45:16.662 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:16.6623890Z"
2025-01-20 23:45:16.664 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:16.6640524Z"
2025-01-20 23:45:16.665 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:16.6658706Z"
2025-01-20 23:45:16.689 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:45:16.698 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:16.6982789Z"
2025-01-20 23:45:16.700 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:16.7000548Z"
2025-01-20 23:45:16.702 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:16.7022661Z"
2025-01-20 23:45:16.705 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 42.7333ms.
2025-01-20 23:45:16.710 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:16.713 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 104.0689ms
2025-01-20 23:45:16.716 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:16.719 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 125.0391ms
2025-01-20 23:45:21.445 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:21.449 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:45:21.450 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:45:21.451 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 6.8233ms
2025-01-20 23:45:21.925 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:21.931 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:21.933 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 7.8246ms
2025-01-20 23:45:21.939 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:45:21.945 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:21.949 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:21.952 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:45:22.016 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:45:22.018 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:22.0186555Z"
2025-01-20 23:45:22.020 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:22.0204319Z"
2025-01-20 23:45:22.022 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:22.0222004Z"
2025-01-20 23:45:22.039 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:45:22.045 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:22.0455833Z"
2025-01-20 23:45:22.047 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:22.0473509Z"
2025-01-20 23:45:22.049 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:22.0496119Z"
2025-01-20 23:45:22.051 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 33.0471ms.
2025-01-20 23:45:22.055 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:22.058 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 101.6441ms
2025-01-20 23:45:22.060 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:22.063 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 123.8482ms
2025-01-20 23:45:29.382 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:29.403 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:45:29.405 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:45:29.409 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 26.7273ms
2025-01-20 23:45:29.849 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:29.853 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:29.855 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 6.3829ms
2025-01-20 23:45:29.861 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:45:29.865 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:29.868 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:29.871 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:45:30.009 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:45:30.016 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:30.0168235Z"
2025-01-20 23:45:30.018 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:30.0185204Z"
2025-01-20 23:45:30.023 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:30.0234732Z"
2025-01-20 23:45:30.063 +02:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:45:30.084 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:30.0848403Z"
2025-01-20 23:45:30.086 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:30.0865460Z"
2025-01-20 23:45:30.090 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:30.0906104Z"
2025-01-20 23:45:30.163 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 146.6451ms.
2025-01-20 23:45:30.170 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:30.180 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 303.9594ms
2025-01-20 23:45:30.183 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:30.187 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 325.8024ms
2025-01-20 23:45:31.267 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:45:31.269 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 23:45:31.273 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/3 - null null
2025-01-20 23:45:31.275 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:31.279 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:31.284 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:31.286 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 19.3389ms
2025-01-20 23:45:31.288 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:45:31.290 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/3 - 204 null null 16.6247ms
2025-01-20 23:45:31.295 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:45:31.297 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 23:45:31.302 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - application/json null
2025-01-20 23:45:31.308 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:31.352 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 23:45:31.354 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:31.356 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:45:31.369 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 23:45:31.370 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 23:45:31.370 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:45:31.375 +02:00 [INF] Successfully retrieved categories.
2025-01-20 23:45:31.378 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:45:31.379 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.3649ms.
2025-01-20 23:45:31.414 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:45:31.416 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:31.419 +02:00 [INF] Fetching all donators.
2025-01-20 23:45:31.429 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:45:31.441 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 129.3359ms
2025-01-20 23:45:31.443 +02:00 [INF] Fetching all donators.
2025-01-20 23:45:31.462 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:45:31.467 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 197.4918ms
2025-01-20 23:45:31.472 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:45:31.501 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:45:31.502 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 83.1902ms.
2025-01-20 23:45:31.504 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:31.548 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 23:45:31.550 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 167.5798ms
2025-01-20 23:45:31.560 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:45:31.555 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T21:45:31.5552142Z"
2025-01-20 23:45:31.563 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:45:31.567 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 271.6695ms
2025-01-20 23:45:31.571 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T21:45:31.5712161Z"
2025-01-20 23:45:31.583 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T21:45:31.5837600Z"
2025-01-20 23:45:31.615 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:45:31.661 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T21:45:31.6617954Z"
2025-01-20 23:45:31.663 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T21:45:31.6638064Z"
2025-01-20 23:45:31.665 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 113.0964ms.
2025-01-20 23:45:31.667 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 23:45:31.673 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 220.087ms
2025-01-20 23:45:31.676 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 23:45:31.678 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 375.8685ms
2025-01-20 23:45:39.414 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 23:45:39.419 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:39.421 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 6.4938ms
2025-01-20 23:45:39.428 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 164
2025-01-20 23:45:39.433 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:39.435 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 23:45:39.443 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 23:45:39.532 +02:00 [INF] Executing action method project.Controllers.GiftController.UpdateGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:45:39.542 +02:00 [INF] Starting UpdateGiftAsync at "2025-01-20T21:45:39.5423791Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 23:45:39.591 +02:00 [INF] Starting UpdateGiftAsync for Gift ID 3 at "2025-01-20T21:45:39.5910269Z"
2025-01-20 23:45:39.609 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__gift_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__gift_Id_0
2025-01-20 23:45:39.776 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [Price] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-01-20 23:45:39.798 +02:00 [INF] UpdateGiftAsync completed successfully for Gift ID 3 at "2025-01-20T21:45:39.7981207Z"
2025-01-20 23:45:39.800 +02:00 [INF] UpdateGiftAsync completed successfully at "2025-01-20T21:45:39.8003967Z"
2025-01-20 23:45:39.802 +02:00 [INF] Executed action method project.Controllers.GiftController.UpdateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 266.7756ms.
2025-01-20 23:45:39.804 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-01-20 23:45:39.806 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 358.9427ms
2025-01-20 23:45:39.808 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 23:45:39.810 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 200 null text/plain; charset=utf-8 381.9719ms
2025-01-20 23:45:51.245 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:51.249 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:45:51.251 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:45:51.252 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 6.9456ms
2025-01-20 23:45:51.737 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:45:51.741 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:51.743 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 6.3886ms
2025-01-20 23:45:51.749 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:45:51.755 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:45:51.759 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:51.761 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:45:51.920 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:45:52.003 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:52.0035237Z"
2025-01-20 23:45:52.011 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:52.0117870Z"
2025-01-20 23:45:52.017 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:45:52.0170025Z"
2025-01-20 23:45:52.071 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:45:52.080 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:52.0804362Z"
2025-01-20 23:45:52.082 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:52.0821261Z"
2025-01-20 23:45:52.083 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:45:52.0839713Z"
2025-01-20 23:45:52.085 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 82.2553ms.
2025-01-20 23:45:52.092 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:45:52.098 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 331.828ms
2025-01-20 23:45:52.102 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:45:52.105 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 356.128ms
2025-01-20 23:49:00.973 +02:00 [INF] Starting up the application
2025-01-20 23:49:04.412 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:49:06.784 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:49:06.978 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:49:07.454 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:49:07.495 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:49:07.498 +02:00 [INF] Hosting environment: Development
2025-01-20 23:49:07.500 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:49:08.286 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:49:08.611 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 333.4381ms
2025-01-20 23:49:08.646 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:49:08.658 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 11.3822ms
2025-01-20 23:49:08.864 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:49:09.144 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 279.69ms
2025-01-20 23:49:12.890 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:49:12.900 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:49:13.034 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-01-20 23:49:13.042 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-01-20 23:49:13.044 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 401 0 null 154.0462ms
2025-01-20 23:49:13.820 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:49:13.843 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:13.849 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 29.2529ms
2025-01-20 23:49:13.928 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:49:13.957 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:14.165 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:14.196 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:49:14.577 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:49:14.581 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:14.5809727Z"
2025-01-20 23:49:14.584 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:14.5840976Z"
2025-01-20 23:49:14.589 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:14.5888804Z"
2025-01-20 23:49:14.854 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:49:14.863 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:14.8631393Z"
2025-01-20 23:49:14.865 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:14.8655810Z"
2025-01-20 23:49:14.868 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:14.8684272Z"
2025-01-20 23:49:14.877 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 292.7553ms.
2025-01-20 23:49:14.896 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:14.969 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 761.9769ms
2025-01-20 23:49:14.973 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:14.986 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 1058.6182ms
2025-01-20 23:49:20.290 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:49:20.293 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Category - null null
2025-01-20 23:49:20.295 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/3 - null null
2025-01-20 23:49:20.296 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:20.301 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:20.304 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:20.306 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 16.2475ms
2025-01-20 23:49:20.308 +02:00 [INF] Executing endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:49:20.309 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/3 - 204 null null 13.4106ms
2025-01-20 23:49:20.315 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:49:20.323 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/3 - application/json null
2025-01-20 23:49:20.325 +02:00 [INF] Route matched with {action = "GetCategories", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCategoriesAsync() on controller project.Controllers.CategoryController (project).
2025-01-20 23:49:20.328 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:20.333 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:20.339 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:49:20.344 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 23:49:20.377 +02:00 [INF] Executing action method project.Controllers.CategoryController.GetCategoriesAsync (project) - Validation state: "Valid"
2025-01-20 23:49:20.397 +02:00 [INF] Route matched with {action = "GetById", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[project.Models.Gift]] GetByIdAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:49:20.416 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:49:20.428 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:49:20.466 +02:00 [INF] Executing action method project.Controllers.GiftController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 23:49:20.509 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:49:20.509 +02:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[name]
FROM [Categories] AS [c]
2025-01-20 23:49:20.514 +02:00 [INF] Starting GetByIdAsync with ID 3 at "2025-01-20T21:49:20.5141341Z"
2025-01-20 23:49:20.517 +02:00 [INF] Fetching all donators.
2025-01-20 23:49:20.526 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T21:49:20.5260973Z"
2025-01-20 23:49:20.527 +02:00 [INF] Fetching all donators.
2025-01-20 23:49:20.530 +02:00 [INF] Starting GetByIdAsync for Gift ID 3 at "2025-01-20T21:49:20.5305951Z"
2025-01-20 23:49:20.579 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:49:20.582 +02:00 [INF] Successfully retrieved categories.
2025-01-20 23:49:20.595 +02:00 [INF] Executed action method project.Controllers.CategoryController.GetCategoriesAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 214.52ms.
2025-01-20 23:49:20.596 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:49:20.598 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Category, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:20.608 +02:00 [INF] Executed action project.Controllers.CategoryController.GetCategoriesAsync (project) in 271.1689ms
2025-01-20 23:49:20.611 +02:00 [INF] Executed endpoint 'project.Controllers.CategoryController.GetCategoriesAsync (project)'
2025-01-20 23:49:20.613 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Category - 200 null application/json; charset=utf-8 320.2633ms
2025-01-20 23:49:20.613 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:49:20.620 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 107.1797ms.
2025-01-20 23:49:20.625 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:20.645 +02:00 [INF] GetByIdAsync completed successfully for Gift ID 3 at "2025-01-20T21:49:20.6452799Z"
2025-01-20 23:49:20.647 +02:00 [INF] GetByIdAsync completed successfully with ID 3 at "2025-01-20T21:49:20.6476000Z"
2025-01-20 23:49:20.649 +02:00 [INF] Executed action method project.Controllers.GiftController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 138.7464ms.
2025-01-20 23:49:20.655 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Gift'.
2025-01-20 23:49:20.657 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 190.0618ms
2025-01-20 23:49:20.663 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:49:20.665 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:49:20.667 +02:00 [INF] Executed action project.Controllers.GiftController.GetByIdAsync (project) in 264.9335ms
2025-01-20 23:49:20.670 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 355.6422ms
2025-01-20 23:49:20.673 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetByIdAsync (project)'
2025-01-20 23:49:20.682 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/3 - 200 null application/json; charset=utf-8 359.4397ms
2025-01-20 23:49:27.025 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - null null
2025-01-20 23:49:27.030 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:27.032 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift - 204 null null 6.8914ms
2025-01-20 23:49:27.040 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Gift - application/json 164
2025-01-20 23:49:27.044 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:27.046 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 23:49:27.056 +02:00 [INF] Route matched with {action = "UpdateGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGiftAsync(project.Models.ModelsDto.GiftDto) on controller project.Controllers.GiftController (project).
2025-01-20 23:49:27.142 +02:00 [INF] Executing action method project.Controllers.GiftController.UpdateGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:49:27.146 +02:00 [INF] Starting UpdateGiftAsync at "2025-01-20T21:49:27.1468436Z" with payload: project.Models.ModelsDto.GiftDto
2025-01-20 23:49:27.165 +02:00 [INF] Starting UpdateGiftAsync for Gift ID 3 at "2025-01-20T21:49:27.1653598Z"
2025-01-20 23:49:27.183 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__gift_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__gift_Id_0
2025-01-20 23:49:27.333 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [Price] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-01-20 23:49:27.356 +02:00 [INF] UpdateGiftAsync completed successfully for Gift ID 3 at "2025-01-20T21:49:27.3563668Z"
2025-01-20 23:49:27.358 +02:00 [INF] UpdateGiftAsync completed successfully at "2025-01-20T21:49:27.3588816Z"
2025-01-20 23:49:27.361 +02:00 [INF] Executed action method project.Controllers.GiftController.UpdateGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 216.3775ms.
2025-01-20 23:49:27.363 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:49:27.378 +02:00 [INF] Executed action project.Controllers.GiftController.UpdateGiftAsync (project) in 317.8572ms
2025-01-20 23:49:27.381 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.UpdateGiftAsync (project)'
2025-01-20 23:49:27.383 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Gift - 200 null application/json; charset=utf-8 343.278ms
2025-01-20 23:49:27.490 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:49:27.495 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:27.498 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 7.1573ms
2025-01-20 23:49:27.506 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:49:27.511 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:27.513 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:27.515 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:49:27.546 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:49:27.548 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:27.5487432Z"
2025-01-20 23:49:27.550 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:27.5501663Z"
2025-01-20 23:49:27.552 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:27.5522846Z"
2025-01-20 23:49:27.572 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:49:27.576 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:27.5765098Z"
2025-01-20 23:49:27.577 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:27.5776178Z"
2025-01-20 23:49:27.578 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:27.5788292Z"
2025-01-20 23:49:27.580 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 31.408ms.
2025-01-20 23:49:27.583 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:27.585 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 65.4759ms
2025-01-20 23:49:27.586 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:27.588 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 82.0689ms
2025-01-20 23:49:35.570 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/5 - null null
2025-01-20 23:49:35.575 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:35.577 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/5 - 204 null null 6.733ms
2025-01-20 23:49:35.582 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Gift/5 - application/json null
2025-01-20 23:49:35.586 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:35.589 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:49:35.595 +02:00 [INF] Route matched with {action = "DeleteGift", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteGiftAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:49:35.632 +02:00 [INF] Executing action method project.Controllers.GiftController.DeleteGiftAsync (project) - Validation state: "Valid"
2025-01-20 23:49:35.637 +02:00 [INF] Starting DeleteGiftAsync with ID 5 at "2025-01-20T21:49:35.6374040Z"
2025-01-20 23:49:35.641 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 5 at "2025-01-20T21:49:35.6409647Z"
2025-01-20 23:49:35.644 +02:00 [INF] Starting DeleteGiftAsync for Gift ID 5 at "2025-01-20T21:49:35.6441334Z"
2025-01-20 23:49:35.645 +02:00 [INF] Starting GetByIdAsync for Gift ID 5 at "2025-01-20T21:49:35.6455988Z"
2025-01-20 23:49:35.651 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
FROM [Gifts] AS [g]
WHERE [g].[Id] = @__id_0
2025-01-20 23:49:35.704 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Gifts]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:49:35.716 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 5 at "2025-01-20T21:49:35.7166437Z"
2025-01-20 23:49:35.720 +02:00 [INF] DeleteGiftAsync completed successfully for Gift ID 5 at "2025-01-20T21:49:35.7209221Z"
2025-01-20 23:49:35.723 +02:00 [INF] DeleteGiftAsync completed successfully with ID 5 at "2025-01-20T21:49:35.7239050Z"
2025-01-20 23:49:35.726 +02:00 [INF] Executed action method project.Controllers.GiftController.DeleteGiftAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.2272ms.
2025-01-20 23:49:35.731 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:49:35.735 +02:00 [INF] Executed action project.Controllers.GiftController.DeleteGiftAsync (project) in 136.1408ms
2025-01-20 23:49:35.741 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.DeleteGiftAsync (project)'
2025-01-20 23:49:35.743 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Gift/5 - 200 null application/json; charset=utf-8 161.1837ms
2025-01-20 23:49:35.751 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:49:35.757 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:35.758 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 7.0051ms
2025-01-20 23:49:35.762 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:49:35.766 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:35.767 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:35.770 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:49:35.801 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:49:35.803 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:35.8037130Z"
2025-01-20 23:49:35.805 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:35.8049833Z"
2025-01-20 23:49:35.806 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:35.8065972Z"
2025-01-20 23:49:35.815 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:49:35.819 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:35.8199418Z"
2025-01-20 23:49:35.822 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:35.8219626Z"
2025-01-20 23:49:35.823 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:35.8235310Z"
2025-01-20 23:49:35.824 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 21.0841ms.
2025-01-20 23:49:35.827 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:35.829 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 56.0802ms
2025-01-20 23:49:35.830 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:35.832 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 69.8082ms
2025-01-20 23:49:37.062 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - null null
2025-01-20 23:49:37.067 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:37.069 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/lottery - 204 null null 6.8579ms
2025-01-20 23:49:37.075 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - application/json 1
2025-01-20 23:49:37.078 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:37.080 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:49:37.086 +02:00 [INF] Route matched with {action = "Lottery", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LotteryAsync(Int32) on controller project.Controllers.GiftController (project).
2025-01-20 23:49:37.119 +02:00 [INF] Executing action method project.Controllers.GiftController.LotteryAsync (project) - Validation state: "Valid"
2025-01-20 23:49:37.124 +02:00 [INF] Starting LotteryAsync for Gift ID 3 at "2025-01-20T21:49:37.1249176Z"
2025-01-20 23:49:37.129 +02:00 [INF] Starting LotteryAsync in Service for Gift ID 3 at "2025-01-20T21:49:37.1290861Z"
2025-01-20 23:49:37.132 +02:00 [INF] Fetching Gift with participants for Gift ID 3 at "2025-01-20T21:49:37.1321084Z"
2025-01-20 23:49:37.271 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[@__giftId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [g0].[Id], [g0].[CategoryId], [g0].[DonatorId], [g0].[IsLotteryCompleted], [g0].[Name], [g0].[Price], [g0].[Status], [g0].[WinningId], [g0].[image], [s].[UserId], [s].[GiftId], [s].[GiftStatus], [s].[Quantity], [s].[Id], [s].[AccessFailedCount], [s].[ConcurrencyStamp], [s].[Discriminator], [s].[Email], [s].[EmailConfirmed], [s].[LockoutEnabled], [s].[LockoutEnd], [s].[NormalizedEmail], [s].[NormalizedUserName], [s].[PasswordHash], [s].[PhoneNumber], [s].[PhoneNumberConfirmed], [s].[SecurityStamp], [s].[TwoFactorEnabled], [s].[UserName]
FROM (
    SELECT TOP(1) [g].[Id], [g].[CategoryId], [g].[DonatorId], [g].[IsLotteryCompleted], [g].[Name], [g].[Price], [g].[Status], [g].[WinningId], [g].[image]
    FROM [Gifts] AS [g]
    WHERE [g].[Id] = @__giftId_0
) AS [g0]
LEFT JOIN (
    SELECT [u].[UserId], [u].[GiftId], [u].[GiftStatus], [u].[Quantity], [a0].[Id], [a0].[AccessFailedCount], [a0].[ConcurrencyStamp], [a0].[Discriminator], [a0].[Email], [a0].[EmailConfirmed], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM [UserGifts] AS [u]
    INNER JOIN (
        SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
        FROM [AspNetUsers] AS [a]
        WHERE [a].[Discriminator] = N'User'
    ) AS [a0] ON [u].[UserId] = [a0].[Id]
) AS [s] ON [g0].[Id] = [s].[GiftId]
ORDER BY [g0].[Id], [s].[UserId], [s].[GiftId]
2025-01-20 23:49:37.344 +02:00 [INF] Starting LotteryAsync in Repository for Gift ID 3 at "2025-01-20T21:49:37.3441183Z"
2025-01-20 23:49:37.459 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 450), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Winnings] ([Date], [LinkedUserId], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-01-20 23:49:37.484 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Gifts] SET [WinningId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-01-20 23:49:37.516 +02:00 [INF] LotteryAsync completed successfully in Repository for Gift ID 3 with Winner miri at "2025-01-20T21:49:37.5161049Z"
2025-01-20 23:49:37.518 +02:00 [INF] LotteryAsync completed successfully for Gift ID 3 at "2025-01-20T21:49:37.5188634Z"
2025-01-20 23:49:37.520 +02:00 [INF] Executed action method project.Controllers.GiftController.LotteryAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 397.2259ms.
2025-01-20 23:49:37.522 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:49:37.526 +02:00 [INF] Executed action project.Controllers.GiftController.LotteryAsync (project) in 435.7806ms
2025-01-20 23:49:37.528 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.LotteryAsync (project)'
2025-01-20 23:49:37.531 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Gift/lottery - 200 null application/json; charset=utf-8 455.8693ms
2025-01-20 23:49:40.871 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:49:40.877 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:40.879 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.9459ms
2025-01-20 23:49:40.888 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:49:40.894 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:40.895 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:49:40.897 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:49:40.898 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:49:40.928 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:49:40.931 +02:00 [INF] Fetching all donators.
2025-01-20 23:49:40.932 +02:00 [INF] Fetching all donators.
2025-01-20 23:49:40.936 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:49:40.939 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:49:40.940 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.8228ms.
2025-01-20 23:49:40.943 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:40.945 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 43.6621ms
2025-01-20 23:49:40.948 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:49:40.949 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:49:40.951 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 62.8337ms
2025-01-20 23:49:41.544 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:49:41.547 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:41.549 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 4.9963ms
2025-01-20 23:49:41.555 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:49:41.562 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:49:41.563 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:41.565 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:49:41.600 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:49:41.603 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:41.6033276Z"
2025-01-20 23:49:41.605 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:41.6052239Z"
2025-01-20 23:49:41.606 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:49:41.6066095Z"
2025-01-20 23:49:41.616 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:49:41.622 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:41.6219980Z"
2025-01-20 23:49:41.623 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:41.6231736Z"
2025-01-20 23:49:41.624 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:49:41.6244653Z"
2025-01-20 23:49:41.625 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 22.3949ms.
2025-01-20 23:49:41.628 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:49:41.630 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 61.1082ms
2025-01-20 23:49:41.632 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:49:41.634 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 78.8098ms
2025-01-20 23:50:21.797 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=c - null null
2025-01-20 23:50:21.842 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:50:21.844 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/search?text=c - 204 null null 47.2183ms
2025-01-20 23:50:21.872 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=c - application/json null
2025-01-20 23:50:21.875 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:50:21.877 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:50:21.885 +02:00 [INF] Route matched with {action = "Search", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SearchAsync(System.String) on controller project.Controllers.GiftController (project).
2025-01-20 23:50:21.926 +02:00 [INF] Executing action method project.Controllers.GiftController.SearchAsync (project) - Validation state: "Valid"
2025-01-20 23:50:21.929 +02:00 [INF] Starting SearchAsync with text 'c' at "2025-01-20T21:50:21.9295056Z"
2025-01-20 23:50:21.931 +02:00 [INF] Starting SearchAsync with text 'c' at "2025-01-20T21:50:21.9318476Z"
2025-01-20 23:50:21.937 +02:00 [INF] Starting SearchAsync with text 'c' at "2025-01-20T21:50:21.9372985Z"
2025-01-20 23:50:22.005 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__text_0_contains='?' (Size = 50), @__text_0='?' (Size = 11) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u0]
    WHERE [g].[Id] = [u0].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
WHERE [g].[Name] LIKE @__text_0_contains ESCAPE N'\' OR ([d].[Id] IS NOT NULL AND [d].[Name] LIKE @__text_0_contains ESCAPE N'\') OR COALESCE(CONVERT(varchar(11), (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId])), '') = @__text_0
2025-01-20 23:50:22.011 +02:00 [INF] SearchAsync completed successfully with text 'c' at "2025-01-20T21:50:22.0113408Z"
2025-01-20 23:50:22.012 +02:00 [INF] SearchAsync completed successfully with text 'c' at "2025-01-20T21:50:22.0127839Z"
2025-01-20 23:50:22.014 +02:00 [INF] SearchAsync completed successfully with text 'c' at "2025-01-20T21:50:22.0142957Z"
2025-01-20 23:50:22.015 +02:00 [INF] Executed action method project.Controllers.GiftController.SearchAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 87.519ms.
2025-01-20 23:50:22.018 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:50:22.020 +02:00 [INF] Executed action project.Controllers.GiftController.SearchAsync (project) in 132.2454ms
2025-01-20 23:50:22.022 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.SearchAsync (project)'
2025-01-20 23:50:22.024 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/search?text=c - 200 null application/json; charset=utf-8 151.5148ms
2025-01-20 23:50:59.805 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:50:59.816 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:50:59.819 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 13.3157ms
2025-01-20 23:50:59.841 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:50:59.844 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:50:59.846 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:50:59.953 +02:00 [WRN] Invalid Token
2025-01-20 23:50:59.955 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 114.0433ms
2025-01-20 23:51:30.538 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - null null
2025-01-20 23:51:30.547 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:51:30.548 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 204 null null 11.7369ms
2025-01-20 23:51:30.573 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - application/json null
2025-01-20 23:51:30.576 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:51:30.578 +02:00 [INF] Executing endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:51:30.579 +02:00 [INF] Route matched with {action = "GetGiftsWithDonatorAndCategory", controller = "Gift"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[project.Models.ModelsDto.GiftDto]] GetGiftsWithDonatorAndCategory() on controller project.Controllers.GiftController (project).
2025-01-20 23:51:30.636 +02:00 [INF] Executing action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) - Validation state: "Valid"
2025-01-20 23:51:30.640 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:51:30.6401930Z"
2025-01-20 23:51:30.642 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:51:30.6424130Z"
2025-01-20 23:51:30.644 +02:00 [INF] Starting GetGiftsWithDonatorAndCategory at "2025-01-20T21:51:30.6442347Z"
2025-01-20 23:51:30.674 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [g].[Id], [g].[Name], [g].[Price], [g].[image], [g].[IsLotteryCompleted], [d].[Name] AS [DonatorName], [c].[name] AS [Category], [g].[CategoryId], (
    SELECT COUNT(*)
    FROM [UserGifts] AS [u]
    WHERE [g].[Id] = [u].[GiftId]) AS [Purchases]
FROM [Gifts] AS [g]
LEFT JOIN [Donators] AS [d] ON [g].[DonatorId] = [d].[Id]
LEFT JOIN [Categories] AS [c] ON [g].[CategoryId] = [c].[Id]
2025-01-20 23:51:30.707 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:51:30.7072942Z"
2025-01-20 23:51:30.708 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:51:30.7084702Z"
2025-01-20 23:51:30.709 +02:00 [INF] GetGiftsWithDonatorAndCategory completed successfully at "2025-01-20T21:51:30.7097266Z"
2025-01-20 23:51:30.711 +02:00 [INF] Executed action method project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 70.8244ms.
2025-01-20 23:51:30.713 +02:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.ModelsDto.GiftDto, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:51:30.716 +02:00 [INF] Executed action project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project) in 134.1329ms
2025-01-20 23:51:30.720 +02:00 [INF] Executed endpoint 'project.Controllers.GiftController.GetGiftsWithDonatorAndCategory (project)'
2025-01-20 23:51:30.722 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Gift/giftsWithDonatorAndCategory - 200 null application/json; charset=utf-8 149.3667ms
2025-01-20 23:53:03.359 +02:00 [INF] Starting up the application
2025-01-20 23:53:06.794 +02:00 [INF] User profile is available. Using 'C:\Users\user1\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-20 23:53:09.235 +02:00 [INF] Executed DbCommand (76ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-01-20 23:53:09.418 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-01-20 23:53:09.827 +02:00 [INF] Now listening on: http://localhost:5062
2025-01-20 23:53:09.888 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-20 23:53:09.891 +02:00 [INF] Hosting environment: Development
2025-01-20 23:53:09.892 +02:00 [INF] Content root path: E:\פרויקט\server\project
2025-01-20 23:53:10.970 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.html - null null
2025-01-20 23:53:11.279 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.html - 200 null text/html;charset=utf-8 346.9744ms
2025-01-20 23:53:11.314 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/index.js - null null
2025-01-20 23:53:11.324 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/index.js - 200 null application/javascript;charset=utf-8 10.0382ms
2025-01-20 23:53:11.512 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - null null
2025-01-20 23:53:11.805 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 293.0208ms
2025-01-20 23:53:18.328 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:53:18.341 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:53:18.347 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 19.0786ms
2025-01-20 23:53:18.353 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:53:18.357 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:53:18.360 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-20 23:53:18.406 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:53:18.651 +02:00 [WRN] Invalid Token
2025-01-20 23:53:18.653 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 300.0043ms
2025-01-20 23:53:21.434 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 23:53:21.440 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:53:21.441 +02:00 [WRN] Missing Authorization Header
2025-01-20 23:53:21.442 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 8.0613ms
2025-01-20 23:53:21.954 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:53:21.966 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:53:21.975 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:53:22.066 +02:00 [WRN] Invalid Token
2025-01-20 23:53:22.070 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 115.6243ms
2025-01-20 23:54:30.286 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - null null
2025-01-20 23:54:30.290 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:54:30.292 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Auth/login - 204 null null 5.9917ms
2025-01-20 23:54:30.317 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5062/api/Auth/login - application/json 58
2025-01-20 23:54:30.321 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:54:30.376 +02:00 [INF] Executing endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:54:30.429 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(project.Models.Login) on controller project.Controllers.AuthController (project).
2025-01-20 23:54:30.608 +02:00 [INF] Executing action method project.Controllers.AuthController.Login (project) - Validation state: "Valid"
2025-01-20 23:54:30.720 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-20 23:54:30.968 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-20 23:54:30.998 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-01-20 23:54:31.054 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-01-20 23:54:31.084 +02:00 [INF] Executed action method project.Controllers.AuthController.Login (project), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 467.9338ms.
2025-01-20 23:54:31.098 +02:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType19`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-20 23:54:31.130 +02:00 [INF] Executed action project.Controllers.AuthController.Login (project) in 692.1632ms
2025-01-20 23:54:31.134 +02:00 [INF] Executed endpoint 'project.Controllers.AuthController.Login (project)'
2025-01-20 23:54:31.152 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5062/api/Auth/login - 200 null application/json; charset=utf-8 834.7758ms
2025-01-20 23:54:35.105 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:54:35.110 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:54:35.113 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 8.0275ms
2025-01-20 23:54:35.120 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:54:35.124 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:54:35.126 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:54:35.202 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:54:35.210 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:54:35.462 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:54:35.466 +02:00 [INF] Fetching all donators.
2025-01-20 23:54:35.474 +02:00 [INF] Fetching all donators.
2025-01-20 23:54:35.504 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:54:35.537 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:54:35.540 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 75.6571ms.
2025-01-20 23:54:35.542 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:54:35.574 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 360.703ms
2025-01-20 23:54:35.577 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:54:35.579 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:54:35.581 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 460.4186ms
2025-01-20 23:55:03.908 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/3 - null null
2025-01-20 23:55:03.921 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:55:03.923 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/3 - 204 null null 14.2922ms
2025-01-20 23:55:03.953 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator/3 - application/json null
2025-01-20 23:55:03.957 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:55:03.960 +02:00 [INF] Incoming Request: GET /api/Donator/3
2025-01-20 23:55:03.971 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-20 23:55:03.978 +02:00 [INF] Route matched with {action = "GetById", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByIdAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 23:55:04.035 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetByIdAsync (project) - Validation state: "Valid"
2025-01-20 23:55:04.041 +02:00 [INF] Fetching donator with ID: 3
2025-01-20 23:55:04.053 +02:00 [INF] Fetching donator with ID: 3
2025-01-20 23:55:04.073 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 23:55:04.081 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetByIdAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 43.8746ms.
2025-01-20 23:55:04.086 +02:00 [INF] Executing OkObjectResult, writing value of type 'project.Models.Donator'.
2025-01-20 23:55:04.090 +02:00 [INF] Executed action project.Controllers.DonatorController.GetByIdAsync (project) in 107.0938ms
2025-01-20 23:55:04.092 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetByIdAsync (project)'
2025-01-20 23:55:04.094 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:55:04.095 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator/3 - 200 null application/json; charset=utf-8 142.5226ms
2025-01-20 23:55:18.971 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:55:18.975 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:55:18.977 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 5.6744ms
2025-01-20 23:55:18.982 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5062/api/Donator - application/json 80
2025-01-20 23:55:18.985 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:55:18.987 +02:00 [INF] Incoming Request: PUT /api/Donator
2025-01-20 23:55:18.992 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-20 23:55:19.000 +02:00 [INF] Route matched with {action = "UpdateDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateDonatorAsync(project.Models.Donator) on controller project.Controllers.DonatorController (project).
2025-01-20 23:55:19.065 +02:00 [INF] Executing action method project.Controllers.DonatorController.UpdateDonatorAsync (project) - Validation state: "Valid"
2025-01-20 23:55:19.075 +02:00 [INF] Updating donator with ID: 3
2025-01-20 23:55:19.078 +02:00 [INF] Updating donator with ID: 3
2025-01-20 23:55:19.219 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 50), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Donators] SET [Email] = @p0, [Name] = @p1, [Phone] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2025-01-20 23:55:19.245 +02:00 [INF] Successfully updated donator with ID: 3
2025-01-20 23:55:19.247 +02:00 [INF] Donator with ID 3 updated successfully.
2025-01-20 23:55:19.248 +02:00 [INF] Executed action method project.Controllers.DonatorController.UpdateDonatorAsync (project), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 180.4077ms.
2025-01-20 23:55:19.254 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-01-20 23:55:19.256 +02:00 [INF] Executed action project.Controllers.DonatorController.UpdateDonatorAsync (project) in 249.8851ms
2025-01-20 23:55:19.258 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.UpdateDonatorAsync (project)'
2025-01-20 23:55:19.259 +02:00 [INF] Outgoing Response: 204
2025-01-20 23:55:19.260 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5062/api/Donator - 204 null null 277.8897ms
2025-01-20 23:55:19.371 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:55:19.376 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:55:19.377 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:55:19.380 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:55:19.382 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:55:19.417 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:55:19.421 +02:00 [INF] Fetching all donators.
2025-01-20 23:55:19.423 +02:00 [INF] Fetching all donators.
2025-01-20 23:55:19.429 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:55:19.434 +02:00 [INF] Successfully fetched 3 donators.
2025-01-20 23:55:19.436 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 16.217ms.
2025-01-20 23:55:19.439 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:55:19.441 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 55.7761ms
2025-01-20 23:55:19.443 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:55:19.444 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:55:19.446 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 74.4416ms
2025-01-20 23:56:01.438 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/3 - null null
2025-01-20 23:56:01.458 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:56:01.460 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator/3 - 204 null null 23.2307ms
2025-01-20 23:56:01.521 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5062/api/Donator/3 - application/json null
2025-01-20 23:56:01.524 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:56:01.528 +02:00 [INF] Incoming Request: DELETE /api/Donator/3
2025-01-20 23:56:01.536 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.DeleteDonatorAsync (project)'
2025-01-20 23:56:01.542 +02:00 [INF] Route matched with {action = "DeleteDonator", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteDonatorAsync(Int32) on controller project.Controllers.DonatorController (project).
2025-01-20 23:56:01.575 +02:00 [INF] Executing action method project.Controllers.DonatorController.DeleteDonatorAsync (project) - Validation state: "Valid"
2025-01-20 23:56:01.580 +02:00 [INF] Deleting donator with ID: 3
2025-01-20 23:56:01.583 +02:00 [INF] Attempting to delete donator with ID: 3
2025-01-20 23:56:01.585 +02:00 [INF] Fetching donator with ID: 3
2025-01-20 23:56:01.594 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
WHERE [d].[Id] = @__id_0
2025-01-20 23:56:01.632 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Donators]
OUTPUT 1
WHERE [Id] = @p0;
2025-01-20 23:56:01.642 +02:00 [INF] Successfully deleted donator with ID: 3
2025-01-20 23:56:01.643 +02:00 [INF] Successfully deleted donator with ID: 3
2025-01-20 23:56:01.644 +02:00 [INF] Executed action method project.Controllers.DonatorController.DeleteDonatorAsync (project), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 66.971ms.
2025-01-20 23:56:01.647 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-01-20 23:56:01.649 +02:00 [INF] Executed action project.Controllers.DonatorController.DeleteDonatorAsync (project) in 104.5934ms
2025-01-20 23:56:01.652 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.DeleteDonatorAsync (project)'
2025-01-20 23:56:01.654 +02:00 [INF] Outgoing Response: 204
2025-01-20 23:56:01.656 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5062/api/Donator/3 - 204 null null 134.5803ms
2025-01-20 23:56:01.663 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:56:01.668 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:56:01.670 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 7.0012ms
2025-01-20 23:56:01.674 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:56:01.677 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:56:01.678 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:56:01.681 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:56:01.683 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:56:01.717 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:56:01.720 +02:00 [INF] Fetching all donators.
2025-01-20 23:56:01.722 +02:00 [INF] Fetching all donators.
2025-01-20 23:56:01.726 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:56:01.730 +02:00 [INF] Successfully fetched 2 donators.
2025-01-20 23:56:01.732 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 11.6166ms.
2025-01-20 23:56:01.735 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:56:01.737 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 50.0404ms
2025-01-20 23:56:01.740 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:56:01.742 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:56:01.743 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 68.9733ms
2025-01-20 23:56:06.143 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:56:06.149 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:56:06.151 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:56:06.153 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:56:06.155 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:56:06.200 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:56:06.203 +02:00 [INF] Fetching all donators.
2025-01-20 23:56:06.204 +02:00 [INF] Fetching all donators.
2025-01-20 23:56:06.209 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:56:06.214 +02:00 [INF] Successfully fetched 2 donators.
2025-01-20 23:56:06.215 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 12.5053ms.
2025-01-20 23:56:06.217 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:56:06.219 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 61.6761ms
2025-01-20 23:56:06.221 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:56:06.224 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:56:06.225 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 81.8124ms
2025-01-20 23:59:55.549 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - null null
2025-01-20 23:59:55.554 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:59:55.555 +02:00 [WRN] Missing Authorization Header
2025-01-20 23:59:55.557 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 401 null null 7.7093ms
2025-01-20 23:59:56.752 +02:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - null null
2025-01-20 23:59:56.766 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:59:56.769 +02:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5062/api/Donator - 204 null null 17.3488ms
2025-01-20 23:59:56.799 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5062/api/Donator - application/json null
2025-01-20 23:59:56.804 +02:00 [INF] CORS policy execution successful.
2025-01-20 23:59:56.806 +02:00 [INF] Incoming Request: GET /api/Donator
2025-01-20 23:59:56.809 +02:00 [INF] Executing endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:59:56.811 +02:00 [INF] Route matched with {action = "GetDonators", controller = "Donator"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDonatorsAsync() on controller project.Controllers.DonatorController (project).
2025-01-20 23:59:56.869 +02:00 [INF] Executing action method project.Controllers.DonatorController.GetDonatorsAsync (project) - Validation state: "Valid"
2025-01-20 23:59:56.872 +02:00 [INF] Fetching all donators.
2025-01-20 23:59:56.874 +02:00 [INF] Fetching all donators.
2025-01-20 23:59:56.982 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Email], [d].[Name], [d].[Phone]
FROM [Donators] AS [d]
2025-01-20 23:59:56.991 +02:00 [INF] Successfully fetched 2 donators.
2025-01-20 23:59:56.993 +02:00 [INF] Executed action method project.Controllers.DonatorController.GetDonatorsAsync (project), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 120.6177ms.
2025-01-20 23:59:57.001 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[project.Models.Donator, project, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-20 23:59:57.005 +02:00 [INF] Executed action project.Controllers.DonatorController.GetDonatorsAsync (project) in 189.5466ms
2025-01-20 23:59:57.008 +02:00 [INF] Executed endpoint 'project.Controllers.DonatorController.GetDonatorsAsync (project)'
2025-01-20 23:59:57.010 +02:00 [INF] Outgoing Response: 200
2025-01-20 23:59:57.015 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5062/api/Donator - 200 null application/json; charset=utf-8 215.5593ms
